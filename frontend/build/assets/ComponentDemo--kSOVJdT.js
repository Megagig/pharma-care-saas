import{r as p,bf as $,aQ as Q,j as e,C as A,b as N,B as i,T as l,D as w,aa as P,d as W,O as q,l as k,bi as b,a5 as v,h as G,a0 as J,a7 as H,a8 as V,a9 as U,f as _,bj as ce,W as de,a6 as B,w as be,bh as ge,Z as ie,I as Y,aR as ye,aS as fe,be as ve,aT as Ce,aU as Se,a_ as we,G as F}from"./index-B_pWc9hu.js";import{A as te}from"./Add-D5-B7xRD.js";import{D as Re}from"./Delete-BIyg2wQJ.js";import{E as Ie}from"./Edit-DD3Q49Z-.js";import{S as Ae}from"./Search-C2mZoRVv.js";import{A as We}from"./Autocomplete-HcpzFt3K.js";import{A as De}from"./labStore-DtjAJ0ds.js";import{D as Oe}from"./diagnosticFeatureGuard-BcVaU7eX.js";import"./LocalHospital-BNb4THgq.js";import"./Upgrade-DcNEIpam.js";const oe={subjective:["Headache","Nausea","Vomiting","Dizziness","Fatigue","Chest pain","Shortness of breath","Abdominal pain","Back pain","Joint pain","Muscle aches","Fever","Chills","Cough","Sore throat","Runny nose","Congestion","Loss of appetite","Weight loss","Weight gain","Sleep problems","Anxiety","Depression","Confusion","Memory problems"],objective:["Elevated temperature","High blood pressure","Low blood pressure","Rapid heart rate","Slow heart rate","Irregular heart rate","Rapid breathing","Shallow breathing","Wheezing","Rales/crackles","Decreased breath sounds","Swelling (edema)","Skin rash","Pale skin","Jaundice","Cyanosis","Dehydration","Enlarged lymph nodes","Abdominal distension","Tenderness","Muscle weakness","Tremor","Altered mental status","Decreased mobility"]},ke=["Less than 1 hour","1-6 hours","6-24 hours","1-3 days","3-7 days","1-2 weeks","2-4 weeks","1-3 months","3-6 months","More than 6 months"],K=[{value:"mild",label:"Mild",color:"success"},{value:"moderate",label:"Moderate",color:"warning"},{value:"severe",label:"Severe",color:"error"}],ae=[{value:"acute",label:"Acute (sudden)",description:"Symptoms started suddenly"},{value:"subacute",label:"Subacute (gradual)",description:"Symptoms developed gradually over days"},{value:"chronic",label:"Chronic (long-term)",description:"Long-standing symptoms"}],Ne=({value:o,onChange:y,error:C,disabled:u=!1})=>{var g,r;const[f,D]=p.useState(!1),{control:x,watch:h,setValue:c,formState:{errors:T}}=$({defaultValues:{subjective:(o==null?void 0:o.subjective)||[],objective:(o==null?void 0:o.objective)||[],duration:(o==null?void 0:o.duration)||"",severity:(o==null?void 0:o.severity)||"mild",onset:(o==null?void 0:o.onset)||"acute",newSubjective:"",newObjective:""}}),a=h();Q.useEffect(()=>{const{newSubjective:t,newObjective:n,...d}=a;y(d)},[a,y]);const z=p.useCallback(()=>{const t=a.newSubjective.trim();if(t&&!a.subjective.includes(t)){const n=[...a.subjective,t];c("subjective",n),c("newSubjective","")}},[a.newSubjective,a.subjective,c]),S=p.useCallback(()=>{const t=a.newObjective.trim();if(t&&!a.objective.includes(t)){const n=[...a.objective,t];c("objective",n),c("newObjective","")}},[a.newObjective,a.objective,c]),O=p.useCallback(t=>{const n=a.subjective.filter(d=>d!==t);c("subjective",n)},[a.subjective,c]),E=p.useCallback(t=>{const n=a.objective.filter(d=>d!==t);c("objective",n)},[a.objective,c]),R=p.useCallback((t,n)=>{const d=a[n];if(!d.includes(t)){const I=[...d,t];c(n,I)}},[a,c]),M=t=>{const n=K.find(d=>d.value===t);return(n==null?void 0:n.color)||"default"};return e.jsx(A,{children:e.jsxs(N,{children:[e.jsxs(i,{sx:{mb:3},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:1},children:"Symptom Assessment"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Document patient-reported symptoms and clinical observations"})]}),C&&e.jsx(w,{severity:"error",sx:{mb:3},children:C}),e.jsxs(P,{spacing:4,children:[e.jsxs(i,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(l,{variant:"subtitle1",sx:{fontWeight:600},children:"Subjective Symptoms"}),e.jsx(W,{title:"Symptoms reported by the patient",children:e.jsx(q,{sx:{ml:1,fontSize:16,color:"text.secondary"}})})]}),a.subjective.length>0&&e.jsx(i,{sx:{mb:2},children:e.jsx(P,{direction:"row",spacing:1,sx:{flexWrap:"wrap",gap:1},children:a.subjective.map(t=>e.jsx(k,{label:t,onDelete:u?void 0:()=>O(t),color:"primary",variant:"outlined",size:"small"},t))})}),e.jsxs(i,{sx:{display:"flex",gap:1,mb:2},children:[e.jsx(b,{name:"newSubjective",control:x,render:({field:t})=>e.jsx(v,{...t,size:"small",placeholder:"Add subjective symptom...",disabled:u,onKeyPress:n=>{n.key==="Enter"&&(n.preventDefault(),z())},sx:{flex:1}})}),e.jsx(G,{variant:"outlined",size:"small",onClick:z,disabled:u||!a.newSubjective.trim(),startIcon:e.jsx(te,{}),children:"Add"})]}),e.jsxs(i,{children:[e.jsxs(G,{variant:"text",size:"small",onClick:()=>D(!f),disabled:u,children:[f?"Hide":"Show"," Common Symptoms"]}),f&&e.jsxs(i,{sx:{mt:1,p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsx(l,{variant:"caption",color:"text.secondary",sx:{mb:1,display:"block"},children:"Click to add common subjective symptoms:"}),e.jsx(P,{direction:"row",spacing:.5,sx:{flexWrap:"wrap",gap:.5},children:oe.subjective.map(t=>e.jsx(k,{label:t,size:"small",onClick:()=>R(t,"subjective"),disabled:u||a.subjective.includes(t),sx:{cursor:"pointer"},variant:"outlined"},t))})]})]})]}),e.jsx(J,{}),e.jsxs(i,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(l,{variant:"subtitle1",sx:{fontWeight:600},children:"Objective Findings"}),e.jsx(W,{title:"Clinical observations and examination findings",children:e.jsx(q,{sx:{ml:1,fontSize:16,color:"text.secondary"}})})]}),a.objective.length>0&&e.jsx(i,{sx:{mb:2},children:e.jsx(P,{direction:"row",spacing:1,sx:{flexWrap:"wrap",gap:1},children:a.objective.map(t=>e.jsx(k,{label:t,onDelete:u?void 0:()=>E(t),color:"secondary",variant:"outlined",size:"small"},t))})}),e.jsxs(i,{sx:{display:"flex",gap:1,mb:2},children:[e.jsx(b,{name:"newObjective",control:x,render:({field:t})=>e.jsx(v,{...t,size:"small",placeholder:"Add objective finding...",disabled:u,onKeyPress:n=>{n.key==="Enter"&&(n.preventDefault(),S())},sx:{flex:1}})}),e.jsx(G,{variant:"outlined",size:"small",onClick:S,disabled:u||!a.newObjective.trim(),startIcon:e.jsx(te,{}),children:"Add"})]}),e.jsxs(i,{sx:{mt:1,p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsx(l,{variant:"caption",color:"text.secondary",sx:{mb:1,display:"block"},children:"Click to add common objective findings:"}),e.jsx(P,{direction:"row",spacing:.5,sx:{flexWrap:"wrap",gap:.5},children:oe.objective.map(t=>e.jsx(k,{label:t,size:"small",onClick:()=>R(t,"objective"),disabled:u||a.objective.includes(t),sx:{cursor:"pointer"},variant:"outlined"},t))})]})]}),e.jsx(J,{}),e.jsxs(i,{children:[e.jsx(l,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Symptom Characteristics"}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr 1fr"},gap:3},children:[e.jsx(i,{children:e.jsx(b,{name:"duration",control:x,rules:{required:"Duration is required"},render:({field:t})=>e.jsxs(H,{fullWidth:!0,error:!!T.duration,children:[e.jsx(V,{children:"Duration"}),e.jsx(U,{...t,label:"Duration",disabled:u,children:ke.map(n=>e.jsx(_,{value:n,children:n},n))}),T.duration&&e.jsx(ce,{children:T.duration.message})]})})}),e.jsx(i,{children:e.jsx(b,{name:"severity",control:x,render:({field:t})=>e.jsxs(H,{fullWidth:!0,children:[e.jsx(V,{children:"Severity"}),e.jsx(U,{...t,label:"Severity",disabled:u,children:K.map(n=>e.jsx(_,{value:n.value,children:e.jsx(i,{sx:{display:"flex",alignItems:"center"},children:e.jsx(k,{label:n.label,size:"small",color:n.color,variant:"outlined",sx:{mr:1}})})},n.value))})]})})}),e.jsx(i,{children:e.jsx(b,{name:"onset",control:x,render:({field:t})=>e.jsxs(H,{fullWidth:!0,children:[e.jsx(V,{children:"Onset"}),e.jsx(U,{...t,label:"Onset",disabled:u,children:ae.map(n=>e.jsx(_,{value:n.value,children:e.jsxs(i,{children:[e.jsx(l,{variant:"body2",children:n.label}),e.jsx(l,{variant:"caption",color:"text.secondary",children:n.description})]})},n.value))})]})})})]})]}),a.subjective.length===0&&a.objective.length===0&&e.jsx(w,{severity:"warning",icon:e.jsx(de,{}),children:e.jsx(l,{variant:"body2",children:"Please add at least one subjective symptom or objective finding to proceed with the assessment."})}),(a.subjective.length>0||a.objective.length>0)&&e.jsxs(w,{severity:"info",children:[e.jsx(l,{variant:"body2",sx:{fontWeight:600,mb:1},children:"Assessment Summary:"}),e.jsxs(l,{variant:"body2",children:[a.subjective.length," subjective symptom(s),"," ",a.objective.length," objective finding(s)",a.duration&&` • Duration: ${a.duration}`,a.severity&&e.jsxs(e.Fragment,{children:[" • Severity: ",e.jsx(k,{label:(g=K.find(t=>t.value===a.severity))==null?void 0:g.label,size:"small",color:M(a.severity),variant:"outlined",sx:{ml:.5,height:20}})]}),a.onset&&` • Onset: ${(r=ae.find(t=>t.value===a.onset))==null?void 0:r.label}`]})]})]})]})})},Z={bloodPressure:{systolic:{min:90,max:140,unit:"mmHg"},diastolic:{min:60,max:90,unit:"mmHg"},format:"XXX/XX",example:"120/80"},heartRate:{min:60,max:100,unit:"bpm",description:"Resting heart rate"},temperature:{min:36.1,max:37.2,unit:"°C",description:"Body temperature"},bloodGlucose:{fasting:{min:70,max:100,unit:"mg/dL"},random:{min:70,max:140,unit:"mg/dL"},description:"Blood glucose level"},respiratoryRate:{min:12,max:20,unit:"breaths/min",description:"Respiratory rate"}},Te=({value:o,onChange:y,error:C,disabled:u=!1})=>{const{control:f,watch:D,setValue:x,formState:{errors:h}}=$({defaultValues:{bloodPressure:(o==null?void 0:o.bloodPressure)||"",heartRate:(o==null?void 0:o.heartRate)||"",temperature:(o==null?void 0:o.temperature)||"",bloodGlucose:(o==null?void 0:o.bloodGlucose)||"",respiratoryRate:(o==null?void 0:o.respiratoryRate)||""}});Q.useEffect(()=>{o&&(x("bloodPressure",o.bloodPressure||""),x("heartRate",o.heartRate||""),x("temperature",o.temperature||""),x("bloodGlucose",o.bloodGlucose||""),x("respiratoryRate",o.respiratoryRate||""))},[o,x]);const c=D();Q.useEffect(()=>{const r={bloodPressure:c.bloodPressure||void 0,heartRate:c.heartRate||void 0,temperature:c.temperature||void 0,bloodGlucose:c.bloodGlucose||void 0,respiratoryRate:c.respiratoryRate||void 0},t=Object.fromEntries(Object.entries(r).filter(([n,d])=>d!==void 0&&d!==""));y(Object.keys(t).length>0?t:void 0)},[c,y]);const T=r=>{if(!r)return!0;const t=/^(\d{2,3})\/(\d{2,3})$/,n=r.match(t);if(!n)return"Format: XXX/XX (e.g., 120/80)";const d=parseInt(n[1]),I=parseInt(n[2]);return d<70||d>250?"Systolic pressure should be between 70-250 mmHg":I<40||I>150?"Diastolic pressure should be between 40-150 mmHg":d<=I?"Systolic pressure should be higher than diastolic":!0},a=r=>r&&(r<30||r>220)?"Heart rate should be between 30-220 bpm":!0,z=r=>r&&(r<32||r>45)?"Temperature should be between 32-45°C":!0,S=r=>r&&(r<20||r>600)?"Blood glucose should be between 20-600 mg/dL":!0,O=r=>r&&(r<5||r>60)?"Respiratory rate should be between 5-60 breaths/min":!0,E=r=>{const t=r.match(/^(\d{2,3})\/(\d{2,3})$/);if(!t)return null;const n=parseInt(t[1]),d=parseInt(t[2]);return n<90||d<60?{status:"low",color:"warning",text:"Low BP"}:n>140||d>90?{status:"high",color:"error",text:"High BP"}:n>=120&&n<=140&&d>=80&&d<=90?{status:"elevated",color:"warning",text:"Elevated"}:{status:"normal",color:"success",text:"Normal"}},R=(r,t)=>r?r<t.min?{status:"low",color:"warning",text:"Low"}:r>t.max?{status:"high",color:"error",text:"High"}:{status:"normal",color:"success",text:"Normal"}:null,M=r=>r?r<70?{status:"low",color:"error",text:"Hypoglycemia"}:r>200?{status:"high",color:"error",text:"Hyperglycemia"}:r>140?{status:"elevated",color:"warning",text:"Elevated"}:{status:"normal",color:"success",text:"Normal"}:null,g=({status:r})=>{if(!r)return null;const t=r.status==="normal"?be:de;return e.jsx(k,{icon:e.jsx(t,{sx:{fontSize:16}}),label:r.text,size:"small",color:r.color,variant:"outlined",sx:{ml:1}})};return e.jsx(A,{children:e.jsxs(N,{children:[e.jsxs(i,{sx:{mb:3},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:1},children:"Vital Signs"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Record current vital signs and physiological measurements"})]}),C&&e.jsx(w,{severity:"error",sx:{mb:3},children:C}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:3},children:[e.jsx(i,{children:e.jsx(b,{name:"bloodPressure",control:f,rules:{validate:T},render:({field:r})=>{var t;return e.jsxs(i,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(l,{variant:"subtitle2",sx:{fontWeight:600},children:"Blood Pressure"}),e.jsx(W,{title:"Normal: 90-140/60-90 mmHg",children:e.jsx(q,{sx:{ml:1,fontSize:16,color:"text.secondary"}})}),e.jsx(g,{status:E(r.value)})]}),e.jsx(v,{...r,fullWidth:!0,label:"Blood Pressure",placeholder:"120/80",disabled:u,error:!!h.bloodPressure,helperText:((t=h.bloodPressure)==null?void 0:t.message)||"Format: systolic/diastolic (e.g., 120/80)",slotProps:{input:{endAdornment:e.jsx(B,{position:"end",children:"mmHg"})}}})]})}})}),e.jsx(i,{children:e.jsx(b,{name:"heartRate",control:f,rules:{validate:a},render:({field:r})=>{var t;return e.jsxs(i,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(l,{variant:"subtitle2",sx:{fontWeight:600},children:"Heart Rate"}),e.jsx(W,{title:"Normal: 60-100 bpm (resting)",children:e.jsx(q,{sx:{ml:1,fontSize:16,color:"text.secondary"}})}),e.jsx(g,{status:R(Number(r.value),Z.heartRate)})]}),e.jsx(v,{...r,fullWidth:!0,type:"number",label:"Heart Rate",placeholder:"72",disabled:u,error:!!h.heartRate,helperText:((t=h.heartRate)==null?void 0:t.message)||"Resting heart rate",slotProps:{input:{endAdornment:e.jsx(B,{position:"end",children:"bpm"})},htmlInput:{min:30,max:220,step:1}},onChange:n=>r.onChange(n.target.value?Number(n.target.value):"")})]})}})}),e.jsx(i,{children:e.jsx(b,{name:"temperature",control:f,rules:{validate:z},render:({field:r})=>{var t;return e.jsxs(i,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(l,{variant:"subtitle2",sx:{fontWeight:600},children:"Temperature"}),e.jsx(W,{title:"Normal: 36.1-37.2°C",children:e.jsx(q,{sx:{ml:1,fontSize:16,color:"text.secondary"}})}),e.jsx(g,{status:R(Number(r.value),Z.temperature)})]}),e.jsx(v,{...r,fullWidth:!0,type:"number",label:"Temperature",placeholder:"36.5",disabled:u,error:!!h.temperature,helperText:((t=h.temperature)==null?void 0:t.message)||"Body temperature",slotProps:{input:{endAdornment:e.jsx(B,{position:"end",children:"°C"})},htmlInput:{min:32,max:45,step:.1}},onChange:n=>r.onChange(n.target.value?Number(n.target.value):"")})]})}})}),e.jsx(i,{children:e.jsx(b,{name:"respiratoryRate",control:f,rules:{validate:O},render:({field:r})=>{var t;return e.jsxs(i,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(l,{variant:"subtitle2",sx:{fontWeight:600},children:"Respiratory Rate"}),e.jsx(W,{title:"Normal: 12-20 breaths/min",children:e.jsx(q,{sx:{ml:1,fontSize:16,color:"text.secondary"}})}),e.jsx(g,{status:R(Number(r.value),Z.respiratoryRate)})]}),e.jsx(v,{...r,fullWidth:!0,type:"number",label:"Respiratory Rate",placeholder:"16",disabled:u,error:!!h.respiratoryRate,helperText:((t=h.respiratoryRate)==null?void 0:t.message)||"Breaths per minute",slotProps:{input:{endAdornment:e.jsx(B,{position:"end",children:"breaths/min"})},htmlInput:{min:5,max:60,step:1}},onChange:n=>r.onChange(n.target.value?Number(n.target.value):"")})]})}})}),e.jsx(i,{children:e.jsx(b,{name:"bloodGlucose",control:f,rules:{validate:S},render:({field:r})=>{var t;return e.jsxs(i,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(l,{variant:"subtitle2",sx:{fontWeight:600},children:"Blood Glucose"}),e.jsx(W,{title:"Normal: 70-140 mg/dL (random), 70-100 mg/dL (fasting)",children:e.jsx(q,{sx:{ml:1,fontSize:16,color:"text.secondary"}})}),e.jsx(g,{status:M(Number(r.value))})]}),e.jsx(v,{...r,fullWidth:!0,type:"number",label:"Blood Glucose",placeholder:"95",disabled:u,error:!!h.bloodGlucose,helperText:((t=h.bloodGlucose)==null?void 0:t.message)||"Random or fasting glucose level",slotProps:{input:{endAdornment:e.jsx(B,{position:"end",children:"mg/dL"})},htmlInput:{min:20,max:600,step:1}},onChange:n=>r.onChange(n.target.value?Number(n.target.value):"")})]})}})})]}),e.jsxs(w,{severity:"info",sx:{mt:3},children:[e.jsx(l,{variant:"body2",sx:{fontWeight:600,mb:1},children:"Normal Reference Ranges:"}),e.jsxs(l,{variant:"body2",component:"div",children:["• Blood Pressure: 90-140/60-90 mmHg",e.jsx("br",{}),"• Heart Rate: 60-100 bpm (resting)",e.jsx("br",{}),"• Temperature: 36.1-37.2°C",e.jsx("br",{}),"• Respiratory Rate: 12-20 breaths/min",e.jsx("br",{}),"• Blood Glucose: 70-100 mg/dL (fasting), 70-140 mg/dL (random)"]})]}),(c.heartRate&&(Number(c.heartRate)<50||Number(c.heartRate)>120)||c.temperature&&(Number(c.temperature)<35||Number(c.temperature)>39)||c.bloodGlucose&&(Number(c.bloodGlucose)<60||Number(c.bloodGlucose)>250)||c.respiratoryRate&&(Number(c.respiratoryRate)<10||Number(c.respiratoryRate)>30))&&e.jsx(w,{severity:"warning",sx:{mt:2},children:e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Critical Values Detected:"})," Some vital signs are outside normal ranges and may require immediate attention."]})})]})})},le=["Acetaminophen","Ibuprofen","Aspirin","Lisinopril","Amlodipine","Metformin","Atorvastatin","Omeprazole","Levothyroxine","Metoprolol","Hydrochlorothiazide","Losartan","Simvastatin","Gabapentin","Sertraline","Prednisone","Amoxicillin","Ciprofloxacin","Warfarin","Insulin"],ee=["Once daily","Twice daily","Three times daily","Four times daily","Every 4 hours","Every 6 hours","Every 8 hours","Every 12 hours","As needed","Weekly","Monthly","Other"],Me=["mg","g","mcg","mL","tablets","capsules","drops","puffs","units","patches"],Pe=({value:o=[],onChange:y,error:C,disabled:u=!1})=>{const[f,D]=p.useState(!1),[x,h]=p.useState(null),[c,T]=p.useState(""),{control:a,watch:z}=$({defaultValues:{medications:o}}),{fields:S,append:O,remove:E,update:R}=ge({control:a,name:"medications"}),M=z("medications");Q.useEffect(()=>{y(M)},[M,y]);const{control:g,handleSubmit:r,reset:t,watch:n,formState:{errors:d}}=$({defaultValues:{name:"",dosage:"",dosageAmount:"",dosageUnit:"mg",frequency:"Once daily",customFrequency:""}}),I=n(),se=p.useCallback((s,m)=>{if(s){const j=s.dosage.match(/^(\d+(?:\.\d+)?)\s*(\w+)$/),X=j?j[1]:"",pe=j?j[2]:"mg";t({name:s.name,dosage:s.dosage,dosageAmount:X,dosageUnit:pe,frequency:ee.includes(s.frequency)?s.frequency:"Other",customFrequency:ee.includes(s.frequency)?"":s.frequency}),h(m??null)}else t({name:"",dosage:"",dosageAmount:"",dosageUnit:"mg",frequency:"Once daily",customFrequency:""}),h(null);D(!0)},[t]),L=p.useCallback(()=>{D(!1),h(null),t()},[t]),re=p.useCallback(s=>{const m=s.dosageAmount&&s.dosageUnit?`${s.dosageAmount} ${s.dosageUnit}`:s.dosage,j=s.frequency==="Other"?s.customFrequency:s.frequency,X={name:s.name.trim(),dosage:m.trim(),frequency:j.trim()};x!==null?R(x,X):O(X),L()},[x,R,O,L]),me=p.useCallback(s=>{E(s)},[E]),ue=p.useCallback(s=>{O({name:s,dosage:"",frequency:"Once daily"})},[O]),ne=le.filter(s=>s.toLowerCase().includes(c.toLowerCase())&&!M.some(m=>m.name.toLowerCase()===s.toLowerCase())),xe=s=>s.trim()?s.trim().length<2?"Medication name must be at least 2 characters":!0:"Medication name is required",he=(s,m)=>{if(!s&&!m)return!0;if(s&&!m)return"Please select a dosage unit";if(!s&&m)return"Please enter dosage amount";const j=parseFloat(s);return isNaN(j)||j<=0?"Dosage amount must be a positive number":!0},je=(s,m)=>s==="Other"&&!m.trim()?"Please specify custom frequency":!0;return e.jsx(A,{children:e.jsxs(N,{children:[e.jsxs(i,{sx:{mb:3},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:1},children:"Current Medications"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Document all current medications, supplements, and over-the-counter drugs"})]}),C&&e.jsx(w,{severity:"error",sx:{mb:3},children:C}),S.length>0?e.jsx(i,{sx:{mb:3},children:e.jsx(P,{spacing:2,children:S.map((s,m)=>e.jsx(A,{variant:"outlined",sx:{p:2},children:e.jsxs(i,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[e.jsxs(i,{sx:{flex:1},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(ie,{sx:{mr:1,color:"primary.main",fontSize:20}}),e.jsx(l,{variant:"subtitle2",sx:{fontWeight:600},children:s.name})]}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:[e.jsxs(l,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Dosage:"})," ",s.dosage||"Not specified"]}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Frequency:"})," ",s.frequency]})]})]}),e.jsxs(i,{sx:{display:"flex",gap:1},children:[e.jsx(W,{title:"Edit medication",children:e.jsx(Y,{size:"small",onClick:()=>se(s,m),disabled:u,children:e.jsx(Ie,{fontSize:"small"})})}),e.jsx(W,{title:"Remove medication",children:e.jsx(Y,{size:"small",color:"error",onClick:()=>me(m),disabled:u,children:e.jsx(Re,{fontSize:"small"})})})]})]})},s.id))})}):e.jsx(w,{severity:"info",sx:{mb:3},children:e.jsx(l,{variant:"body2",children:"No medications recorded. Add current medications to help with drug interaction checking and clinical assessment."})}),e.jsx(i,{sx:{display:"flex",justifyContent:"center",mb:3},children:e.jsx(G,{variant:"contained",startIcon:e.jsx(te,{}),onClick:()=>se(),disabled:u,children:"Add Medication"})}),e.jsx(J,{sx:{my:3}}),e.jsxs(i,{children:[e.jsx(l,{variant:"subtitle2",sx:{fontWeight:600,mb:2},children:"Quick Add Common Medications"}),e.jsx(v,{size:"small",placeholder:"Search medications...",value:c,onChange:s=>T(s.target.value),InputProps:{startAdornment:e.jsx(Ae,{sx:{mr:1,color:"text.secondary"}})},sx:{mb:2,maxWidth:300},disabled:u}),e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:ne.slice(0,15).map(s=>e.jsx(k,{label:s,onClick:()=>ue(s),disabled:u,sx:{cursor:"pointer"},variant:"outlined",size:"small"},s))}),ne.length===0&&c&&e.jsxs(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:['No medications found matching "',c,'"']})]}),e.jsxs(ye,{open:f,onClose:L,maxWidth:"sm",fullWidth:!0,slotProps:{paper:{sx:{borderRadius:2}}},children:[e.jsxs(fe,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",pr:6},children:[e.jsx(ie,{sx:{mr:1}}),x!==null?"Edit Medication":"Add Medication"]}),e.jsx(Y,{onClick:L,sx:{position:"absolute",right:8,top:8},children:e.jsx(ve,{})})]}),e.jsx(Ce,{dividers:!0,children:e.jsx("form",{onSubmit:r(re),children:e.jsxs(P,{spacing:3,children:[e.jsx(b,{name:"name",control:g,rules:{validate:xe},render:({field:s})=>e.jsx(We,{...s,options:le,freeSolo:!0,value:s.value,onChange:(m,j)=>s.onChange(j||""),onInputChange:(m,j)=>s.onChange(j),renderInput:m=>{var j;return e.jsx(v,{...m,label:"Medication Name",placeholder:"Enter or search medication name",error:!!d.name,helperText:(j=d.name)==null?void 0:j.message,required:!0})}})}),e.jsxs(i,{children:[e.jsx(l,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Dosage (Optional)"}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsx(b,{name:"dosageAmount",control:g,rules:{validate:s=>he(s,I.dosageUnit)},render:({field:s})=>{var m;return e.jsx(v,{...s,label:"Amount",placeholder:"10",type:"number",slotProps:{htmlInput:{min:0,step:.1}},error:!!d.dosageAmount,helperText:(m=d.dosageAmount)==null?void 0:m.message,fullWidth:!0})}}),e.jsx(b,{name:"dosageUnit",control:g,render:({field:s})=>e.jsxs(H,{fullWidth:!0,children:[e.jsx(V,{children:"Unit"}),e.jsx(U,{...s,label:"Unit",children:Me.map(m=>e.jsx(_,{value:m,children:m},m))})]})})]})]}),e.jsxs(i,{children:[e.jsx(b,{name:"frequency",control:g,rules:{validate:s=>je(s,I.customFrequency)},render:({field:s})=>e.jsxs(H,{fullWidth:!0,error:!!d.frequency,children:[e.jsx(V,{children:"Frequency"}),e.jsx(U,{...s,label:"Frequency",children:ee.map(m=>e.jsx(_,{value:m,children:m},m))}),d.frequency&&e.jsx(ce,{children:d.frequency.message})]})}),I.frequency==="Other"&&e.jsx(b,{name:"customFrequency",control:g,render:({field:s})=>{var m;return e.jsx(v,{...s,label:"Custom Frequency",placeholder:"e.g., Every other day, Before meals",fullWidth:!0,sx:{mt:2},error:!!d.customFrequency,helperText:(m=d.customFrequency)==null?void 0:m.message})}})]}),e.jsx(w,{severity:"info",children:e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Tip:"})," Include all medications, supplements, vitamins, and over-the-counter drugs. This information is crucial for checking drug interactions and ensuring patient safety."]})})]})})}),e.jsxs(Se,{sx:{p:3},children:[e.jsx(G,{onClick:L,children:"Cancel"}),e.jsxs(G,{onClick:r(re),variant:"contained",children:[x!==null?"Update":"Add"," Medication"]})]})]}),S.length>0&&e.jsx(w,{severity:"success",sx:{mt:3},children:e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Medication Summary:"})," ",S.length," medication",S.length>1?"s":""," recorded. This information will be used for drug interaction checking during the diagnostic process."]})})]})})},qe=()=>{const[o,y]=p.useState({symptoms:{subjective:[],objective:[],duration:"",severity:"mild",onset:"acute"},vitals:void 0,currentMedications:[],allergies:[]}),C=x=>{y(h=>({...h,symptoms:x}))},u=x=>{y(h=>({...h,vitals:x}))},f=x=>{y(h=>({...h,currentMedications:x}))},D=x=>{y(h=>({...h,allergies:x}))};return e.jsxs(we,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(i,{sx:{mb:4},children:[e.jsx(l,{variant:"h4",sx:{fontWeight:600,mb:2},children:"Diagnostic Components Demo"}),e.jsx(l,{variant:"body1",color:"text.secondary",children:"Interactive demonstration of the symptom input and patient assessment components"})]}),e.jsxs(F,{container:!0,spacing:4,children:[e.jsx(F,{item:!0,xs:12,children:e.jsx(A,{children:e.jsxs(N,{children:[e.jsx(l,{variant:"h6",sx:{mb:2,fontWeight:600},children:"1. Symptom Assessment Component"}),e.jsx(Ne,{value:o.symptoms,onChange:C})]})})}),e.jsx(F,{item:!0,xs:12,children:e.jsx(A,{children:e.jsxs(N,{children:[e.jsx(l,{variant:"h6",sx:{mb:2,fontWeight:600},children:"2. Vital Signs Component"}),e.jsx(Te,{value:o.vitals,onChange:u})]})})}),e.jsx(F,{item:!0,xs:12,children:e.jsx(A,{children:e.jsxs(N,{children:[e.jsx(l,{variant:"h6",sx:{mb:2,fontWeight:600},children:"3. Medication History Component"}),e.jsx(Pe,{value:o.currentMedications,onChange:f})]})})}),e.jsx(F,{item:!0,xs:12,children:e.jsx(A,{children:e.jsxs(N,{children:[e.jsx(l,{variant:"h6",sx:{mb:2,fontWeight:600},children:"4. Allergy Management Component"}),e.jsx(De,{value:o.allergies,onChange:D})]})})}),e.jsx(F,{item:!0,xs:12,children:e.jsx(A,{children:e.jsxs(N,{children:[e.jsx(l,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Current Form Data"}),e.jsx(J,{sx:{mb:2}}),e.jsx(i,{component:"pre",sx:{backgroundColor:"grey.100",p:2,borderRadius:1,overflow:"auto",fontSize:"0.875rem",fontFamily:"monospace"},children:JSON.stringify(o,null,2)})]})})})]})]})},Xe=()=>e.jsx(Oe,{children:e.jsx(qe,{})});export{Xe as default};
