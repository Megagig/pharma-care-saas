import{c as P,j as s,cc as S,cq as A,cg as I,cr as Be,u as _e,aZ as Se,r as R,y as ze,ce as Je,X as Ae,a2 as Qe,bH as qe,P as $e,W as Ge,a_ as Ue,T as d,Q as b,B as u,a5 as We,a6 as we,I as De,l as O,h as D,a$ as Ye,C as Xe,b as Ze}from"./index-B_pWc9hu.js";import{F as h}from"./FixedGrid-B4UzxoGK.js";import{S as Ie}from"./Search-C2mZoRVv.js";import{C as Ke}from"./Clear-BB7JsfoZ.js";import{L as et}from"./LocalPharmacy-BpoHyUxJ.js";import{M as tt}from"./AttachMoney-81FhkR8A.js";const rt=P(s.jsx("path",{d:"m22.7 19-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4"})),at=P(s.jsx("path",{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2m-5 12H9v-2h6zm5-7H4V4l16-.02z"})),st=P(s.jsx("path",{d:"m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83"})),E=S()(A(I((r,n)=>({activeReport:null,reportData:{},loading:{},errors:{},reportHistory:[],sidebarCollapsed:!1,fullscreenChart:null,setActiveReport:e=>{r({activeReport:e},!1,"setActiveReport")},clearActiveReport:()=>{r({activeReport:null},!1,"clearActiveReport")},setReportData:(e,t)=>{r(a=>({reportData:{...a.reportData,[e]:t},loading:{...a.loading,[e]:!1},errors:{...a.errors,[e]:null}}),!1,"setReportData")},setLoading:(e,t)=>{r(a=>({loading:{...a.loading,[e]:t},errors:t?{...a.errors,[e]:null}:a.errors}),!1,"setLoading")},setError:(e,t)=>{r(a=>({errors:{...a.errors,[e]:t},loading:{...a.loading,[e]:!1}}),!1,"setError")},clearReportData:e=>{r(t=>{const a={...t.reportData},l={...t.loading},c={...t.errors};return delete a[e],delete l[e],delete c[e],{reportData:a,loading:l,errors:c}},!1,"clearReportData")},addToHistory:(e,t)=>{r(a=>{const l={reportType:e,filters:t,timestamp:new Date,id:`${e}-${Date.now()}`},c=a.reportHistory.filter(y=>!(y.reportType===e&&JSON.stringify(y.filters)===JSON.stringify(t)));return{reportHistory:[l,...c].slice(0,50)}},!1,"addToHistory")},clearHistory:()=>{r({reportHistory:[]},!1,"clearHistory")},setSidebarCollapsed:e=>{r({sidebarCollapsed:e},!1,"setSidebarCollapsed")},setFullscreenChart:e=>{r({fullscreenChart:e},!1,"setFullscreenChart")},getCurrentReportData:()=>{const e=n();return e.activeReport&&e.reportData[e.activeReport]||null},isCurrentReportLoading:()=>{const e=n();return e.activeReport&&e.loading[e.activeReport]||!1},getCurrentReportError:()=>{const e=n();return e.activeReport&&e.errors[e.activeReport]||null},getRecentReports:(e=10)=>n().reportHistory.slice(0,e)}),{name:"reports-store",partialize:r=>({reportHistory:r.reportHistory,sidebarCollapsed:r.sidebarCollapsed,activeReport:r.activeReport})}),{name:"ReportsStore"})),ke=r=>{const n=new Date,e=new Date;switch(r){case"7d":e.setDate(n.getDate()-7);break;case"30d":e.setDate(n.getDate()-30);break;case"90d":e.setDate(n.getDate()-90);break;case"6months":e.setMonth(n.getMonth()-6);break;case"1year":e.setFullYear(n.getFullYear()-1);break}return{startDate:e,endDate:n,preset:r}},ot=(r,n)=>{const e={};if(n.forEach(t=>{var l;const a=r[t.key];if(t.required&&(a==null||a==="")){e[t.key]=`${t.label} is required`;return}!a&&!t.required||(l=t.validation)==null||l.forEach(c=>{switch(c.type){case"min":typeof a=="number"&&a<c.value&&(e[t.key]=c.message);break;case"max":typeof a=="number"&&a>c.value&&(e[t.key]=c.message);break;case"pattern":typeof a=="string"&&!new RegExp(c.value).test(a)&&(e[t.key]=c.message);break;case"custom":c.validator&&!c.validator(a)&&(e[t.key]=c.message);break}})}),r.dateRange){const{startDate:t,endDate:a}=r.dateRange;t&&a&&t>a&&(e.dateRange="Start date must be before end date")}return{isValid:Object.keys(e).length===0,errors:e}},nt=r=>{const n={dateRange:ke("30d")};return r.forEach(e=>{e.defaultValue!==void 0&&(n[e.key]=e.defaultValue)}),n},M={dateRange:ke("30d")};S()(A(I((r,n)=>({filters:{},presets:[],definitions:{},panelOpen:!1,activePreset:null,validationErrors:{},setFilters:(e,t)=>{r(a=>({filters:{...a.filters,[e]:t},activePreset:null}),!1,"setFilters"),n().validateCurrentFilters(e)},updateFilter:(e,t,a)=>{r(l=>{const y={...l.filters[e]||M,[t]:a};return{filters:{...l.filters,[e]:y},activePreset:null}},!1,"updateFilter"),n().validateCurrentFilters(e)},resetFilters:e=>{const a=n().definitions[e]||[],l=nt(a);r(c=>({filters:{...c.filters,[e]:l},activePreset:null,validationErrors:{...c.validationErrors,[e]:{}}}),!1,"resetFilters")},applyPreset:(e,t)=>{const l=n().presets.find(c=>c.id===t);l&&(r(c=>({filters:{...c.filters,[e]:l.filters},activePreset:t}),!1,"applyPreset"),n().validateCurrentFilters(e))},savePreset:e=>{const t={...e,id:`preset-${Date.now()}`,createdAt:new Date};r(a=>({presets:[...a.presets,t]}),!1,"savePreset")},deletePreset:e=>{r(t=>({presets:t.presets.filter(a=>a.id!==e),activePreset:t.activePreset===e?null:t.activePreset}),!1,"deletePreset")},setFilterDefinitions:(e,t)=>{r(a=>({definitions:{...a.definitions,[e]:t}}),!1,"setFilterDefinitions")},setPanelOpen:e=>{r({panelOpen:e},!1,"setPanelOpen")},setActivePreset:e=>{r({activePreset:e},!1,"setActivePreset")},validateCurrentFilters:e=>{const t=n(),a=t.filters[e]||M,l=t.definitions[e]||[],c=ot(a,l);return r(y=>({validationErrors:{...y.validationErrors,[e]:c.errors}}),!1,"validateCurrentFilters"),c.isValid},getFilters:e=>n().filters[e]||M,getValidationErrors:e=>n().validationErrors[e]||{},getPresetsForReport:e=>n().presets.filter(a=>!a.tags||a.tags.includes(e)),hasUnsavedChanges:e=>{const t=n(),a=t.filters[e],l=t.activePreset;if(!a||!l)return!1;const c=t.presets.find(y=>y.id===l);return c?JSON.stringify(a)!==JSON.stringify(c.filters):!1}}),{name:"filters-store",partialize:r=>({filters:r.filters,presets:r.presets,panelOpen:r.panelOpen})}),{name:"FiltersStore"}));S()(A((r,n)=>({exportJobs:{},exportResults:{},schedules:{},exportDialogOpen:!1,scheduleDialogOpen:!1,selectedExportFormat:"pdf",addExportJob:e=>{r(t=>({exportJobs:{...t.exportJobs,[e.id]:e}}),!1,"addExportJob")},updateExportJob:(e,t)=>{r(a=>{const l=a.exportJobs[e];return l?{exportJobs:{...a.exportJobs,[e]:{...l,...t}}}:a},!1,"updateExportJob")},removeExportJob:e=>{r(t=>{const a={...t.exportJobs};return delete a[e],{exportJobs:a}},!1,"removeExportJob")},addExportResult:e=>{r(t=>({exportResults:{...t.exportResults,[e.id]:e}}),!1,"addExportResult")},removeExportResult:e=>{r(t=>{const a={...t.exportResults};return delete a[e],{exportResults:a}},!1,"removeExportResult")},addSchedule:e=>{r(t=>({schedules:{...t.schedules,[e.id]:e}}),!1,"addSchedule")},updateSchedule:(e,t)=>{r(a=>{const l=a.schedules[e];return l?{schedules:{...a.schedules,[e]:{...l,...t}}}:a},!1,"updateSchedule")},removeSchedule:e=>{r(t=>{const a={...t.schedules};return delete a[e],{schedules:a}},!1,"removeSchedule")},setExportDialogOpen:e=>{r({exportDialogOpen:e},!1,"setExportDialogOpen")},setScheduleDialogOpen:e=>{r({scheduleDialogOpen:e},!1,"setScheduleDialogOpen")},setSelectedExportFormat:e=>{r({selectedExportFormat:e},!1,"setSelectedExportFormat")},getActiveExportJobs:()=>{const e=n();return Object.values(e.exportJobs).filter(t=>t.status==="queued"||t.status==="processing")},getCompletedExportJobs:()=>{const e=n();return Object.values(e.exportJobs).filter(t=>t.status==="completed"||t.status==="failed")},getActiveSchedules:()=>{const e=n();return Object.values(e.schedules).filter(t=>t.isActive)},getRecentExportResults:(e=10)=>{const t=n();return Object.values(t.exportResults).sort((a,l)=>l.createdAt.getTime()-a.createdAt.getTime()).slice(0,e)}}),{name:"ExportsStore"}));S()(A(I((r,n)=>({templates:{},categories:[],builder:null,templateDialogOpen:!1,builderOpen:!1,selectedTemplate:null,addTemplate:e=>{r(t=>({templates:{...t.templates,[e.id]:e}}),!1,"addTemplate")},updateTemplate:(e,t)=>{r(a=>{const l=a.templates[e];return l?{templates:{...a.templates,[e]:{...l,...t,updatedAt:new Date}}}:a},!1,"updateTemplate")},removeTemplate:e=>{r(t=>{const a={...t.templates};return delete a[e],{templates:a,selectedTemplate:t.selectedTemplate===e?null:t.selectedTemplate}},!1,"removeTemplate")},setCategories:e=>{r({categories:e},!1,"setCategories")},setBuilder:e=>{r({builder:e},!1,"setBuilder")},updateBuilder:e=>{r(t=>t.builder?{builder:{...t.builder,...e,isDirty:!0}}:t,!1,"updateBuilder")},setTemplateDialogOpen:e=>{r({templateDialogOpen:e},!1,"setTemplateDialogOpen")},setBuilderOpen:e=>{r({builderOpen:e},!1,"setBuilderOpen")},setSelectedTemplate:e=>{r({selectedTemplate:e},!1,"setSelectedTemplate")},getTemplate:e=>n().templates[e]||null,getTemplatesByCategory:e=>{const t=n();return Object.values(t.templates).filter(a=>a.metadata.category===e)},getUserTemplates:e=>{const t=n();return Object.values(t.templates).filter(a=>a.createdBy===e)},getPublicTemplates:()=>{const e=n();return Object.values(e.templates).filter(t=>t.isPublic)},getFeaturedTemplates:()=>{const e=n();return Object.values(e.templates).filter(t=>t.metadata.tags.includes("featured"))}}),{name:"templates-store",partialize:r=>({templates:r.templates,categories:r.categories,selectedTemplate:r.selectedTemplate})}),{name:"TemplatesStore"}));const lt={corporate:["#2563eb","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316","#84cc16"],vibrant:["#3b82f6","#22c55e","#eab308","#f43f5e","#a855f7","#0ea5e9","#fb923c","#a3e635"],pastel:["#93c5fd","#86efac","#fde047","#fca5a5","#c4b5fd","#7dd3fc","#fdba74","#bef264"],blues:["#1e3a8a","#1e40af","#1d4ed8","#2563eb","#3b82f6","#60a5fa","#93c5fd","#dbeafe"],greens:["#14532d","#166534","#15803d","#16a34a","#22c55e","#4ade80","#86efac","#bbf7d0"],healthcare:["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316","#84cc16"],accessible:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f"],dark:["#60a5fa","#34d399","#fbbf24","#f87171","#a78bfa","#38bdf8","#fb923c","#a3e635"]},it={blueGradient:{type:"linear",direction:45,stops:[{offset:0,color:"#3b82f6",opacity:.8},{offset:1,color:"#1e40af",opacity:.4}]},greenGradient:{type:"linear",direction:45,stops:[{offset:0,color:"#22c55e",opacity:.8},{offset:1,color:"#15803d",opacity:.4}]},purpleGradient:{type:"linear",direction:45,stops:[{offset:0,color:"#a855f7",opacity:.8},{offset:1,color:"#7c3aed",opacity:.4}]},sunsetGradient:{type:"linear",direction:90,stops:[{offset:0,color:"#f59e0b",opacity:.9},{offset:.5,color:"#f97316",opacity:.7},{offset:1,color:"#ef4444",opacity:.5}]},oceanGradient:{type:"linear",direction:180,stops:[{offset:0,color:"#0ea5e9",opacity:.9},{offset:.5,color:"#06b6d4",opacity:.7},{offset:1,color:"#10b981",opacity:.5}]},radialGlow:{type:"radial",stops:[{offset:0,color:"#ffffff",opacity:.9},{offset:.7,color:"#3b82f6",opacity:.6},{offset:1,color:"#1e40af",opacity:.3}]}},j=(r,n="corporate")=>{const e=r==="dark",t=lt[n];return{name:`${n}-${r}`,mode:r,colorPalette:t,gradients:Object.values(it),typography:{fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif',fontSize:{small:11,medium:13,large:16,xlarge:20},fontWeight:{light:300,normal:400,medium:500,bold:600}},spacing:{xs:4,sm:8,md:16,lg:24,xl:32},borderRadius:8,shadows:{small:e?"0 1px 3px 0 rgba(0, 0, 0, 0.3), 0 1px 2px 0 rgba(0, 0, 0, 0.2)":"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",medium:e?"0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2)":"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",large:e?"0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2)":"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"}}},Te={light:j("light","corporate"),dark:j("dark","dark"),healthcare:j("light","healthcare"),accessible:j("light","accessible"),vibrant:j("light","vibrant"),pastel:j("light","pastel")};S()(A(I((r,n)=>({currentTheme:Te.light,availableThemes:Te,chartConfigs:{},chartDataCache:{},chartInteractions:{},animationsEnabled:!0,highPerformanceMode:!1,setTheme:e=>{r({currentTheme:e},!1,"setTheme")},setThemeByName:e=>{const a=n().availableThemes[e];a&&r({currentTheme:a},!1,"setThemeByName")},addCustomTheme:(e,t)=>{r(a=>({availableThemes:{...a.availableThemes,[e]:t}}),!1,"addCustomTheme")},setChartConfig:(e,t)=>{r(a=>({chartConfigs:{...a.chartConfigs,[e]:t}}),!1,"setChartConfig")},updateChartConfig:(e,t)=>{r(a=>{const l=a.chartConfigs[e];return l?{chartConfigs:{...a.chartConfigs,[e]:{...l,...t}}}:a},!1,"updateChartConfig")},cacheChartData:(e,t)=>{r(a=>({chartDataCache:{...a.chartDataCache,[e]:t}}),!1,"cacheChartData")},clearChartCache:e=>{r(e?t=>{const a={...t.chartDataCache};return delete a[e],{chartDataCache:a}}:{chartDataCache:{}},!1,"clearChartCache")},setChartInteraction:(e,t)=>{r(a=>({chartInteractions:{...a.chartInteractions,[e]:{hovered:!1,selected:!1,zoomed:!1,lastInteraction:new Date,...a.chartInteractions[e],...t}}}),!1,"setChartInteraction")},setAnimationsEnabled:e=>{r({animationsEnabled:e},!1,"setAnimationsEnabled")},setHighPerformanceMode:e=>{r({highPerformanceMode:e,animationsEnabled:e?!1:n().animationsEnabled},!1,"setHighPerformanceMode")},getChartConfig:e=>n().chartConfigs[e]||null,getCachedChartData:e=>n().chartDataCache[e]||null,getChartInteraction:e=>n().chartInteractions[e]||null}),{name:"charts-store",partialize:r=>({currentTheme:r.currentTheme,availableThemes:r.availableThemes,animationsEnabled:r.animationsEnabled,highPerformanceMode:r.highPerformanceMode})}),{name:"ChartsStore"}));const Fe={gridColumns:3,cardSize:"medium",showDescriptions:!0,showCategories:!0,sortBy:"category",sortOrder:"asc"},ct=()=>`tab-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,x=S()(A(Be(I((r,n)=>({currentPath:"/reports-analytics",breadcrumbs:[{label:"Dashboard",path:"/dashboard"},{label:"Reports & Analytics"}],navigationHistory:[],searchQuery:"",selectedCategory:"all",layout:Fe,sidebarCollapsed:!1,fullscreenMode:!1,quickAccessItems:[],favoriteReports:[],recentlyViewed:[],lastRefresh:null,autoRefreshEnabled:!1,autoRefreshInterval:300,errorState:{hasError:!1,errorMessage:null,errorCode:null,retryCount:0},tabId:ct(),lastActivity:new Date,setCurrentPath:e=>{r({currentPath:e},!1,"setCurrentPath"),n().updateActivity()},setBreadcrumbs:e=>{r({breadcrumbs:e},!1,"setBreadcrumbs")},addToNavigationHistory:e=>{r(t=>({navigationHistory:[e,...t.navigationHistory.filter(l=>l!==e)].slice(0,20)}),!1,"addToNavigationHistory")},clearNavigationHistory:()=>{r({navigationHistory:[]},!1,"clearNavigationHistory")},setSearchQuery:e=>{r({searchQuery:e},!1,"setSearchQuery"),n().updateActivity()},setSelectedCategory:e=>{r({selectedCategory:e},!1,"setSelectedCategory"),n().updateActivity()},updateLayout:e=>{r(t=>({layout:{...t.layout,...e}}),!1,"updateLayout")},setSidebarCollapsed:e=>{r({sidebarCollapsed:e},!1,"setSidebarCollapsed")},setFullscreenMode:e=>{r({fullscreenMode:e},!1,"setFullscreenMode")},addQuickAccessItem:e=>{const t={...e,id:`quick-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,lastAccessed:new Date,accessCount:1};r(a=>({quickAccessItems:[...a.quickAccessItems,t].slice(0,10)}),!1,"addQuickAccessItem")},removeQuickAccessItem:e=>{r(t=>({quickAccessItems:t.quickAccessItems.filter(a=>a.id!==e)}),!1,"removeQuickAccessItem")},updateQuickAccessItem:(e,t)=>{r(a=>({quickAccessItems:a.quickAccessItems.map(l=>l.id===e?{...l,...t}:l)}),!1,"updateQuickAccessItem")},incrementAccessCount:e=>{r(t=>({quickAccessItems:t.quickAccessItems.map(a=>a.reportType===e?{...a,accessCount:a.accessCount+1,lastAccessed:new Date}:a)}),!1,"incrementAccessCount")},addToFavorites:e=>{r(t=>({favoriteReports:t.favoriteReports.includes(e)?t.favoriteReports:[...t.favoriteReports,e]}),!1,"addToFavorites")},removeFromFavorites:e=>{r(t=>({favoriteReports:t.favoriteReports.filter(a=>a!==e)}),!1,"removeFromFavorites")},toggleFavorite:e=>{const t=n();t.favoriteReports.includes(e)?t.removeFromFavorites(e):t.addToFavorites(e)},addToRecentlyViewed:(e,t)=>{const a={reportType:e,timestamp:new Date,filters:t};r(l=>{const c=l.recentlyViewed.filter(y=>y.reportType!==e);return{recentlyViewed:[a,...c].slice(0,20)}},!1,"addToRecentlyViewed")},clearRecentlyViewed:()=>{r({recentlyViewed:[]},!1,"clearRecentlyViewed")},setLastRefresh:e=>{r({lastRefresh:e},!1,"setLastRefresh")},setAutoRefresh:(e,t)=>{r(a=>({autoRefreshEnabled:e,autoRefreshInterval:t||a.autoRefreshInterval}),!1,"setAutoRefresh")},setError:e=>{r({errorState:{hasError:!0,errorMessage:e.message,errorCode:e.code||null,retryCount:0}},!1,"setError")},clearError:()=>{r({errorState:{hasError:!1,errorMessage:null,errorCode:null,retryCount:0}},!1,"clearError")},incrementRetryCount:()=>{r(e=>({errorState:{...e.errorState,retryCount:e.errorState.retryCount+1}}),!1,"incrementRetryCount")},resetRetryCount:()=>{r(e=>({errorState:{...e.errorState,retryCount:0}}),!1,"resetRetryCount")},updateActivity:()=>{r({lastActivity:new Date},!1,"updateActivity")},syncWithOtherTabs:()=>{n().updateActivity()},getQuickAccessByPopularity:()=>[...n().quickAccessItems].sort((t,a)=>a.accessCount-t.accessCount),getRecentReports:(e=10)=>n().recentlyViewed.slice(0,e),isFavorite:e=>n().favoriteReports.includes(e),canRetry:()=>{const e=n();return e.errorState.hasError&&e.errorState.retryCount<3},saveStateSnapshot:()=>{const e=n(),t={searchQuery:e.searchQuery,selectedCategory:e.selectedCategory,layout:e.layout,favoriteReports:e.favoriteReports,recentlyViewed:e.recentlyViewed.slice(0,5)};localStorage.setItem("dashboard-snapshot",JSON.stringify(t))},restoreFromSnapshot:()=>{try{const e=localStorage.getItem("dashboard-snapshot");if(e){const t=JSON.parse(e);r(a=>({...a,...t,errorState:{hasError:!1,errorMessage:null,errorCode:null,retryCount:0}}),!1,"restoreFromSnapshot")}}catch(e){console.warn("Failed to restore dashboard state from snapshot:",e)}},resetToDefaults:()=>{r({searchQuery:"",selectedCategory:"all",layout:Fe,favoriteReports:[],recentlyViewed:[],errorState:{hasError:!1,errorMessage:null,errorCode:null,retryCount:0}},!1,"resetToDefaults")}}),{name:"dashboard-store",partialize:r=>({searchQuery:r.searchQuery,selectedCategory:r.selectedCategory,layout:r.layout,sidebarCollapsed:r.sidebarCollapsed,favoriteReports:r.favoriteReports,recentlyViewed:r.recentlyViewed,quickAccessItems:r.quickAccessItems,autoRefreshEnabled:r.autoRefreshEnabled,autoRefreshInterval:r.autoRefreshInterval}),storage:{getItem:r=>{try{const n=localStorage.getItem(r);return n?JSON.parse(n):null}catch(n){return console.warn(`Failed to parse stored state for ${r}:`,n),null}},setItem:(r,n)=>{try{localStorage.setItem(r,JSON.stringify(n))}catch(e){console.warn(`Failed to store state for ${r}:`,e)}},removeItem:r=>{try{localStorage.removeItem(r)}catch(n){console.warn(`Failed to remove stored state for ${r}:`,n)}}}})),{name:"DashboardStore"}));typeof window<"u"&&setInterval(()=>{x.getState().saveStateSnapshot()},3e4);if(typeof window<"u"&&"BroadcastChannel"in window){const r=new BroadcastChannel("dashboard-sync");r.addEventListener("message",n=>{if(n.data.type==="state-sync"){const e=x.getState();n.data.tabId!==e.tabId&&x.setState({favoriteReports:n.data.favoriteReports||e.favoriteReports,recentlyViewed:n.data.recentlyViewed||e.recentlyViewed})}}),x.subscribe(n=>({favoriteReports:n.favoriteReports,recentlyViewed:n.recentlyViewed,tabId:n.tabId}),(n,e)=>{(n.favoriteReports!==e.favoriteReports||n.recentlyViewed!==e.recentlyViewed)&&r.postMessage({type:"state-sync",tabId:n.tabId,favoriteReports:n.favoriteReports,recentlyViewed:n.recentlyViewed})})}var g=(r=>(r.PATIENT_OUTCOMES="patient-outcomes",r.PHARMACIST_INTERVENTIONS="pharmacist-interventions",r.THERAPY_EFFECTIVENESS="therapy-effectiveness",r.QUALITY_IMPROVEMENT="quality-improvement",r.REGULATORY_COMPLIANCE="regulatory-compliance",r.COST_EFFECTIVENESS="cost-effectiveness",r.TREND_FORECASTING="trend-forecasting",r.OPERATIONAL_EFFICIENCY="operational-efficiency",r.MEDICATION_INVENTORY="medication-inventory",r.PATIENT_DEMOGRAPHICS="patient-demographics",r.ADVERSE_EVENTS="adverse-events",r.CUSTOM_TEMPLATES="custom-templates",r))(g||{});const gt=()=>{var J,Q,q,$,G,U,W,Y,X,Z,K,ee,te,re,ae,se,oe,ne,le,ie,ce,de,pe,ue,fe,he,me,ge,xe,ye,be,ve,Ce,Re,Ee,je;const r=E(o=>o.activeReport),n=E(o=>o.setActiveReport),e=E(o=>o.addToHistory);E(o=>o.reportData),E(o=>o.loading);const t=E(o=>o.getCurrentReportData),a=E(o=>o.isCurrentReportLoading),l=x(o=>o.searchQuery),c=x(o=>o.selectedCategory),y=x(o=>o.favoriteReports),N=x(o=>o.setSearchQuery),V=x(o=>o.setSelectedCategory),H=x(o=>o.toggleFavorite),L=x(o=>o.addToRecentlyViewed),Oe=x(o=>o.recentlyViewed),v=E();x();const p=_e(),Me=Se(p.breakpoints.down("md")),Pe=Se(p.breakpoints.down("lg")),m=R.useMemo(()=>({trendingUp:s.jsx(ze,{}),localPharmacy:s.jsx(et,{}),analytics:s.jsx(Je,{}),star:s.jsx(Ae,{}),security:s.jsx(Qe,{}),attachMoney:s.jsx(tt,{}),timeline:s.jsx(qe,{}),speed:s.jsx(st,{}),inventory:s.jsx(at,{}),people:s.jsx($e,{}),warning:s.jsx(Ge,{}),build:s.jsx(rt,{})}),[]),C=R.useMemo(()=>({[g.PATIENT_OUTCOMES]:{label:"Patient Outcomes",description:"Analyze patient therapy outcomes, clinical improvements, and quality of life metrics.",icon:m.trendingUp,category:"Clinical",priority:1,tags:["outcomes","clinical","therapy"],color:p.palette.success.main},[g.PHARMACIST_INTERVENTIONS]:{label:"Pharmacist Interventions",description:"Track pharmacist interventions, acceptance rates, and clinical impact.",icon:m.localPharmacy,category:"Clinical",priority:2,tags:["interventions","pharmacist","clinical"],color:p.palette.primary.main},[g.THERAPY_EFFECTIVENESS]:{label:"Therapy Effectiveness",description:"Evaluate medication adherence, therapy completion rates, and effectiveness.",icon:m.analytics,category:"Clinical",priority:3,tags:["therapy","effectiveness","adherence"],color:p.palette.info.main},[g.QUALITY_IMPROVEMENT]:{label:"Quality Improvement",description:"Monitor quality metrics, completion times, and process improvements.",icon:m.star,category:"Quality",priority:4,tags:["quality","improvement","metrics"],color:p.palette.warning.main},[g.REGULATORY_COMPLIANCE]:{label:"Regulatory Compliance",description:"Ensure regulatory compliance with audit trails and documentation.",icon:m.security,category:"Compliance",priority:5,tags:["compliance","regulatory","audit"],color:p.palette.error.main},[g.COST_EFFECTIVENESS]:{label:"Cost Effectiveness",description:"Analyze cost savings, ROI, and financial impact of interventions.",icon:m.attachMoney,category:"Financial",priority:6,tags:["cost","financial","roi"],color:p.palette.success.dark},[g.TREND_FORECASTING]:{label:"Trend Forecasting",description:"Identify trends and generate forecasts for strategic planning.",icon:m.timeline,category:"Analytics",priority:7,tags:["trends","forecasting","analytics"],color:p.palette.secondary.main},[g.OPERATIONAL_EFFICIENCY]:{label:"Operational Efficiency",description:"Optimize workflows, resource utilization, and operational performance.",icon:m.speed,category:"Operations",priority:8,tags:["operations","efficiency","workflow"],color:p.palette.info.dark},[g.MEDICATION_INVENTORY]:{label:"Medication Inventory",description:"Manage inventory, track usage patterns, and forecast demand.",icon:m.inventory,category:"Operations",priority:9,tags:["inventory","medication","demand"],color:p.palette.primary.dark},[g.PATIENT_DEMOGRAPHICS]:{label:"Patient Demographics",description:"Understand patient populations and service utilization patterns.",icon:m.people,category:"Analytics",priority:10,tags:["demographics","patients","population"],color:p.palette.secondary.dark},[g.ADVERSE_EVENTS]:{label:"Adverse Events",description:"Monitor adverse events, safety patterns, and risk assessment.",icon:m.warning,category:"Safety",priority:11,tags:["safety","adverse","events"],color:p.palette.error.dark},[g.CUSTOM_TEMPLATES]:{label:"Custom Templates",description:"Create and manage custom report templates for specific needs.",icon:m.build,category:"Templates",priority:12,tags:["templates","custom","builder"],color:p.palette.grey[600]}}),[p,m]),B=R.useMemo(()=>["all",...Array.from(new Set(Object.values(C).map(i=>i.category))).sort()],[C]),Ne=Oe.slice(0,5),Ve=R.useCallback(o=>{console.log("ðŸŽ¯ Report clicked:",o);try{const i=o;n(i),console.log("âœ… Active report set to:",i);const f={dateRange:{startDate:new Date,endDate:new Date,preset:"30d"}};e(i,f),console.log("âœ… Added to reports history"),L(i,f),console.log("âœ… Added to dashboard recents"),console.log("ðŸŽ‰ Report activation completed successfully")}catch(i){console.error("âŒ Error handling report click:",i)}},[n,e,L]),He=R.useCallback(o=>{console.log("â­ Favorite toggle clicked:",o);try{H(o),console.log("âœ… Store favorite toggled"),console.log("ðŸŽ‰ Favorite toggle completed successfully")}catch(i){console.error("âŒ Error toggling favorite:",i)}},[H]),F=o=>y.includes(o),Le=R.useCallback(o=>{console.log("ðŸš€ Generate report clicked for:",o),v!=null&&v.setLoading&&v.setLoading(o,!0),setTimeout(()=>{var f;const i={id:`report-${o}-${Date.now()}`,type:o,title:((f=C[o])==null?void 0:f.label)||o,generatedAt:new Date,data:{summary:{totalRecords:Math.floor(Math.random()*1e3)+100,dateRange:"30 days",status:"completed"},charts:[{id:"chart-1",type:"line",title:"Trend Analysis",data:Array.from({length:30},(w,T)=>({date:new Date(Date.now()-(29-T)*24*60*60*1e3).toISOString().split("T")[0],value:Math.floor(Math.random()*100)+50}))},{id:"chart-2",type:"bar",title:"Category Breakdown",data:[{category:"Category A",value:Math.floor(Math.random()*50)+20},{category:"Category B",value:Math.floor(Math.random()*50)+20},{category:"Category C",value:Math.floor(Math.random()*50)+20},{category:"Category D",value:Math.floor(Math.random()*50)+20}]}],tables:[{id:"table-1",title:"Detailed Results",headers:["ID","Name","Value","Status","Date"],rows:Array.from({length:10},(w,T)=>[`${T+1}`,`Item ${T+1}`,`${Math.floor(Math.random()*100)}%`,Math.random()>.5?"Active":"Inactive",new Date(Date.now()-Math.random()*30*24*60*60*1e3).toLocaleDateString()])}]},metadata:{filters:{dateRange:{startDate:new Date(Date.now()-2592e6),endDate:new Date,preset:"30d"}},exportFormats:["pdf","excel","csv"],permissions:["view","export"]}};v!=null&&v.setReportData&&v.setReportData(o,i),console.log("âœ… Report generated successfully:",i)},1e3)},[C,v]),_=R.useMemo(()=>{let o=Object.entries(C);if(c!=="all"&&(o=o.filter(([,i])=>i.category===c)),l.trim()){const i=l.toLowerCase();o=o.filter(([,f])=>f.label.toLowerCase().includes(i)||f.description.toLowerCase().includes(i)||f.tags.some(w=>w.toLowerCase().includes(i)))}return o.sort(([,i],[,f])=>i.priority-f.priority)},[C,c,l]),k=R.useCallback(o=>{console.log("ðŸ” Search query changed:",o),N(o),console.log("âœ… Store search query updated")},[N]),z=R.useCallback(o=>{console.log("ðŸ“‚ Category changed:",o),V(o),console.log("âœ… Store category updated")},[V]);return s.jsxs(Ue,{maxWidth:"xl",sx:{py:3},children:[s.jsx(d,{variant:Me?"h5":"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:600},children:"Reports & Analytics"}),s.jsx(d,{variant:"body1",color:"text.secondary",sx:{mb:3,maxWidth:600},children:"Generate comprehensive reports and gain actionable insights into your pharmacy operations."}),s.jsxs(h,{container:!0,spacing:2,sx:{mb:4},children:[s.jsx(h,{item:!0,xs:6,sm:3,children:s.jsxs(b,{sx:{p:2,textAlign:"center"},children:[s.jsx(d,{variant:"h6",color:"primary.main",children:Object.keys(C).length}),s.jsx(d,{variant:"body2",color:"text.secondary",children:"Report Types"})]})}),s.jsx(h,{item:!0,xs:6,sm:3,children:s.jsxs(b,{sx:{p:2,textAlign:"center"},children:[s.jsx(d,{variant:"h6",color:"success.main",children:B.length-1}),s.jsx(d,{variant:"body2",color:"text.secondary",children:"Categories"})]})}),s.jsx(h,{item:!0,xs:6,sm:3,children:s.jsxs(b,{sx:{p:2,textAlign:"center"},children:[s.jsx(d,{variant:"h6",color:"info.main",children:Ne.length}),s.jsx(d,{variant:"body2",color:"text.secondary",children:"Recent Reports"})]})}),s.jsx(h,{item:!0,xs:6,sm:3,children:s.jsxs(b,{sx:{p:2,textAlign:"center"},children:[s.jsx(d,{variant:"h6",color:"warning.main",children:"Live"}),s.jsx(d,{variant:"body2",color:"text.secondary",children:"Real-time Data"})]})})]}),s.jsx(u,{sx:{mb:4},children:s.jsxs(h,{container:!0,spacing:2,alignItems:"center",children:[s.jsx(h,{item:!0,xs:12,md:6,children:s.jsx(We,{fullWidth:!0,placeholder:"Search reports...",value:l,onChange:o=>k(o.target.value),slotProps:{input:{startAdornment:s.jsx(we,{position:"start",children:s.jsx(Ie,{color:"action"})}),endAdornment:l&&s.jsx(we,{position:"end",children:s.jsx(De,{size:"small",onClick:()=>k(""),edge:"end",children:s.jsx(Ke,{})})})}}})}),s.jsx(h,{item:!0,xs:12,md:6,children:s.jsx(u,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:B.map(o=>s.jsx(O,{label:o==="all"?"All Categories":o,onClick:()=>z(o),color:c===o?"primary":"default",variant:c===o?"filled":"outlined",sx:{textTransform:"capitalize"}},o))})})]})}),_.length===0?s.jsxs(b,{sx:{p:4,textAlign:"center",mb:4},children:[s.jsx(Ie,{sx:{fontSize:48,color:"text.secondary",mb:2}}),s.jsx(d,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No reports found"}),s.jsx(d,{variant:"body2",color:"text.secondary",children:"Try adjusting your search terms or category filter."}),s.jsx(D,{variant:"outlined",onClick:()=>{k(""),z("all")},sx:{mt:2},children:"Clear Filters"})]}):s.jsx(h,{container:!0,spacing:3,children:_.map(([o,i])=>s.jsx(h,{item:!0,xs:12,sm:6,md:Pe?6:4,lg:4,children:s.jsx(Ye,{in:!0,timeout:300,children:s.jsxs(Xe,{sx:{height:"100%",cursor:"pointer",transition:"all 0.3s ease-in-out",border:r===o?`2px solid ${i.color}`:"1px solid transparent",backgroundColor:r===o?`${i.color}08`:"background.paper","&:hover":{transform:"translateY(-4px)",boxShadow:6}},onClick:()=>Ve(o),children:[s.jsxs(Ze,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"flex-start",mb:2},children:[s.jsx(u,{sx:{mr:2,color:i.color,fontSize:32},children:i.icon}),s.jsxs(u,{sx:{flex:1,minWidth:0},children:[s.jsx(d,{variant:"h6",component:"h3",gutterBottom:!0,children:i.label}),s.jsx(O,{label:i.category,size:"small",variant:"outlined",sx:{borderColor:i.color,color:i.color,fontSize:"0.75rem"}})]})]}),s.jsx(d,{variant:"body2",color:"text.secondary",sx:{flex:1,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",mb:2},children:i.description}),s.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:2},children:i.tags.slice(0,3).map(f=>s.jsx(O,{label:f,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20,"& .MuiChip-label":{px:1}}},f))})]}),s.jsxs(u,{sx:{p:2,pt:0,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx(D,{size:"small",sx:{color:i.color},children:"View Report"}),s.jsx(De,{size:"small",onClick:f=>{f.stopPropagation(),He(o)},sx:{color:F(o)?"warning.main":"text.secondary"},children:s.jsx(Ae,{fontSize:"small",sx:{fill:F(o)?"currentColor":"none",stroke:"currentColor",strokeWidth:F(o)?0:1}})})]})]})})},o))}),r&&s.jsxs(b,{sx:{p:3,mt:4},children:[s.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3},children:[s.jsxs(u,{children:[s.jsx(d,{variant:"h5",gutterBottom:!0,children:((J=C[r])==null?void 0:J.label)||r}),s.jsx(d,{variant:"body1",color:"text.secondary",sx:{mb:2},children:(Q=C[r])==null?void 0:Q.description})]}),s.jsxs(u,{sx:{display:"flex",gap:2,alignItems:"center"},children:[s.jsx(D,{variant:"contained",onClick:()=>Le(r),disabled:a(),sx:{minWidth:140},children:a()?"Generating...":"Generate Report"}),s.jsx(D,{variant:"outlined",onClick:()=>n(null),children:"Back to Dashboard"})]})]}),a()&&s.jsxs(u,{sx:{textAlign:"center",py:4},children:[s.jsx(d,{variant:"h6",color:"primary",gutterBottom:!0,children:"Generating Report..."}),s.jsx(d,{variant:"body2",color:"text.secondary",children:"Please wait while we compile your data"})]}),t()&&!a()&&s.jsxs(u,{children:[s.jsx(d,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Report Summary"}),s.jsxs(h,{container:!0,spacing:2,sx:{mb:3},children:[s.jsx(h,{item:!0,xs:12,sm:4,children:s.jsxs(b,{sx:{p:2,textAlign:"center",bgcolor:"primary.light",color:"primary.contrastText"},children:[s.jsx(d,{variant:"h4",children:((G=($=(q=t())==null?void 0:q.data)==null?void 0:$.summary)==null?void 0:G.totalRecords)||0}),s.jsx(d,{variant:"body2",children:"Total Records"})]})}),s.jsx(h,{item:!0,xs:12,sm:4,children:s.jsxs(b,{sx:{p:2,textAlign:"center",bgcolor:"success.light",color:"success.contrastText"},children:[s.jsx(d,{variant:"h4",children:((Y=(W=(U=t())==null?void 0:U.data)==null?void 0:W.summary)==null?void 0:Y.dateRange)||"N/A"}),s.jsx(d,{variant:"body2",children:"Date Range"})]})}),s.jsx(h,{item:!0,xs:12,sm:4,children:s.jsxs(b,{sx:{p:2,textAlign:"center",bgcolor:"info.light",color:"info.contrastText"},children:[s.jsx(d,{variant:"h4",children:((K=(Z=(X=t())==null?void 0:X.data)==null?void 0:Z.summary)==null?void 0:K.status)||"N/A"}),s.jsx(d,{variant:"body2",children:"Status"})]})})]}),((te=(ee=t())==null?void 0:ee.data)==null?void 0:te.charts)&&s.jsxs(u,{sx:{mb:3},children:[s.jsx(d,{variant:"h6",gutterBottom:!0,children:"Data Visualization"}),s.jsx(h,{container:!0,spacing:2,children:(se=(ae=(re=t())==null?void 0:re.data)==null?void 0:ae.charts)==null?void 0:se.map(o=>{var i;return s.jsx(h,{item:!0,xs:12,md:6,children:s.jsxs(b,{sx:{p:2},children:[s.jsx(d,{variant:"subtitle1",gutterBottom:!0,children:o.title}),s.jsx(u,{sx:{height:200,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"grey.50"},children:s.jsxs(d,{variant:"body2",color:"text.secondary",children:[o.type==="line"?"ðŸ“ˆ":"ðŸ“Š"," ",o.title," Chart",s.jsx("br",{}),"(",((i=o.data)==null?void 0:i.length)||0," data points)"]})})]})},o.id)})})]}),((le=(ne=(oe=t())==null?void 0:oe.data)==null?void 0:ne.tables)==null?void 0:le[0])&&s.jsxs(u,{children:[s.jsx(d,{variant:"h6",gutterBottom:!0,children:((pe=(de=(ce=(ie=t())==null?void 0:ie.data)==null?void 0:ce.tables)==null?void 0:de[0])==null?void 0:pe.title)||"Data Table"}),s.jsx(b,{sx:{overflow:"hidden"},children:s.jsx(u,{sx:{overflowX:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsx("tr",{style:{backgroundColor:p.palette.grey[100]},children:(ge=(me=(he=(fe=(ue=t())==null?void 0:ue.data)==null?void 0:fe.tables)==null?void 0:he[0])==null?void 0:me.headers)==null?void 0:ge.map((o,i)=>s.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:`1px solid ${p.palette.divider}`},children:o},i))})}),s.jsx("tbody",{children:(Ce=(ve=(be=(ye=(xe=t())==null?void 0:xe.data)==null?void 0:ye.tables)==null?void 0:be[0])==null?void 0:ve.rows)==null?void 0:Ce.map((o,i)=>s.jsx("tr",{style:{borderBottom:`1px solid ${p.palette.divider}`},children:o.map((f,w)=>s.jsx("td",{style:{padding:"12px"},children:f},w))},i))})]})})})]}),s.jsxs(u,{sx:{mt:3,pt:2,borderTop:`1px solid ${p.palette.divider}`},children:[s.jsx(d,{variant:"subtitle1",gutterBottom:!0,children:"Export Options"}),s.jsx(u,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:(je=(Ee=(Re=t())==null?void 0:Re.metadata)==null?void 0:Ee.exportFormats)==null?void 0:je.map(o=>s.jsxs(D,{variant:"outlined",size:"small",onClick:()=>{console.log(`Exporting report as ${o}`)},children:["Export as ",o.toUpperCase()]},o))})]})]}),!t()&&!a()&&s.jsxs(u,{sx:{textAlign:"center",py:4},children:[s.jsx(d,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Report Data Available"}),s.jsx(d,{variant:"body2",color:"text.secondary",sx:{mb:2},children:'Click "Generate Report" to create a new report with current data'})]})]})]})};export{gt as default};
