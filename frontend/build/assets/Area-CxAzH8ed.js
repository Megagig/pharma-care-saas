import{cG as fe,r as i,ap as q}from"./index-B_pWc9hu.js";import{b as he}from"./addMonths-BkvcT9-f.js";import{s as ve}from"./subDays-GbJIKp5j.js";import{s as z,i as J,g as V,e as me,f as ye,h as U,j as Q,k as G,l as xe,r as Z,u as ee,m as ge,S as be,n as Ae,o as Pe,p as Ie,q as ae,t as Ee,v as ke,w as De,x as Ce,y as Se,z as te,A as re,B as j,G as Oe,D as F,E as we,F as X,H as Y,I as L,J as Ne,K as Le,M as N,N as Me,O as je,P as Re,Q as We,U as ne,V as B,W as _,Z as _e}from"./LineChart-DOW8HQwa.js";import{a as T}from"./reselect-CMjPfUWD.js";function W(a,e,t){return he(a,-e,t)}const va=a=>{const e=fe(),[t,r]=i.useState(!1),l=i.useRef(""),n=i.useRef(!0),c=i.useCallback(s=>{const u=new Date;let d;switch(s){case"week":d=ve(u,7);break;case"month":d=W(u,1);break;case"quarter":d=W(u,3);break;case"year":d=W(u,12);break;default:d=W(u,1)}return{from:d,to:u}},[]);i.useEffect(()=>{if(!n.current)return;const{from:s,to:u}=c(a),d=`${a}-${s.getTime()}-${u.getTime()}`;d!==l.current&&(l.current=d,e.fetchDashboardMetrics({from:s,to:u}))},[a,c,e]),i.useEffect(()=>()=>{n.current=!1},[]);const o=i.useCallback(async()=>{if(n.current){r(!0),l.current="";try{const{from:s,to:u}=c(a);await e.fetchDashboardMetrics({from:s,to:u})}catch(s){console.error("Failed to refresh dashboard:",s)}finally{n.current&&r(!1)}}},[c,a,e]);return{dashboardMetrics:e.dashboardMetrics,loading:e.loading.fetchDashboardMetrics||!1,error:e.errors.fetchDashboardMetrics||null,refreshing:t,refresh:o,isAuthenticated:!0}};var ie=(a,e,t,r)=>U(a,"xAxis",e,r),le=(a,e,t,r)=>Q(a,"xAxis",e,r),se=(a,e,t,r)=>U(a,"yAxis",t,r),oe=(a,e,t,r)=>Q(a,"yAxis",t,r),Ke=T([z,ie,se,le,oe],(a,e,t,r,l)=>J(a,"xAxis")?V(e,r,!1):V(t,l,!1)),Be=(a,e,t,r,l)=>l,ce=T([me,Be],(a,e)=>a.filter(t=>t.type==="area").find(t=>t.id===e)),ze=(a,e,t,r,l)=>{var n,c=ce(a,e,t,r,l);if(c!=null){var o=z(a),s=J(o,"xAxis"),u;if(s?u=G(a,"yAxis",t,r):u=G(a,"xAxis",e,r),u!=null){var{stackId:d}=c,m=xe(c);if(!(d==null||m==null)){var f=(n=u[d])===null||n===void 0?void 0:n.stackedData;return f==null?void 0:f.find(v=>v.key===m)}}}},Te=T([z,ie,se,le,oe,ze,ye,Ke,ce],(a,e,t,r,l,n,c,o,s)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:m}=c;if(!(s==null||a!=="horizontal"&&a!=="vertical"||e==null||t==null||r==null||l==null||r.length===0||l.length===0||o==null)){var{data:f}=s,v;if(f&&f.length>0?v=f:v=u==null?void 0:u.slice(d,m+1),v!=null){var x=void 0;return oa({layout:a,xAxis:e,yAxis:t,xAxisTicks:r,yAxisTicks:l,dataStartIndex:d,areaSettings:s,stackedData:n,displayedData:v,chartBaseValue:x,bandSize:o})}}}),Ve=["id"],Ge=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function ue(a,e){if(a==null)return{};var t,r,l=Fe(a,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);for(r=0;r<n.length;r++)t=n[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(a,t)&&(l[t]=a[t])}return l}function Fe(a,e){if(a==null)return{};var t={};for(var r in a)if({}.hasOwnProperty.call(a,r)){if(e.indexOf(r)!==-1)continue;t[r]=a[r]}return t}function $(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),t.push.apply(t,r)}return t}function k(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$(Object(t),!0).forEach(function(r){Xe(a,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):$(Object(t)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(t,r))})}return a}function Xe(a,e,t){return(e=Ye(e))in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function Ye(a){var e=$e(a,"string");return typeof e=="symbol"?e:e+""}function $e(a,e){if(typeof a!="object"||!a)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var r=t.call(a,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function D(){return D=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(a[r]=t[r])}return a},D.apply(null,arguments)}function K(a,e){return a&&a!=="none"?a:e}var He=a=>{var{dataKey:e,name:t,stroke:r,fill:l,legendType:n,hide:c}=a;return[{inactive:c,dataKey:e,type:n,color:K(r,l),value:ae(t,e),payload:a}]};function qe(a){var{dataKey:e,data:t,stroke:r,strokeWidth:l,fill:n,name:c,hide:o,unit:s}=a;return{dataDefinedOnItem:t,positions:void 0,settings:{stroke:r,strokeWidth:l,fill:n,dataKey:e,nameKey:void 0,name:ae(c,e),hide:o,type:a.tooltipType,color:K(r,n),unit:s}}}var Je=(a,e)=>{var t;if(i.isValidElement(a))t=i.cloneElement(a,e);else if(typeof a=="function")t=a(e);else{var r=q("recharts-area-dot",typeof a!="boolean"?a.className:"");t=i.createElement(_e,D({},e,{className:r}))}return t};function Ue(a,e){return a==null?!1:e?!0:a.length===1}function Qe(a){var{clipPathId:e,points:t,props:r}=a,{needClip:l,dot:n,dataKey:c}=r;if(!Ue(t,n))return null;var o=re(n),s=ne(r),u=te(n,!0),d=t.map((f,v)=>{var x=k(k(k({key:"dot-".concat(v),r:3},s),u),{},{index:v,cx:f.x,cy:f.y,dataKey:c,value:f.value,payload:f.payload,points:t});return Je(n,x)}),m={clipPath:l?"url(#clipPath-".concat(o?"":"dots-").concat(e,")"):void 0};return i.createElement(j,D({className:"recharts-area-dots"},m),d)}function Ze(a){var{showLabels:e,children:t,points:r}=a,l=r.map(n=>{var c={x:n.x,y:n.y,width:0,height:0};return k(k({},c),{},{value:n.value,payload:n.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return i.createElement(We,{value:e?l:null},t)}function H(a){var{points:e,baseLine:t,needClip:r,clipPathId:l,props:n}=a,{layout:c,type:o,stroke:s,connectNulls:u,isRange:d}=n,{id:m}=n,f=ue(n,Ve),v=ne(f);return i.createElement(i.Fragment,null,(e==null?void 0:e.length)>1&&i.createElement(j,{clipPath:r?"url(#clipPath-".concat(l,")"):void 0},i.createElement(B,D({},v,{id:m,points:e,connectNulls:u,type:o,baseLine:t,layout:c,stroke:"none",className:"recharts-area-area"})),s!=="none"&&i.createElement(B,D({},v,{className:"recharts-area-curve",layout:c,type:o,connectNulls:u,fill:"none",points:e})),s!=="none"&&d&&i.createElement(B,D({},v,{className:"recharts-area-curve",layout:c,type:o,connectNulls:u,fill:"none",points:t}))),i.createElement(Qe,{points:e,props:f,clipPathId:l}))}function ea(a){var{alpha:e,baseLine:t,points:r,strokeWidth:l}=a,n=r[0].y,c=r[r.length-1].y;if(!_(n)||!_(c))return null;var o=e*Math.abs(n-c),s=Math.max(...r.map(u=>u.x||0));return L(t)?s=Math.max(t,s):t&&Array.isArray(t)&&t.length&&(s=Math.max(...t.map(u=>u.x||0),s)),L(s)?i.createElement("rect",{x:0,y:n<c?n:n-o,width:s+(l?parseInt("".concat(l),10):1),height:Math.floor(o)}):null}function aa(a){var{alpha:e,baseLine:t,points:r,strokeWidth:l}=a,n=r[0].x,c=r[r.length-1].x;if(!_(n)||!_(c))return null;var o=e*Math.abs(n-c),s=Math.max(...r.map(u=>u.y||0));return L(t)?s=Math.max(t,s):t&&Array.isArray(t)&&t.length&&(s=Math.max(...t.map(u=>u.y||0),s)),L(s)?i.createElement("rect",{x:n<c?n:n-o,y:0,width:o,height:Math.floor(s+(l?parseInt("".concat(l),10):1))}):null}function ta(a){var{alpha:e,layout:t,points:r,baseLine:l,strokeWidth:n}=a;return t==="vertical"?i.createElement(ea,{alpha:e,points:r,baseLine:l,strokeWidth:n}):i.createElement(aa,{alpha:e,points:r,baseLine:l,strokeWidth:n})}function ra(a){var{needClip:e,clipPathId:t,props:r,previousPointsRef:l,previousBaselineRef:n}=a,{points:c,baseLine:o,isAnimationActive:s,animationBegin:u,animationDuration:d,animationEasing:m,onAnimationStart:f,onAnimationEnd:v}=r,x=Ne(r,"recharts-area-"),[b,g]=i.useState(!1),E=!b,P=i.useCallback(()=>{typeof v=="function"&&v(),g(!1)},[v]),I=i.useCallback(()=>{typeof f=="function"&&f(),g(!0)},[f]),p=l.current,y=n.current;return i.createElement(Ze,{showLabels:E,points:c},r.children,i.createElement(Le,{animationId:x,begin:u,duration:d,isActive:s,easing:m,onAnimationEnd:P,onAnimationStart:I,key:x},h=>{if(p){var S=p.length/c.length,R=h===1?c:c.map((A,M)=>{var O=Math.floor(M*S);if(p[O]){var w=p[O];return k(k({},A),{},{x:N(w.x,A.x,h),y:N(w.y,A.y,h)})}return A}),C;return L(o)?C=N(y,o,h):Me(o)||je(o)?C=N(y,0,h):C=o.map((A,M)=>{var O=Math.floor(M*S);if(Array.isArray(y)&&y[O]){var w=y[O];return k(k({},A),{},{x:N(w.x,A.x,h),y:N(w.y,A.y,h)})}return A}),h>0&&(l.current=R,n.current=C),i.createElement(H,{points:R,baseLine:C,needClip:e,clipPathId:t,props:r})}return h>0&&(l.current=c,n.current=o),i.createElement(j,null,s&&i.createElement("defs",null,i.createElement("clipPath",{id:"animationClipPath-".concat(t)},i.createElement(ta,{alpha:h,points:c,baseLine:o,layout:r.layout,strokeWidth:r.strokeWidth}))),i.createElement(j,{clipPath:"url(#animationClipPath-".concat(t,")")},i.createElement(H,{points:c,baseLine:o,needClip:e,clipPathId:t,props:r})))}),i.createElement(Re,{label:r.label}))}function na(a){var{needClip:e,clipPathId:t,props:r}=a,l=i.useRef(null),n=i.useRef();return i.createElement(ra,{needClip:e,clipPathId:t,props:r,previousPointsRef:l,previousBaselineRef:n})}class ia extends i.PureComponent{render(){var e,{hide:t,dot:r,points:l,className:n,top:c,left:o,needClip:s,xAxisId:u,yAxisId:d,width:m,height:f,id:v,baseLine:x}=this.props;if(t)return null;var b=q("recharts-area",n),g=v,{r:E=3,strokeWidth:P=2}=(e=te(r,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},I=re(r),p=E*2+P;return i.createElement(i.Fragment,null,i.createElement(j,{className:b},s&&i.createElement("defs",null,i.createElement(Oe,{clipPathId:g,xAxisId:u,yAxisId:d}),!I&&i.createElement("clipPath",{id:"clipPath-dots-".concat(g)},i.createElement("rect",{x:o-p/2,y:c-p/2,width:m+p,height:f+p}))),i.createElement(na,{needClip:s,clipPathId:g,props:this.props})),i.createElement(F,{points:l,mainColor:K(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(x)&&i.createElement(F,{points:x,mainColor:K(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var de={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!we.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function la(a){var e,t=Z(a,de),{activeDot:r,animationBegin:l,animationDuration:n,animationEasing:c,connectNulls:o,dot:s,fill:u,fillOpacity:d,hide:m,isAnimationActive:f,legendType:v,stroke:x,xAxisId:b,yAxisId:g}=t,E=ue(t,Ge),P=Ee(),I=ke(),{needClip:p}=De(b,g),y=ee(),{points:h,isRange:S,baseLine:R}=(e=Ce(pe=>Te(pe,b,g,y,a.id)))!==null&&e!==void 0?e:{},C=Se();if(P!=="horizontal"&&P!=="vertical"||C==null||I!=="AreaChart"&&I!=="ComposedChart")return null;var{height:A,width:M,x:O,y:w}=C;return!h||!h.length?null:i.createElement(ia,D({},E,{activeDot:r,animationBegin:l,animationDuration:n,animationEasing:c,baseLine:R,connectNulls:o,dot:s,fill:u,fillOpacity:d,height:A,hide:m,layout:P,isAnimationActive:f,isRange:S,legendType:v,needClip:p,points:h,stroke:x,width:M,left:O,top:w,xAxisId:b,yAxisId:g}))}var sa=(a,e,t,r,l)=>{var n=t??e;if(L(n))return n;var c=a==="horizontal"?l:r,o=c.scale.domain();if(c.type==="number"){var s=Math.max(o[0],o[1]),u=Math.min(o[0],o[1]);return n==="dataMin"?u:n==="dataMax"||s<0?s:Math.max(Math.min(o[0],o[1]),0)}return n==="dataMin"?o[0]:n==="dataMax"?o[1]:o[0]};function oa(a){var{areaSettings:{connectNulls:e,baseValue:t,dataKey:r},stackedData:l,layout:n,chartBaseValue:c,xAxis:o,yAxis:s,displayedData:u,dataStartIndex:d,xAxisTicks:m,yAxisTicks:f,bandSize:v}=a,x=l&&l.length,b=sa(n,c,t,o,s),g=n==="horizontal",E=!1,P=u.map((p,y)=>{var h;x?h=l[d+y]:(h=X(p,r),Array.isArray(h)?E=!0:h=[b,h]);var S=h[1]==null||x&&!e&&X(p,r)==null;return g?{x:Y({axis:o,ticks:m,bandSize:v,entry:p,index:y}),y:S?null:s.scale(h[1]),value:h,payload:p}:{x:S?null:o.scale(h[1]),y:Y({axis:s,ticks:f,bandSize:v,entry:p,index:y}),value:h,payload:p}}),I;return x||E?I=P.map(p=>{var y=Array.isArray(p.value)?p.value[0]:null;return g?{x:p.x,y:y!=null&&p.y!=null?s.scale(y):null,payload:p.payload}:{x:y!=null?o.scale(y):null,y:p.y,payload:p.payload}}):I=g?s.scale(b):o.scale(b),{points:P,baseLine:I,isRange:E}}function ca(a){var e=Z(a,de),t=ee();return i.createElement(ge,{id:e.id,type:"area"},r=>i.createElement(i.Fragment,null,i.createElement(be,{legendPayload:He(e)}),i.createElement(Ae,{fn:qe,args:e}),i.createElement(Pe,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:Ie(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:t,connectNulls:e.connectNulls}),i.createElement(la,D({},e,{id:r}))))}ca.displayName="Area";export{ca as A,W as s,va as u};
