import{ax as Cs,ay as ws,ae as Ts,T as o,bZ as Is,r as g,b8 as As,j as e,ao as _s,aA as Es,c as Os,u as xr,B as d,aa as Ie,D as de,h as B,cx as mi,aT as ft,a6 as se,a7 as ae,a8 as le,f as w,d as Pe,I as ge,Z as me,aU as Dt,q as ve,w as Te,y as ee,W as Ue,C as k,b as R,V as nr,l as Z,s as yn,L as ir,aO as pt,n as sr,p as ar,bw as Rr,$ as gi,O as Hr,e as $s,bi as pr,cr as ne,c6 as Kr,bE as Gr,c7 as Zr,g as mr,G as z,a4 as oe,Q as Bt,aP as Qr,aQ as Yr,aR as Xr,aS as Jr,cC as yi,b0 as gr,bo as Fs,bp as ks,bq as Ds,bs as Rs,bt as Ps,bj as en,bk as we,R as Ms,cD as Ns,cE as Ls,bU as zs,bD as Bs,b5 as Jt,x as Us,a1 as ji,aq as Vs,aV as Ws,aX as qs,aZ as Hs,a_ as jn,a$ as _r,cF as Ks,cG as ce,cH as vn}from"./index-louytu0d.js";import{P as Je}from"./Person-BO7Sszq-.js";import{H as Gs}from"./History-DjgRWctw.js";import{R as lr}from"./Refresh-BWfz7OQR.js";import{G as or}from"./GetApp-Mhr9yMg-.js";import{F as tn}from"./FilterList-BXxQXbYc.js";import{E as er}from"./ExpandLess-BOUZH1RV.js";import{u as Zs}from"./useResponsive-Bux_zWod.js";import{u as Qs,s as Ys,A as Xs}from"./Area-DcDJzgON.js";import{C as Js,a as ea,R as Fe,c as bn,b as Ye,X as Xe,Y as ze,T as ke,d as Ft,L as vi}from"./LineChart-C8w0z8yz.js";import{P as Sn,a as Cn}from"./PieChart-DNgwFFqr.js";import{C as wn,B as cr,a as Rt}from"./BarChart-B-w3J0QG.js";import{F as ta}from"./Fab-Td7g1Onu.js";import{A as Ve}from"./Add-DinP5QbX.js";import{clinicalInterventionService as he}from"./clinicalInterventionService-BhSPzGvJ.js";import{S as bi}from"./Search-BDaMMIPP.js";import{T as mt,a as gt,b as yt,c as ie,d as jt}from"./TableRow-D2snGkma.js";import{T as C}from"./TableCell-ZA4nZKqC.js";import{E as ur}from"./Edit-B2er_J4R.js";import{D as Si}from"./Delete-CTgRaLP1.js";import{T as Ci}from"./TablePagination-F3GtdUGZ.js";import{f as G}from"./format-CuO4PcXN.js";import{p as ye}from"./parseISO-DJ7zThPR.js";import{S as ra}from"./Save-D3qEpRI-.js";import{C as na}from"./Cancel-ngHfCh8l.js";import{b as wi}from"./usePatients--qdYAPd6.js";import{A as Ti}from"./Autocomplete-DW-SeE61.js";import{T as ia,a as Tn,b as In,c as An,d as _n,e as sa,f as En}from"./TimelineSeparator-Buv7JOST.js";import{s as aa,A as la}from"./AdapterDateFns-BacIp4vz.js";import{L as oa}from"./LocalizationProvider-Dw4E6yUa.js";import{P as ca}from"./Print-DJVTjYC_.js";import{D as On}from"./DatePicker-BPHQbsZD.js";import{M as ua}from"./AttachMoney-oXtLzlsM.js";import{D as Ii}from"./Download-vzkMIyVG.js";import{P as da}from"./Pagination-D8bBW3PB.js";import{L as $n}from"./Lightbulb-DrSDrr8k.js";import{s as ha}from"./subDays-Ca166ufm.js";import"./addMonths-BF41cc2b.js";import"./reselect-BYKfjCpY.js";import"./LastPage-fqBHFQFA.js";import"./useMobilePicker-GDqmrovO.js";import"./index-DgEE6Mbq.js";function fa(t){return ws("MuiDialogContentText",t)}Cs("MuiDialogContentText",["root"]);const xa=t=>{const{classes:r}=t,i=Es({root:["root"]},fa,r);return{...r,...i}},pa=Ts(o,{shouldForwardProp:t=>Is(t)||t==="classes",name:"MuiDialogContentText",slot:"Root"})({}),ma=g.forwardRef(function(r,n){const i=As({props:r,name:"MuiDialogContentText"}),{children:s,className:a,...l}=i,c=xa(l);return e.jsx(pa,{component:"p",variant:"body1",color:"textSecondary",ref:n,ownerState:l,className:_s(c.root,a),...i,classes:c})}),ga=Os(e.jsx("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"}));var ya=["axis"],ja=g.forwardRef((t,r)=>g.createElement(Js,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:ya,tooltipPayloadSearcher:ea,categoricalChartProps:t,ref:r}));const va=()=>{const t=xr(),{isMobile:r,getColumns:n}=Zs(),[i,s]=g.useState("month"),{dashboardMetrics:a,loading:l,error:c,refreshing:f,refresh:h,isAuthenticated:T}=Qs(i),[v,j]=g.useState({kpis:!0,charts:!1,recent:!1}),[I,N]=g.useState(!1),$=x=>{j(L=>({...L,[x]:!L[x]}))},_=()=>n(1,2,3,3,4),m=({title:x,value:L,subtitle:U,icon:K,color:P,trend:b})=>e.jsx(k,{sx:{height:"100%",position:"relative",overflow:"visible",borderRadius:r?2:void 0},children:e.jsxs(R,{sx:{p:r?2:3},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",mb:r?1:2,flexDirection:r?"column":"row",textAlign:r?"center":"left"},children:[e.jsx(d,{sx:{p:r?.75:1,borderRadius:2,backgroundColor:$s(P,.1),color:P,mr:r?0:2,mb:r?1:0},children:pt.cloneElement(K,{sx:{fontSize:r?20:24}})}),e.jsx(o,{variant:r?"subtitle2":"h6",component:"div",sx:{flexGrow:1,fontSize:r?"0.875rem":void 0},children:x})]}),e.jsx(o,{variant:r?"h5":"h3",component:"div",sx:{mb:1,fontWeight:"bold",textAlign:r?"center":"left"},children:L}),U&&e.jsx(o,{variant:r?"caption":"body2",color:"text.secondary",sx:{textAlign:r?"center":"left"},children:U}),b&&e.jsxs(d,{sx:{display:"flex",alignItems:"center",mt:1,justifyContent:r?"center":"flex-start"},children:[e.jsx(ee,{sx:{fontSize:r?14:16,color:b.isPositive?"success.main":"error.main",transform:b.isPositive?"none":"rotate(180deg)",mr:.5}}),e.jsxs(o,{variant:"caption",sx:{color:b.isPositive?"success.main":"error.main",fontWeight:"medium",fontSize:r?"0.7rem":void 0},children:[Math.abs(b.value),"% vs last period"]})]})]})});if(l&&!a)return e.jsx(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:400},children:e.jsx(Ie,{})});if(!T)return e.jsx(de,{severity:"warning",sx:{m:2},action:e.jsx(B,{color:"inherit",size:"small",onClick:()=>window.location.href="/login",children:"Login"}),children:"Please log in to access clinical interventions data."});if(c){const x=c.includes("Invalid token")||c.includes("Unauthorized")||c.includes("401");return e.jsx(de,{severity:x?"warning":"error",sx:{m:2},action:x?e.jsx(B,{color:"inherit",size:"small",onClick:()=>window.location.href="/login",children:"Login"}):e.jsx(B,{color:"inherit",size:"small",onClick:h,children:"Retry"}),children:x?"Please log in to access clinical interventions data.":`Error loading dashboard: ${c}`})}return a?e.jsxs(d,{sx:{p:r?1:3},children:[e.jsxs(d,{sx:{display:"flex",flexDirection:r?"column":"row",justifyContent:"space-between",alignItems:r?"stretch":"center",mb:r?2:3,gap:r?2:0},children:[e.jsxs(o,{variant:r?"h5":"h4",component:"h1",sx:{display:"flex",alignItems:"center",gap:1,textAlign:r?"center":"left"},children:[e.jsx(mi,{sx:{fontSize:r?24:32}}),r?"Interventions":"Clinical Interventions Dashboard"]}),r?e.jsxs(d,{children:[e.jsx(B,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(tn,{}),onClick:()=>N(!I),sx:{mb:1},children:"Filters & Actions"}),e.jsx(ft,{in:I,children:e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(se,{size:"small",fullWidth:!0,children:[e.jsx(ae,{children:"Time Period"}),e.jsxs(le,{value:i,label:"Time Period",onChange:x=>s(x.target.value),children:[e.jsx(w,{value:"week",children:"Last Week"}),e.jsx(w,{value:"month",children:"Last Month"}),e.jsx(w,{value:"quarter",children:"Last Quarter"}),e.jsx(w,{value:"year",children:"Last Year"})]})]}),e.jsxs(d,{sx:{display:"flex",gap:1},children:[e.jsx(B,{variant:"outlined",startIcon:e.jsx(lr,{}),onClick:h,disabled:f,size:"small",sx:{flex:1},children:"Refresh"}),e.jsx(B,{variant:"outlined",startIcon:e.jsx(or,{}),onClick:()=>{console.log("Export dashboard data")},size:"small",sx:{flex:1},children:"Export"})]})]})})]}):e.jsxs(d,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e.jsxs(se,{size:"small",sx:{minWidth:120},children:[e.jsx(ae,{children:"Time Period"}),e.jsxs(le,{value:i,label:"Time Period",onChange:x=>s(x.target.value),children:[e.jsx(w,{value:"week",children:"Last Week"}),e.jsx(w,{value:"month",children:"Last Month"}),e.jsx(w,{value:"quarter",children:"Last Quarter"}),e.jsx(w,{value:"year",children:"Last Year"})]})]}),e.jsx(Pe,{title:"Refresh Dashboard",children:e.jsx(ge,{onClick:h,disabled:f,children:e.jsx(lr,{})})}),e.jsx(B,{variant:"outlined",startIcon:e.jsx(or,{}),onClick:()=>{console.log("Export dashboard data")},children:"Export"})]})]}),r?e.jsxs(d,{sx:{mb:3},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",p:1,borderRadius:1,bgcolor:"grey.50",mb:1},onClick:()=>$("kpis"),children:[e.jsxs(o,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(me,{color:"primary"}),"Key Metrics"]}),v.kpis?e.jsx(er,{}):e.jsx(Dt,{})]}),e.jsx(ft,{in:v.kpis,children:e.jsxs(d,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:2},children:[e.jsx(m,{title:"Total",value:a.totalInterventions,subtitle:"All interventions",icon:e.jsx(me,{}),color:t.palette.primary.main}),e.jsx(m,{title:"Active",value:a.activeInterventions,subtitle:"In progress",icon:e.jsx(ve,{}),color:t.palette.info.main}),e.jsx(m,{title:"Success Rate",value:`${Math.round(a.successRate||0)}%`,subtitle:"Completed successfully",icon:e.jsx(Te,{}),color:t.palette.success.main}),e.jsx(m,{title:"Avg Time",value:`${Math.round(a.averageResolutionTime||0)}d`,subtitle:"Resolution time",icon:e.jsx(ee,{}),color:t.palette.warning.main}),e.jsx(m,{title:"Savings",value:`${((a.totalCostSavings||0)/1e3).toFixed(0)}K`,subtitle:"Cost savings",icon:e.jsx(ee,{}),color:t.palette.success.main}),e.jsx(m,{title:"Overdue",value:a.overdueInterventions,subtitle:"Need attention",icon:e.jsx(Ue,{}),color:t.palette.error.main})]})})]}):e.jsxs(d,{sx:{display:"grid",gridTemplateColumns:`repeat(${_()}, 1fr)`,gap:3,mb:4},children:[e.jsx(m,{title:"Total Interventions",value:a.totalInterventions,subtitle:"All time interventions",icon:e.jsx(me,{}),color:t.palette.primary.main}),e.jsx(m,{title:"Active Interventions",value:a.activeInterventions,subtitle:"Currently in progress",icon:e.jsx(ve,{}),color:t.palette.info.main}),e.jsx(m,{title:"Success Rate",value:`${Math.round(a.successRate||0)}%`,subtitle:"Completed successfully",icon:e.jsx(Te,{}),color:t.palette.success.main}),e.jsx(m,{title:"Avg Resolution Time",value:`${Math.round(a.averageResolutionTime||0)} days`,subtitle:"Time to completion",icon:e.jsx(ee,{}),color:t.palette.warning.main}),e.jsx(m,{title:"Cost Savings",value:`â‚¦${(a.totalCostSavings||0).toLocaleString()}`,subtitle:"Estimated savings",icon:e.jsx(ee,{}),color:t.palette.success.main}),e.jsx(m,{title:"Overdue Items",value:a.overdueInterventions,subtitle:"Require attention",icon:e.jsx(Ue,{}),color:t.palette.error.main})]}),r?e.jsxs(d,{sx:{mb:3},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",p:1,borderRadius:1,bgcolor:"grey.50",mb:1},onClick:()=>$("charts"),children:[e.jsxs(o,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ee,{color:"primary"}),"Charts & Analytics"]}),v.charts?e.jsx(er,{}):e.jsx(Dt,{})]}),e.jsx(ft,{in:v.charts,children:e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(k,{children:e.jsxs(R,{sx:{p:2},children:[e.jsxs(o,{variant:"subtitle1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ee,{}),"Volume Trends"]}),e.jsx(Fe,{width:"100%",height:200,children:e.jsxs(bn,{data:a.monthlyTrends||[],children:[e.jsx(Ye,{strokeDasharray:"3 3"}),e.jsx(Xe,{dataKey:"month",tick:{fontSize:12},angle:-45,textAnchor:"end",height:60}),e.jsx(ze,{tick:{fontSize:12}}),e.jsx(ke,{}),e.jsx(Ft,{type:"monotone",dataKey:"total",stroke:t.palette.primary.main,strokeWidth:2,name:"Total"}),e.jsx(Ft,{type:"monotone",dataKey:"completed",stroke:t.palette.success.main,strokeWidth:2,name:"Completed"})]})})]})}),e.jsx(k,{children:e.jsxs(R,{sx:{p:2},children:[e.jsxs(o,{variant:"subtitle1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(me,{}),"Priority Distribution"]}),e.jsx(Fe,{width:"100%",height:200,children:e.jsxs(Sn,{children:[e.jsx(Cn,{data:a.priorityDistribution||[],cx:"50%",cy:"50%",labelLine:!1,label:({name:x,percent:L})=>`${x} ${((L||0)*100).toFixed(0)}%`,outerRadius:60,fill:"#8884d8",dataKey:"value",children:(a.priorityDistribution||[]).map((x,L)=>e.jsx(wn,{fill:x.color},`cell-${L}`))}),e.jsx(ke,{})]})})]})})]})})]}):e.jsxs(d,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",lg:"2fr 1fr"},gap:3,mb:4},children:[e.jsx(k,{children:e.jsxs(R,{children:[e.jsxs(o,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ee,{}),"Intervention Volume Trends"]}),e.jsx(Fe,{width:"100%",height:300,children:e.jsxs(bn,{data:a.monthlyTrends||[],children:[e.jsx(Ye,{strokeDasharray:"3 3"}),e.jsx(Xe,{dataKey:"month"}),e.jsx(ze,{}),e.jsx(ke,{}),e.jsx(vi,{}),e.jsx(Ft,{type:"monotone",dataKey:"total",stroke:t.palette.primary.main,strokeWidth:2,name:"Total Interventions"}),e.jsx(Ft,{type:"monotone",dataKey:"completed",stroke:t.palette.success.main,strokeWidth:2,name:"Completed"})]})})]})}),e.jsx(k,{children:e.jsxs(R,{children:[e.jsxs(o,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(me,{}),"Priority Distribution"]}),e.jsx(Fe,{width:"100%",height:300,children:e.jsxs(Sn,{children:[e.jsx(Cn,{data:a.priorityDistribution,cx:"50%",cy:"50%",labelLine:!1,label:({name:x,percent:L})=>`${x} ${((L||0)*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:(a.priorityDistribution||[]).map((x,L)=>e.jsx(wn,{fill:x.color},`cell-${L}`))}),e.jsx(ke,{})]})})]})})]}),!r&&e.jsxs(d,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",lg:"1fr 1fr"},gap:3,mb:4},children:[e.jsx(k,{children:e.jsxs(R,{children:[e.jsxs(o,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(me,{}),"Category Breakdown"]}),e.jsx(Fe,{width:"100%",height:300,children:e.jsxs(cr,{data:a.categoryDistribution||[],children:[e.jsx(Ye,{strokeDasharray:"3 3"}),e.jsx(Xe,{dataKey:"name",angle:-45,textAnchor:"end",height:80}),e.jsx(ze,{}),e.jsx(ke,{}),e.jsx(Rt,{dataKey:"value",fill:t.palette.primary.main})]})})]})}),e.jsx(k,{children:e.jsxs(R,{children:[e.jsxs(o,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Te,{}),"Success Rate by Category"]}),e.jsx(Fe,{width:"100%",height:300,children:e.jsxs(cr,{data:a.categoryDistribution||[],children:[e.jsx(Ye,{strokeDasharray:"3 3"}),e.jsx(Xe,{dataKey:"name",angle:-45,textAnchor:"end",height:80}),e.jsx(ze,{domain:[0,100]}),e.jsx(ke,{formatter:x=>[`${x}%`,"Success Rate"]}),e.jsx(Rt,{dataKey:"successRate",fill:t.palette.success.main,name:"Success Rate (%)"})]})})]})})]}),r?e.jsxs(d,{sx:{mb:3},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",p:1,borderRadius:1,bgcolor:"grey.50",mb:1},onClick:()=>$("recent"),children:[e.jsxs(o,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ve,{color:"primary"}),"Recent Interventions"]}),v.recent?e.jsx(er,{}):e.jsx(Dt,{})]}),e.jsx(ft,{in:v.recent,children:e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(a.recentInterventions||[]).slice(0,5).map(x=>e.jsx(k,{sx:{p:1},children:e.jsxs(d,{sx:{p:1},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[e.jsx(o,{variant:"body2",fontWeight:"medium",children:x.interventionNumber}),e.jsx(ge,{size:"small",onClick:()=>{console.log("View intervention:",x._id)},children:e.jsx(nr,{sx:{fontSize:16}})})]}),e.jsxs(d,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:1},children:[e.jsx(Z,{label:x.category.replace("_"," "),size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20}}),e.jsx(Z,{label:x.priority,size:"small",color:x.priority==="critical"?"error":x.priority==="high"?"warning":x.priority==="medium"?"info":"default",sx:{fontSize:"0.7rem",height:20}}),e.jsx(Z,{label:x.status,size:"small",color:x.status==="completed"?"success":x.status==="in_progress"?"info":"default",sx:{fontSize:"0.7rem",height:20}})]}),e.jsxs(o,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:["Patient: ",x.patientName]}),e.jsx(o,{variant:"caption",color:"text.secondary",children:yn(new Date(x.identifiedDate),{addSuffix:!0})})]})},x._id)),e.jsx(B,{variant:"outlined",size:"small",fullWidth:!0,onClick:()=>{console.log("View all interventions")},sx:{mt:1},children:"View All Interventions"})]})})]}):e.jsx(k,{children:e.jsxs(R,{children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(o,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ve,{}),"Recent Interventions"]}),e.jsx(B,{variant:"outlined",size:"small",onClick:()=>{console.log("View all interventions")},children:"View All"})]}),e.jsxs(ir,{children:[(a.recentInterventions||[]).slice(0,10).map((x,L)=>e.jsxs(pt.Fragment,{children:[e.jsxs(sr,{children:[e.jsx(ar,{primary:e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(o,{variant:"subtitle1",component:"span",children:x.interventionNumber}),e.jsx(Z,{label:x.category.replace("_"," "),size:"small",variant:"outlined"}),e.jsx(Z,{label:x.priority,size:"small",color:x.priority==="critical"?"error":x.priority==="high"?"warning":x.priority==="medium"?"info":"default"}),e.jsx(Z,{label:x.status,size:"small",color:x.status==="completed"?"success":x.status==="in_progress"?"info":"default"})]}),secondary:e.jsxs(d,{children:[e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Patient: ",x.patientName]}),e.jsxs(o,{variant:"caption",color:"text.secondary",children:[yn(new Date(x.identifiedDate),{addSuffix:!0}),x.assignedTo&&` â€¢ Assigned to: ${x.assignedTo}`]})]})}),e.jsx(Rr,{children:e.jsx(Pe,{title:"View Details",children:e.jsx(ge,{edge:"end",onClick:()=>{console.log("View intervention:",x._id)},children:e.jsx(nr,{})})})})]}),L<(a.recentInterventions||[]).length-1&&e.jsx(gi,{})]},x._id)),(a.recentInterventions||[]).length===0&&e.jsxs(d,{sx:{textAlign:"center",py:4},children:[e.jsx(Hr,{sx:{fontSize:48,color:"text.secondary",mb:2}}),e.jsx(o,{variant:"body1",color:"text.secondary",children:"No recent interventions found"})]})]})]})}),r&&e.jsx(ta,{color:"primary","aria-label":"add intervention",sx:{position:"fixed",bottom:16,right:16,zIndex:1e3},onClick:()=>{console.log("Create new intervention")},children:e.jsx(Ve,{})})]}):e.jsx(de,{severity:"info",sx:{m:2},children:"No dashboard data available"})},ba=(t={})=>pr({queryKey:ne.clinicalInterventions.list(t),queryFn:()=>he.getInterventions(t),staleTime:2*60*1e3,refetchOnWindowFocus:!1}),Ai=t=>pr({queryKey:ne.clinicalInterventions.detail(t),queryFn:()=>he.getInterventionById(t),enabled:!!t,refetchOnWindowFocus:!1}),Sa=t=>pr({queryKey:ne.clinicalInterventions.byPatient(t),queryFn:()=>he.getPatientInterventions(t),enabled:!!t,staleTime:2*60*1e3}),Ca=t=>pr({queryKey:ne.clinicalInterventions.recommendations(t),queryFn:()=>he.getStrategyRecommendations(t),enabled:!!t,staleTime:10*60*1e3}),wa=()=>{const t=Kr(),r=Gr(n=>n.addNotification);return Zr({mutationFn:n=>he.createIntervention(n),onSuccess:(n,i)=>{t.invalidateQueries({queryKey:ne.clinicalInterventions.all}),t.invalidateQueries({queryKey:ne.clinicalInterventions.lists()}),i.patientId&&t.invalidateQueries({queryKey:ne.clinicalInterventions.byPatient(i.patientId)}),t.invalidateQueries({queryKey:ne.clinicalInterventions.analytics.all});const s=n==null?void 0:n.data;r({type:"success",title:"Intervention Created",message:`Clinical intervention ${(s==null?void 0:s.interventionNumber)||""} has been successfully created.`,duration:5e3})},onError:n=>{r({type:"error",title:"Creation Failed",message:n.message||"Failed to create intervention. Please try again.",duration:5e3})}})},_i=()=>{const t=Kr(),r=Gr(n=>n.addNotification);return Zr({mutationFn:({interventionId:n,updates:i})=>he.updateIntervention(n,i),onSuccess:(n,i)=>{t.setQueryData(ne.clinicalInterventions.detail(i.interventionId),n),t.invalidateQueries({queryKey:ne.clinicalInterventions.lists()}),i.updates.status&&t.invalidateQueries({queryKey:ne.clinicalInterventions.analytics.all}),r({type:"success",title:"Intervention Updated",message:"Intervention has been successfully updated.",duration:5e3})},onError:n=>{r({type:"error",title:"Update Failed",message:n.message||"Failed to update intervention. Please try again.",duration:5e3})}})},Ta=()=>{const t=Kr(),r=Gr(n=>n.addNotification);return Zr({mutationFn:n=>he.deleteIntervention(n),onSuccess:(n,i)=>{t.removeQueries({queryKey:ne.clinicalInterventions.detail(i)}),t.invalidateQueries({queryKey:ne.clinicalInterventions.lists()}),t.invalidateQueries({queryKey:ne.clinicalInterventions.analytics.all}),r({type:"success",title:"Intervention Deleted",message:"Intervention has been successfully deleted.",duration:5e3})},onError:n=>{r({type:"error",title:"Deletion Failed",message:n.message||"Failed to delete intervention. Please try again.",duration:5e3})}})},Ia=()=>{const t=mr();xr();const[r,n]=g.useState({page:1,limit:10,sortBy:"createdAt",sortOrder:"desc"}),[i,s]=g.useState(!1),[a,l]=g.useState(""),[c,f]=g.useState(!1),[h,T]=g.useState(null),{data:v,isLoading:j,error:I,refetch:N}=ba(r),$=Ta(),_=g.useMemo(()=>{var p;return((p=v==null?void 0:v.data)==null?void 0:p.data)||[]},[v]),m=g.useMemo(()=>{var p;return((p=v==null?void 0:v.data)==null?void 0:p.pagination)||{page:1,limit:10,total:0,pages:0,hasNext:!1,hasPrev:!1}},[v]),x=(p,y)=>{n(M=>({...M,[p]:y,page:1}))},L=()=>{x("search",a)},U=(p,y)=>{n(M=>({...M,page:y+1}))},K=p=>{n(y=>({...y,limit:parseInt(p.target.value,10),page:1}))},P=p=>{T(p),f(!0)},b=async()=>{h&&(await $.mutateAsync(h),f(!1),T(null),N())},J=async()=>{try{const p=await he.exportInterventions(r,"xlsx");if(p.success&&p.data){const y=window.URL.createObjectURL(p.data),M=document.createElement("a");M.style.display="none",M.href=y,M.download=`clinical-interventions-${G(new Date,"yyyy-MM-dd")}.xlsx`,document.body.appendChild(M),M.click(),window.URL.revokeObjectURL(y)}}catch(p){console.error("Export failed:",p)}},Q=p=>{switch(p){case"critical":return"error";case"high":return"warning";case"medium":return"info";case"low":return"default";default:return"default"}},D=p=>{switch(p){case"completed":return"success";case"in_progress":return"info";case"implemented":return"primary";case"planning":return"warning";case"identified":return"default";case"cancelled":return"error";default:return"default"}},S=p=>{switch(p){case"completed":return e.jsx(Te,{});case"in_progress":return e.jsx(ve,{});case"implemented":return e.jsx(Te,{});case"planning":return e.jsx(ve,{});case"identified":return e.jsx(Ue,{});case"cancelled":return e.jsx(Ue,{});default:return e.jsx(ve,{})}};return j?e.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:e.jsx(Ie,{})}):I?e.jsxs(de,{severity:"error",action:e.jsx(B,{color:"inherit",size:"small",onClick:()=>N(),children:"Retry"}),children:["Error loading interventions: ",I.message]}):e.jsxs(d,{children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(o,{variant:"h5",component:"h2",children:"Clinical Interventions"}),e.jsxs(d,{display:"flex",gap:1,children:[e.jsx(B,{variant:"outlined",startIcon:e.jsx(tn,{}),onClick:()=>s(!i),children:"Filters"}),e.jsx(B,{variant:"outlined",startIcon:e.jsx(lr,{}),onClick:()=>N(),children:"Refresh"}),e.jsx(B,{variant:"outlined",startIcon:e.jsx(or,{}),onClick:J,children:"Export"}),e.jsx(B,{variant:"contained",startIcon:e.jsx(Ve,{}),onClick:()=>t("/pharmacy/clinical-interventions/create"),children:"Create New"})]})]}),e.jsx(ft,{in:i,children:e.jsx(k,{sx:{mb:3},children:e.jsx(R,{children:e.jsxs(z,{container:!0,spacing:2,children:[e.jsx(z,{item:!0,xs:12,md:4,children:e.jsx(oe,{fullWidth:!0,label:"Search",value:a,onChange:p=>l(p.target.value),onKeyPress:p=>p.key==="Enter"&&L(),InputProps:{endAdornment:e.jsx(ge,{onClick:L,children:e.jsx(bi,{})})}})}),e.jsx(z,{item:!0,xs:12,md:2,children:e.jsxs(se,{fullWidth:!0,children:[e.jsx(ae,{children:"Category"}),e.jsxs(le,{value:r.category||"",label:"Category",onChange:p=>x("category",p.target.value||void 0),children:[e.jsx(w,{value:"",children:"All Categories"}),e.jsx(w,{value:"drug_therapy_problem",children:"Drug Therapy Problem"}),e.jsx(w,{value:"adverse_drug_reaction",children:"Adverse Drug Reaction"}),e.jsx(w,{value:"medication_nonadherence",children:"Medication Non-adherence"}),e.jsx(w,{value:"drug_interaction",children:"Drug Interaction"}),e.jsx(w,{value:"dosing_issue",children:"Dosing Issue"}),e.jsx(w,{value:"contraindication",children:"Contraindication"}),e.jsx(w,{value:"other",children:"Other"})]})]})}),e.jsx(z,{item:!0,xs:12,md:2,children:e.jsxs(se,{fullWidth:!0,children:[e.jsx(ae,{children:"Priority"}),e.jsxs(le,{value:r.priority||"",label:"Priority",onChange:p=>x("priority",p.target.value||void 0),children:[e.jsx(w,{value:"",children:"All Priorities"}),e.jsx(w,{value:"critical",children:"Critical"}),e.jsx(w,{value:"high",children:"High"}),e.jsx(w,{value:"medium",children:"Medium"}),e.jsx(w,{value:"low",children:"Low"})]})]})}),e.jsx(z,{item:!0,xs:12,md:2,children:e.jsxs(se,{fullWidth:!0,children:[e.jsx(ae,{children:"Status"}),e.jsxs(le,{value:r.status||"",label:"Status",onChange:p=>x("status",p.target.value||void 0),children:[e.jsx(w,{value:"",children:"All Statuses"}),e.jsx(w,{value:"identified",children:"Identified"}),e.jsx(w,{value:"planning",children:"Planning"}),e.jsx(w,{value:"in_progress",children:"In Progress"}),e.jsx(w,{value:"implemented",children:"Implemented"}),e.jsx(w,{value:"completed",children:"Completed"}),e.jsx(w,{value:"cancelled",children:"Cancelled"})]})]})}),e.jsx(z,{item:!0,xs:12,md:2,children:e.jsx(d,{display:"flex",gap:1,children:e.jsx(B,{variant:"outlined",onClick:()=>{n({page:1,limit:10,sortBy:"createdAt",sortOrder:"desc"}),l("")},children:"Clear"})})})]})})})}),e.jsxs(Bt,{children:[e.jsx(mt,{children:e.jsxs(gt,{children:[e.jsx(yt,{children:e.jsxs(ie,{children:[e.jsx(C,{children:"Intervention #"}),e.jsx(C,{children:"Patient"}),e.jsx(C,{children:"Category"}),e.jsx(C,{children:"Priority"}),e.jsx(C,{children:"Status"}),e.jsx(C,{children:"Identified Date"}),e.jsx(C,{children:"Actions"})]})}),e.jsx(jt,{children:_.length>0?_.map(p=>{var y;return e.jsxs(ie,{hover:!0,children:[e.jsx(C,{children:e.jsx(o,{variant:"body2",fontWeight:"medium",children:p.interventionNumber})}),e.jsx(C,{children:e.jsxs(d,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Je,{fontSize:"small",color:"action"}),e.jsxs(d,{children:[e.jsx(o,{variant:"body2",children:p.patient?`${p.patient.firstName} ${p.patient.lastName}`:"Unknown Patient"}),((y=p.patient)==null?void 0:y.dateOfBirth)&&e.jsxs(o,{variant:"caption",color:"text.secondary",children:["DOB:"," ",G(ye(p.patient.dateOfBirth),"MMM dd, yyyy")]})]})]})}),e.jsx(C,{children:e.jsx(Z,{label:p.category.replace(/_/g," ").replace(/\b\w/g,M=>M.toUpperCase()),size:"small",variant:"outlined"})}),e.jsx(C,{children:e.jsx(Z,{label:p.priority.toUpperCase(),size:"small",color:Q(p.priority)})}),e.jsx(C,{children:e.jsx(Z,{icon:S(p.status),label:p.status.replace(/_/g," ").replace(/\b\w/g,M=>M.toUpperCase()),size:"small",color:D(p.status)})}),e.jsxs(C,{children:[e.jsx(o,{variant:"body2",children:G(ye(p.identifiedDate),"MMM dd, yyyy")}),e.jsx(o,{variant:"caption",color:"text.secondary",children:G(ye(p.identifiedDate),"HH:mm")})]}),e.jsx(C,{children:e.jsxs(d,{display:"flex",gap:.5,children:[e.jsx(Pe,{title:"View Details",children:e.jsx(ge,{size:"small",onClick:()=>t(`/pharmacy/clinical-interventions/details/${p._id}`),children:e.jsx(nr,{})})}),e.jsx(Pe,{title:"Edit",children:e.jsx(ge,{size:"small",onClick:()=>t(`/pharmacy/clinical-interventions/edit/${p._id}`),children:e.jsx(ur,{})})}),e.jsx(Pe,{title:"Delete",children:e.jsx(ge,{size:"small",color:"error",onClick:()=>P(p._id),children:e.jsx(Si,{})})})]})})]},p._id)}):e.jsx(ie,{children:e.jsx(C,{colSpan:7,sx:{textAlign:"center",py:4},children:e.jsxs(d,{children:[e.jsx(o,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Clinical Interventions Found"}),e.jsx(o,{variant:"body2",color:"text.secondary",paragraph:!0,children:r.search||r.category||r.priority||r.status?"No interventions match your current filters. Try adjusting your search criteria.":"No clinical interventions have been created yet. Create your first intervention to get started."}),e.jsx(B,{variant:"contained",startIcon:e.jsx(Ve,{}),onClick:()=>t("/pharmacy/clinical-interventions/create"),children:"Create First Intervention"})]})})})})]})}),e.jsx(Ci,{rowsPerPageOptions:[5,10,25,50],component:"div",count:m.total,rowsPerPage:m.limit,page:m.page-1,onPageChange:U,onRowsPerPageChange:K})]}),e.jsxs(Qr,{open:c,onClose:()=>f(!1),children:[e.jsx(Yr,{children:"Delete Intervention"}),e.jsx(Xr,{children:e.jsx(ma,{children:"Are you sure you want to delete this clinical intervention? This action cannot be undone."})}),e.jsxs(Jr,{children:[e.jsx(B,{onClick:()=>f(!1),children:"Cancel"}),e.jsx(B,{onClick:b,color:"error",variant:"contained",disabled:$.isPending,children:$.isPending?"Deleting...":"Delete"})]})]})]})};var Aa=function(r){return _a(r)&&!Ea(r)};function _a(t){return!!t&&typeof t=="object"}function Ea(t){var r=Object.prototype.toString.call(t);return r==="[object RegExp]"||r==="[object Date]"||Fa(t)}var Oa=typeof Symbol=="function"&&Symbol.for,$a=Oa?Symbol.for("react.element"):60103;function Fa(t){return t.$$typeof===$a}function ka(t){return Array.isArray(t)?[]:{}}function dr(t,r){return r.clone!==!1&&r.isMergeableObject(t)?Nt(ka(t),t,r):t}function Da(t,r,n){return t.concat(r).map(function(i){return dr(i,n)})}function Ra(t,r,n){var i={};return n.isMergeableObject(t)&&Object.keys(t).forEach(function(s){i[s]=dr(t[s],n)}),Object.keys(r).forEach(function(s){!n.isMergeableObject(r[s])||!t[s]?i[s]=dr(r[s],n):i[s]=Nt(t[s],r[s],n)}),i}function Nt(t,r,n){n=n||{},n.arrayMerge=n.arrayMerge||Da,n.isMergeableObject=n.isMergeableObject||Aa;var i=Array.isArray(r),s=Array.isArray(t),a=i===s;return a?i?n.arrayMerge(t,r,n):Ra(t,r,n):dr(r,n)}Nt.all=function(r,n){if(!Array.isArray(r))throw new Error("first argument should be an array");return r.reduce(function(i,s){return Nt(i,s,n)},{})};var Pr=Nt,Ei=typeof global=="object"&&global&&global.Object===Object&&global,Pa=typeof self=="object"&&self&&self.Object===Object&&self,Ae=Ei||Pa||Function("return this")(),We=Ae.Symbol,Oi=Object.prototype,Ma=Oi.hasOwnProperty,Na=Oi.toString,$t=We?We.toStringTag:void 0;function La(t){var r=Ma.call(t,$t),n=t[$t];try{t[$t]=void 0;var i=!0}catch{}var s=Na.call(t);return i&&(r?t[$t]=n:delete t[$t]),s}var za=Object.prototype,Ba=za.toString;function Ua(t){return Ba.call(t)}var Va="[object Null]",Wa="[object Undefined]",Fn=We?We.toStringTag:void 0;function nt(t){return t==null?t===void 0?Wa:Va:Fn&&Fn in Object(t)?La(t):Ua(t)}function $i(t,r){return function(n){return t(r(n))}}var rn=$i(Object.getPrototypeOf,Object);function it(t){return t!=null&&typeof t=="object"}var qa="[object Object]",Ha=Function.prototype,Ka=Object.prototype,Fi=Ha.toString,Ga=Ka.hasOwnProperty,Za=Fi.call(Object);function kn(t){if(!it(t)||nt(t)!=qa)return!1;var r=rn(t);if(r===null)return!0;var n=Ga.call(r,"constructor")&&r.constructor;return typeof n=="function"&&n instanceof n&&Fi.call(n)==Za}function Qa(){this.__data__=[],this.size=0}function ki(t,r){return t===r||t!==t&&r!==r}function yr(t,r){for(var n=t.length;n--;)if(ki(t[n][0],r))return n;return-1}var Ya=Array.prototype,Xa=Ya.splice;function Ja(t){var r=this.__data__,n=yr(r,t);if(n<0)return!1;var i=r.length-1;return n==i?r.pop():Xa.call(r,n,1),--this.size,!0}function el(t){var r=this.__data__,n=yr(r,t);return n<0?void 0:r[n][1]}function tl(t){return yr(this.__data__,t)>-1}function rl(t,r){var n=this.__data__,i=yr(n,t);return i<0?(++this.size,n.push([t,r])):n[i][1]=r,this}function Me(t){var r=-1,n=t==null?0:t.length;for(this.clear();++r<n;){var i=t[r];this.set(i[0],i[1])}}Me.prototype.clear=Qa;Me.prototype.delete=Ja;Me.prototype.get=el;Me.prototype.has=tl;Me.prototype.set=rl;function nl(){this.__data__=new Me,this.size=0}function il(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}function sl(t){return this.__data__.get(t)}function al(t){return this.__data__.has(t)}function Ut(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}var ll="[object AsyncFunction]",ol="[object Function]",cl="[object GeneratorFunction]",ul="[object Proxy]";function Di(t){if(!Ut(t))return!1;var r=nt(t);return r==ol||r==cl||r==ll||r==ul}var Er=Ae["__core-js_shared__"],Dn=function(){var t=/[^.]+$/.exec(Er&&Er.keys&&Er.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function dl(t){return!!Dn&&Dn in t}var hl=Function.prototype,fl=hl.toString;function st(t){if(t!=null){try{return fl.call(t)}catch{}try{return t+""}catch{}}return""}var xl=/[\\^$.*+?()[\]{}|]/g,pl=/^\[object .+?Constructor\]$/,ml=Function.prototype,gl=Object.prototype,yl=ml.toString,jl=gl.hasOwnProperty,vl=RegExp("^"+yl.call(jl).replace(xl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bl(t){if(!Ut(t)||dl(t))return!1;var r=Di(t)?vl:pl;return r.test(st(t))}function Sl(t,r){return t==null?void 0:t[r]}function at(t,r){var n=Sl(t,r);return bl(n)?n:void 0}var Lt=at(Ae,"Map"),zt=at(Object,"create");function Cl(){this.__data__=zt?zt(null):{},this.size=0}function wl(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}var Tl="__lodash_hash_undefined__",Il=Object.prototype,Al=Il.hasOwnProperty;function _l(t){var r=this.__data__;if(zt){var n=r[t];return n===Tl?void 0:n}return Al.call(r,t)?r[t]:void 0}var El=Object.prototype,Ol=El.hasOwnProperty;function $l(t){var r=this.__data__;return zt?r[t]!==void 0:Ol.call(r,t)}var Fl="__lodash_hash_undefined__";function kl(t,r){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=zt&&r===void 0?Fl:r,this}function rt(t){var r=-1,n=t==null?0:t.length;for(this.clear();++r<n;){var i=t[r];this.set(i[0],i[1])}}rt.prototype.clear=Cl;rt.prototype.delete=wl;rt.prototype.get=_l;rt.prototype.has=$l;rt.prototype.set=kl;function Dl(){this.size=0,this.__data__={hash:new rt,map:new(Lt||Me),string:new rt}}function Rl(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}function jr(t,r){var n=t.__data__;return Rl(r)?n[typeof r=="string"?"string":"hash"]:n.map}function Pl(t){var r=jr(this,t).delete(t);return this.size-=r?1:0,r}function Ml(t){return jr(this,t).get(t)}function Nl(t){return jr(this,t).has(t)}function Ll(t,r){var n=jr(this,t),i=n.size;return n.set(t,r),this.size+=n.size==i?0:1,this}function qe(t){var r=-1,n=t==null?0:t.length;for(this.clear();++r<n;){var i=t[r];this.set(i[0],i[1])}}qe.prototype.clear=Dl;qe.prototype.delete=Pl;qe.prototype.get=Ml;qe.prototype.has=Nl;qe.prototype.set=Ll;var zl=200;function Bl(t,r){var n=this.__data__;if(n instanceof Me){var i=n.__data__;if(!Lt||i.length<zl-1)return i.push([t,r]),this.size=++n.size,this;n=this.__data__=new qe(i)}return n.set(t,r),this.size=n.size,this}function bt(t){var r=this.__data__=new Me(t);this.size=r.size}bt.prototype.clear=nl;bt.prototype.delete=il;bt.prototype.get=sl;bt.prototype.has=al;bt.prototype.set=Bl;function Ul(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}var Rn=function(){try{var t=at(Object,"defineProperty");return t({},"",{}),t}catch{}}();function Ri(t,r,n){r=="__proto__"&&Rn?Rn(t,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[r]=n}var Vl=Object.prototype,Wl=Vl.hasOwnProperty;function Pi(t,r,n){var i=t[r];(!(Wl.call(t,r)&&ki(i,n))||n===void 0&&!(r in t))&&Ri(t,r,n)}function vr(t,r,n,i){var s=!n;n||(n={});for(var a=-1,l=r.length;++a<l;){var c=r[a],f=void 0;f===void 0&&(f=t[c]),s?Ri(n,c,f):Pi(n,c,f)}return n}function ql(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}var Hl="[object Arguments]";function Pn(t){return it(t)&&nt(t)==Hl}var Mi=Object.prototype,Kl=Mi.hasOwnProperty,Gl=Mi.propertyIsEnumerable,Zl=Pn(function(){return arguments}())?Pn:function(t){return it(t)&&Kl.call(t,"callee")&&!Gl.call(t,"callee")},Vt=Array.isArray;function Ql(){return!1}var Ni=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Mn=Ni&&typeof module=="object"&&module&&!module.nodeType&&module,Yl=Mn&&Mn.exports===Ni,Nn=Yl?Ae.Buffer:void 0,Xl=Nn?Nn.isBuffer:void 0,Li=Xl||Ql,Jl=9007199254740991,eo=/^(?:0|[1-9]\d*)$/;function to(t,r){var n=typeof t;return r=r??Jl,!!r&&(n=="number"||n!="symbol"&&eo.test(t))&&t>-1&&t%1==0&&t<r}var ro=9007199254740991;function zi(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ro}var no="[object Arguments]",io="[object Array]",so="[object Boolean]",ao="[object Date]",lo="[object Error]",oo="[object Function]",co="[object Map]",uo="[object Number]",ho="[object Object]",fo="[object RegExp]",xo="[object Set]",po="[object String]",mo="[object WeakMap]",go="[object ArrayBuffer]",yo="[object DataView]",jo="[object Float32Array]",vo="[object Float64Array]",bo="[object Int8Array]",So="[object Int16Array]",Co="[object Int32Array]",wo="[object Uint8Array]",To="[object Uint8ClampedArray]",Io="[object Uint16Array]",Ao="[object Uint32Array]",H={};H[jo]=H[vo]=H[bo]=H[So]=H[Co]=H[wo]=H[To]=H[Io]=H[Ao]=!0;H[no]=H[io]=H[go]=H[so]=H[yo]=H[ao]=H[lo]=H[oo]=H[co]=H[uo]=H[ho]=H[fo]=H[xo]=H[po]=H[mo]=!1;function _o(t){return it(t)&&zi(t.length)&&!!H[nt(t)]}function nn(t){return function(r){return t(r)}}var Bi=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Pt=Bi&&typeof module=="object"&&module&&!module.nodeType&&module,Eo=Pt&&Pt.exports===Bi,Or=Eo&&Ei.process,vt=function(){try{var t=Pt&&Pt.require&&Pt.require("util").types;return t||Or&&Or.binding&&Or.binding("util")}catch{}}(),Ln=vt&&vt.isTypedArray,Oo=Ln?nn(Ln):_o,$o=Object.prototype,Fo=$o.hasOwnProperty;function Ui(t,r){var n=Vt(t),i=!n&&Zl(t),s=!n&&!i&&Li(t),a=!n&&!i&&!s&&Oo(t),l=n||i||s||a,c=l?ql(t.length,String):[],f=c.length;for(var h in t)(r||Fo.call(t,h))&&!(l&&(h=="length"||s&&(h=="offset"||h=="parent")||a&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||to(h,f)))&&c.push(h);return c}var ko=Object.prototype;function sn(t){var r=t&&t.constructor,n=typeof r=="function"&&r.prototype||ko;return t===n}var Do=$i(Object.keys,Object),Ro=Object.prototype,Po=Ro.hasOwnProperty;function Mo(t){if(!sn(t))return Do(t);var r=[];for(var n in Object(t))Po.call(t,n)&&n!="constructor"&&r.push(n);return r}function Vi(t){return t!=null&&zi(t.length)&&!Di(t)}function an(t){return Vi(t)?Ui(t):Mo(t)}function No(t,r){return t&&vr(r,an(r),t)}function Lo(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}var zo=Object.prototype,Bo=zo.hasOwnProperty;function Uo(t){if(!Ut(t))return Lo(t);var r=sn(t),n=[];for(var i in t)i=="constructor"&&(r||!Bo.call(t,i))||n.push(i);return n}function ln(t){return Vi(t)?Ui(t,!0):Uo(t)}function Vo(t,r){return t&&vr(r,ln(r),t)}var Wi=typeof exports=="object"&&exports&&!exports.nodeType&&exports,zn=Wi&&typeof module=="object"&&module&&!module.nodeType&&module,Wo=zn&&zn.exports===Wi,Bn=Wo?Ae.Buffer:void 0,Un=Bn?Bn.allocUnsafe:void 0;function qo(t,r){if(r)return t.slice();var n=t.length,i=Un?Un(n):new t.constructor(n);return t.copy(i),i}function qi(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}function Ho(t,r){for(var n=-1,i=t==null?0:t.length,s=0,a=[];++n<i;){var l=t[n];r(l,n,t)&&(a[s++]=l)}return a}function Hi(){return[]}var Ko=Object.prototype,Go=Ko.propertyIsEnumerable,Vn=Object.getOwnPropertySymbols,on=Vn?function(t){return t==null?[]:(t=Object(t),Ho(Vn(t),function(r){return Go.call(t,r)}))}:Hi;function Zo(t,r){return vr(t,on(t),r)}function Ki(t,r){for(var n=-1,i=r.length,s=t.length;++n<i;)t[s+n]=r[n];return t}var Qo=Object.getOwnPropertySymbols,Gi=Qo?function(t){for(var r=[];t;)Ki(r,on(t)),t=rn(t);return r}:Hi;function Yo(t,r){return vr(t,Gi(t),r)}function Zi(t,r,n){var i=r(t);return Vt(t)?i:Ki(i,n(t))}function Xo(t){return Zi(t,an,on)}function Jo(t){return Zi(t,ln,Gi)}var Mr=at(Ae,"DataView"),Nr=at(Ae,"Promise"),Lr=at(Ae,"Set"),zr=at(Ae,"WeakMap"),Wn="[object Map]",ec="[object Object]",qn="[object Promise]",Hn="[object Set]",Kn="[object WeakMap]",Gn="[object DataView]",tc=st(Mr),rc=st(Lt),nc=st(Nr),ic=st(Lr),sc=st(zr),De=nt;(Mr&&De(new Mr(new ArrayBuffer(1)))!=Gn||Lt&&De(new Lt)!=Wn||Nr&&De(Nr.resolve())!=qn||Lr&&De(new Lr)!=Hn||zr&&De(new zr)!=Kn)&&(De=function(t){var r=nt(t),n=r==ec?t.constructor:void 0,i=n?st(n):"";if(i)switch(i){case tc:return Gn;case rc:return Wn;case nc:return qn;case ic:return Hn;case sc:return Kn}return r});var ac=Object.prototype,lc=ac.hasOwnProperty;function oc(t){var r=t.length,n=new t.constructor(r);return r&&typeof t[0]=="string"&&lc.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Zn=Ae.Uint8Array;function cn(t){var r=new t.constructor(t.byteLength);return new Zn(r).set(new Zn(t)),r}function cc(t,r){var n=r?cn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var uc=/\w*$/;function dc(t){var r=new t.constructor(t.source,uc.exec(t));return r.lastIndex=t.lastIndex,r}var Qn=We?We.prototype:void 0,Yn=Qn?Qn.valueOf:void 0;function hc(t){return Yn?Object(Yn.call(t)):{}}function fc(t,r){var n=r?cn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var xc="[object Boolean]",pc="[object Date]",mc="[object Map]",gc="[object Number]",yc="[object RegExp]",jc="[object Set]",vc="[object String]",bc="[object Symbol]",Sc="[object ArrayBuffer]",Cc="[object DataView]",wc="[object Float32Array]",Tc="[object Float64Array]",Ic="[object Int8Array]",Ac="[object Int16Array]",_c="[object Int32Array]",Ec="[object Uint8Array]",Oc="[object Uint8ClampedArray]",$c="[object Uint16Array]",Fc="[object Uint32Array]";function kc(t,r,n){var i=t.constructor;switch(r){case Sc:return cn(t);case xc:case pc:return new i(+t);case Cc:return cc(t,n);case wc:case Tc:case Ic:case Ac:case _c:case Ec:case Oc:case $c:case Fc:return fc(t,n);case mc:return new i;case gc:case vc:return new i(t);case yc:return dc(t);case jc:return new i;case bc:return hc(t)}}var Xn=Object.create,Dc=function(){function t(){}return function(r){if(!Ut(r))return{};if(Xn)return Xn(r);t.prototype=r;var n=new t;return t.prototype=void 0,n}}();function Rc(t){return typeof t.constructor=="function"&&!sn(t)?Dc(rn(t)):{}}var Pc="[object Map]";function Mc(t){return it(t)&&De(t)==Pc}var Jn=vt&&vt.isMap,Nc=Jn?nn(Jn):Mc,Lc="[object Set]";function zc(t){return it(t)&&De(t)==Lc}var ei=vt&&vt.isSet,Bc=ei?nn(ei):zc,Uc=1,Vc=2,Wc=4,Qi="[object Arguments]",qc="[object Array]",Hc="[object Boolean]",Kc="[object Date]",Gc="[object Error]",Yi="[object Function]",Zc="[object GeneratorFunction]",Qc="[object Map]",Yc="[object Number]",Xi="[object Object]",Xc="[object RegExp]",Jc="[object Set]",eu="[object String]",tu="[object Symbol]",ru="[object WeakMap]",nu="[object ArrayBuffer]",iu="[object DataView]",su="[object Float32Array]",au="[object Float64Array]",lu="[object Int8Array]",ou="[object Int16Array]",cu="[object Int32Array]",uu="[object Uint8Array]",du="[object Uint8ClampedArray]",hu="[object Uint16Array]",fu="[object Uint32Array]",q={};q[Qi]=q[qc]=q[nu]=q[iu]=q[Hc]=q[Kc]=q[su]=q[au]=q[lu]=q[ou]=q[cu]=q[Qc]=q[Yc]=q[Xi]=q[Xc]=q[Jc]=q[eu]=q[tu]=q[uu]=q[du]=q[hu]=q[fu]=!0;q[Gc]=q[Yi]=q[ru]=!1;function Mt(t,r,n,i,s,a){var l,c=r&Uc,f=r&Vc,h=r&Wc;if(l!==void 0)return l;if(!Ut(t))return t;var T=Vt(t);if(T){if(l=oc(t),!c)return qi(t,l)}else{var v=De(t),j=v==Yi||v==Zc;if(Li(t))return qo(t,c);if(v==Xi||v==Qi||j&&!s){if(l=f||j?{}:Rc(t),!c)return f?Yo(t,Vo(l,t)):Zo(t,No(l,t))}else{if(!q[v])return s?t:{};l=kc(t,v,c)}}a||(a=new bt);var I=a.get(t);if(I)return I;a.set(t,l),Bc(t)?t.forEach(function(_){l.add(Mt(_,r,n,_,t,a))}):Nc(t)&&t.forEach(function(_,m){l.set(m,Mt(_,r,n,m,t,a))});var N=h?f?Jo:Xo:f?ln:an,$=T?void 0:N(t);return Ul($||t,function(_,m){$&&(m=_,_=t[m]),Pi(l,m,Mt(_,r,n,m,t,a))}),l}var xu=1,pu=4;function Zt(t){return Mt(t,xu|pu)}var ti=Array.isArray,ri=Object.keys,mu=Object.prototype.hasOwnProperty,gu=typeof Element<"u";function Br(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){var n=ti(t),i=ti(r),s,a,l;if(n&&i){if(a=t.length,a!=r.length)return!1;for(s=a;s--!==0;)if(!Br(t[s],r[s]))return!1;return!0}if(n!=i)return!1;var c=t instanceof Date,f=r instanceof Date;if(c!=f)return!1;if(c&&f)return t.getTime()==r.getTime();var h=t instanceof RegExp,T=r instanceof RegExp;if(h!=T)return!1;if(h&&T)return t.toString()==r.toString();var v=ri(t);if(a=v.length,a!==ri(r).length)return!1;for(s=a;s--!==0;)if(!mu.call(r,v[s]))return!1;if(gu&&t instanceof Element&&r instanceof Element)return t===r;for(s=a;s--!==0;)if(l=v[s],!(l==="_owner"&&t.$$typeof)&&!Br(t[l],r[l]))return!1;return!0}return t!==t&&r!==r}var yu=function(r,n){try{return Br(r,n)}catch(i){if(i.message&&i.message.match(/stack|recursion/i)||i.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",i.name,i.message),!1;throw i}};const Qe=yi(yu);var ju=4;function ni(t){return Mt(t,ju)}function Ji(t,r){for(var n=-1,i=t==null?0:t.length,s=Array(i);++n<i;)s[n]=r(t[n],n,t);return s}var vu="[object Symbol]";function un(t){return typeof t=="symbol"||it(t)&&nt(t)==vu}var bu="Expected a function";function dn(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError(bu);var n=function(){var i=arguments,s=r?r.apply(this,i):i[0],a=n.cache;if(a.has(s))return a.get(s);var l=t.apply(this,i);return n.cache=a.set(s,l)||a,l};return n.cache=new(dn.Cache||qe),n}dn.Cache=qe;var Su=500;function Cu(t){var r=dn(t,function(i){return n.size===Su&&n.clear(),i}),n=r.cache;return r}var wu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tu=/\\(\\)?/g,Iu=Cu(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(wu,function(n,i,s,a){r.push(s?a.replace(Tu,"$1"):i||n)}),r}),Au=1/0;function _u(t){if(typeof t=="string"||un(t))return t;var r=t+"";return r=="0"&&1/t==-Au?"-0":r}var Eu=1/0,ii=We?We.prototype:void 0,si=ii?ii.toString:void 0;function es(t){if(typeof t=="string")return t;if(Vt(t))return Ji(t,es)+"";if(un(t))return si?si.call(t):"";var r=t+"";return r=="0"&&1/t==-Eu?"-0":r}function Ou(t){return t==null?"":es(t)}function ts(t){return Vt(t)?Ji(t,_u):un(t)?[t]:qi(Iu(Ou(t)))}function X(){return X=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},X.apply(this,arguments)}function rs(t,r){if(t==null)return{};var n={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(r.indexOf(s)>=0)&&(n[s]=t[s]);return n}var br=g.createContext(void 0);br.displayName="FormikContext";br.Provider;br.Consumer;function $u(){var t=g.useContext(br);return t}var je=function(r){return typeof r=="function"},Sr=function(r){return r!==null&&typeof r=="object"},Fu=function(r){return String(Math.floor(Number(r)))===r},$r=function(r){return Object.prototype.toString.call(r)==="[object String]"},Fr=function(r){return Sr(r)&&je(r.then)};function ue(t,r,n,i){i===void 0&&(i=0);for(var s=ts(r);t&&i<s.length;)t=t[s[i++]];return i!==s.length&&!t||t===void 0?n:t}function et(t,r,n){for(var i=ni(t),s=i,a=0,l=ts(r);a<l.length-1;a++){var c=l[a],f=ue(t,l.slice(0,a+1));if(f&&(Sr(f)||Array.isArray(f)))s=s[c]=ni(f);else{var h=l[a+1];s=s[c]=Fu(h)&&Number(h)>=0?[]:{}}}return(a===0?t:s)[l[a]]===n?t:(n===void 0?delete s[l[a]]:s[l[a]]=n,a===0&&n===void 0&&delete i[l[a]],i)}function ns(t,r,n,i){n===void 0&&(n=new WeakMap),i===void 0&&(i={});for(var s=0,a=Object.keys(t);s<a.length;s++){var l=a[s],c=t[l];Sr(c)?n.get(c)||(n.set(c,!0),i[l]=Array.isArray(c)?[]:{},ns(c,r,n,i[l])):i[l]=r}return i}function ku(t,r){switch(r.type){case"SET_VALUES":return X({},t,{values:r.payload});case"SET_TOUCHED":return X({},t,{touched:r.payload});case"SET_ERRORS":return Qe(t.errors,r.payload)?t:X({},t,{errors:r.payload});case"SET_STATUS":return X({},t,{status:r.payload});case"SET_ISSUBMITTING":return X({},t,{isSubmitting:r.payload});case"SET_ISVALIDATING":return X({},t,{isValidating:r.payload});case"SET_FIELD_VALUE":return X({},t,{values:et(t.values,r.payload.field,r.payload.value)});case"SET_FIELD_TOUCHED":return X({},t,{touched:et(t.touched,r.payload.field,r.payload.value)});case"SET_FIELD_ERROR":return X({},t,{errors:et(t.errors,r.payload.field,r.payload.value)});case"RESET_FORM":return X({},t,r.payload);case"SET_FORMIK_STATE":return r.payload(t);case"SUBMIT_ATTEMPT":return X({},t,{touched:ns(t.values,!0),isSubmitting:!0,submitCount:t.submitCount+1});case"SUBMIT_FAILURE":return X({},t,{isSubmitting:!1});case"SUBMIT_SUCCESS":return X({},t,{isSubmitting:!1});default:return t}}var Ze={},Qt={};function Du(t){var r=t.validateOnChange,n=r===void 0?!0:r,i=t.validateOnBlur,s=i===void 0?!0:i,a=t.validateOnMount,l=a===void 0?!1:a,c=t.isInitialValid,f=t.enableReinitialize,h=f===void 0?!1:f,T=t.onSubmit,v=rs(t,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),j=X({validateOnChange:n,validateOnBlur:s,validateOnMount:l,onSubmit:T},v),I=g.useRef(j.initialValues),N=g.useRef(j.initialErrors||Ze),$=g.useRef(j.initialTouched||Qt),_=g.useRef(j.initialStatus),m=g.useRef(!1),x=g.useRef({});g.useEffect(function(){return m.current=!0,function(){m.current=!1}},[]);var L=g.useState(0),U=L[1],K=g.useRef({values:Zt(j.initialValues),errors:Zt(j.initialErrors)||Ze,touched:Zt(j.initialTouched)||Qt,status:Zt(j.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),P=K.current,b=g.useCallback(function(u){var A=K.current;K.current=ku(A,u),A!==K.current&&U(function(O){return O+1})},[]),J=g.useCallback(function(u,A){return new Promise(function(O,F){var V=j.validate(u,A);V==null?O(Ze):Fr(V)?V.then(function(W){O(W||Ze)},function(W){F(W)}):O(V)})},[j.validate]),Q=g.useCallback(function(u,A){var O=j.validationSchema,F=je(O)?O(A):O,V=A&&F.validateAt?F.validateAt(A,u):Pu(u,F);return new Promise(function(W,Y){V.then(function(){W(Ze)},function(Oe){Oe.name==="ValidationError"?W(Ru(Oe)):Y(Oe)})})},[j.validationSchema]),D=g.useCallback(function(u,A){return new Promise(function(O){return O(x.current[u].validate(A))})},[]),S=g.useCallback(function(u){var A=Object.keys(x.current).filter(function(F){return je(x.current[F].validate)}),O=A.length>0?A.map(function(F){return D(F,ue(u,F))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(O).then(function(F){return F.reduce(function(V,W,Y){return W==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||W&&(V=et(V,A[Y],W)),V},{})})},[D]),p=g.useCallback(function(u){return Promise.all([S(u),j.validationSchema?Q(u):{},j.validate?J(u):{}]).then(function(A){var O=A[0],F=A[1],V=A[2],W=Pr.all([O,F,V],{arrayMerge:Mu});return W})},[j.validate,j.validationSchema,S,J,Q]),y=pe(function(u){return u===void 0&&(u=P.values),b({type:"SET_ISVALIDATING",payload:!0}),p(u).then(function(A){return m.current&&(b({type:"SET_ISVALIDATING",payload:!1}),b({type:"SET_ERRORS",payload:A})),A})});g.useEffect(function(){l&&m.current===!0&&Qe(I.current,j.initialValues)&&y(I.current)},[l,y]);var M=g.useCallback(function(u){var A=u&&u.values?u.values:I.current,O=u&&u.errors?u.errors:N.current?N.current:j.initialErrors||{},F=u&&u.touched?u.touched:$.current?$.current:j.initialTouched||{},V=u&&u.status?u.status:_.current?_.current:j.initialStatus;I.current=A,N.current=O,$.current=F,_.current=V;var W=function(){b({type:"RESET_FORM",payload:{isSubmitting:!!u&&!!u.isSubmitting,errors:O,touched:F,status:V,values:A,isValidating:!!u&&!!u.isValidating,submitCount:u&&u.submitCount&&typeof u.submitCount=="number"?u.submitCount:0}})};if(j.onReset){var Y=j.onReset(P.values,Ot);Fr(Y)?Y.then(W):W()}else W()},[j.initialErrors,j.initialStatus,j.initialTouched,j.onReset]);g.useEffect(function(){m.current===!0&&!Qe(I.current,j.initialValues)&&h&&(I.current=j.initialValues,M(),l&&y(I.current))},[h,j.initialValues,M,l,y]),g.useEffect(function(){h&&m.current===!0&&!Qe(N.current,j.initialErrors)&&(N.current=j.initialErrors||Ze,b({type:"SET_ERRORS",payload:j.initialErrors||Ze}))},[h,j.initialErrors]),g.useEffect(function(){h&&m.current===!0&&!Qe($.current,j.initialTouched)&&($.current=j.initialTouched||Qt,b({type:"SET_TOUCHED",payload:j.initialTouched||Qt}))},[h,j.initialTouched]),g.useEffect(function(){h&&m.current===!0&&!Qe(_.current,j.initialStatus)&&(_.current=j.initialStatus,b({type:"SET_STATUS",payload:j.initialStatus}))},[h,j.initialStatus,j.initialTouched]);var Ne=pe(function(u){if(x.current[u]&&je(x.current[u].validate)){var A=ue(P.values,u),O=x.current[u].validate(A);return Fr(O)?(b({type:"SET_ISVALIDATING",payload:!0}),O.then(function(F){return F}).then(function(F){b({type:"SET_FIELD_ERROR",payload:{field:u,value:F}}),b({type:"SET_ISVALIDATING",payload:!1})})):(b({type:"SET_FIELD_ERROR",payload:{field:u,value:O}}),Promise.resolve(O))}else if(j.validationSchema)return b({type:"SET_ISVALIDATING",payload:!0}),Q(P.values,u).then(function(F){return F}).then(function(F){b({type:"SET_FIELD_ERROR",payload:{field:u,value:ue(F,u)}}),b({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),Se=g.useCallback(function(u,A){var O=A.validate;x.current[u]={validate:O}},[]),Wt=g.useCallback(function(u){delete x.current[u]},[]),St=pe(function(u,A){b({type:"SET_TOUCHED",payload:u});var O=A===void 0?s:A;return O?y(P.values):Promise.resolve()}),Ct=g.useCallback(function(u){b({type:"SET_ERRORS",payload:u})},[]),wt=pe(function(u,A){var O=je(u)?u(P.values):u;b({type:"SET_VALUES",payload:O});var F=A===void 0?n:A;return F?y(O):Promise.resolve()}),He=g.useCallback(function(u,A){b({type:"SET_FIELD_ERROR",payload:{field:u,value:A}})},[]),_e=pe(function(u,A,O){b({type:"SET_FIELD_VALUE",payload:{field:u,value:A}});var F=O===void 0?n:O;return F?y(et(P.values,u,A)):Promise.resolve()}),Tt=g.useCallback(function(u,A){var O=A,F=u,V;if(!$r(u)){u.persist&&u.persist();var W=u.target?u.target:u.currentTarget,Y=W.type,Oe=W.name,Ir=W.id,Ar=W.value,bs=W.checked,Wd=W.outerHTML,gn=W.options,Ss=W.multiple;O=A||Oe||Ir,F=/number|range/.test(Y)?(V=parseFloat(Ar),isNaN(V)?"":V):/checkbox/.test(Y)?Lu(ue(P.values,O),bs,Ar):gn&&Ss?Nu(gn):Ar}O&&_e(O,F)},[_e,P.values]),ct=pe(function(u){if($r(u))return function(A){return Tt(A,u)};Tt(u)}),Ee=pe(function(u,A,O){A===void 0&&(A=!0),b({type:"SET_FIELD_TOUCHED",payload:{field:u,value:A}});var F=O===void 0?s:O;return F?y(P.values):Promise.resolve()}),It=g.useCallback(function(u,A){u.persist&&u.persist();var O=u.target,F=O.name,V=O.id,W=O.outerHTML,Y=A||F||V;Ee(Y,!0)},[Ee]),ut=pe(function(u){if($r(u))return function(A){return It(A,u)};It(u)}),At=g.useCallback(function(u){je(u)?b({type:"SET_FORMIK_STATE",payload:u}):b({type:"SET_FORMIK_STATE",payload:function(){return u}})},[]),_t=g.useCallback(function(u){b({type:"SET_STATUS",payload:u})},[]),Et=g.useCallback(function(u){b({type:"SET_ISSUBMITTING",payload:u})},[]),dt=pe(function(){return b({type:"SUBMIT_ATTEMPT"}),y().then(function(u){var A=u instanceof Error,O=!A&&Object.keys(u).length===0;if(O){var F;try{if(F=Ht(),F===void 0)return}catch(V){throw V}return Promise.resolve(F).then(function(V){return m.current&&b({type:"SUBMIT_SUCCESS"}),V}).catch(function(V){if(m.current)throw b({type:"SUBMIT_FAILURE"}),V})}else if(m.current&&(b({type:"SUBMIT_FAILURE"}),A))throw u})}),qt=pe(function(u){u&&u.preventDefault&&je(u.preventDefault)&&u.preventDefault(),u&&u.stopPropagation&&je(u.stopPropagation)&&u.stopPropagation(),dt().catch(function(A){console.warn("Warning: An unhandled error was caught from submitForm()",A)})}),Ot={resetForm:M,validateForm:y,validateField:Ne,setErrors:Ct,setFieldError:He,setFieldTouched:Ee,setFieldValue:_e,setStatus:_t,setSubmitting:Et,setTouched:St,setValues:wt,setFormikState:At,submitForm:dt},Ht=pe(function(){return T(P.values,Ot)}),Kt=pe(function(u){u&&u.preventDefault&&je(u.preventDefault)&&u.preventDefault(),u&&u.stopPropagation&&je(u.stopPropagation)&&u.stopPropagation(),M()}),Gt=g.useCallback(function(u){return{value:ue(P.values,u),error:ue(P.errors,u),touched:!!ue(P.touched,u),initialValue:ue(I.current,u),initialTouched:!!ue($.current,u),initialError:ue(N.current,u)}},[P.errors,P.touched,P.values]),E=g.useCallback(function(u){return{setValue:function(O,F){return _e(u,O,F)},setTouched:function(O,F){return Ee(u,O,F)},setError:function(O){return He(u,O)}}},[_e,Ee,He]),fe=g.useCallback(function(u){var A=Sr(u),O=A?u.name:u,F=ue(P.values,O),V={name:O,value:F,onChange:ct,onBlur:ut};if(A){var W=u.type,Y=u.value,Oe=u.as,Ir=u.multiple;W==="checkbox"?Y===void 0?V.checked=!!F:(V.checked=!!(Array.isArray(F)&&~F.indexOf(Y)),V.value=Y):W==="radio"?(V.checked=F===Y,V.value=Y):Oe==="select"&&Ir&&(V.value=V.value||[],V.multiple=!0)}return V},[ut,ct,P.values]),xe=g.useMemo(function(){return!Qe(I.current,P.values)},[I.current,P.values]),Ke=g.useMemo(function(){return typeof c<"u"?xe?P.errors&&Object.keys(P.errors).length===0:c!==!1&&je(c)?c(j):c:P.errors&&Object.keys(P.errors).length===0},[c,xe,P.errors,j]),Ge=X({},P,{initialValues:I.current,initialErrors:N.current,initialTouched:$.current,initialStatus:_.current,handleBlur:ut,handleChange:ct,handleReset:Kt,handleSubmit:qt,resetForm:M,setErrors:Ct,setFormikState:At,setFieldTouched:Ee,setFieldValue:_e,setFieldError:He,setStatus:_t,setSubmitting:Et,setTouched:St,setValues:wt,submitForm:dt,validateForm:y,validateField:Ne,isValid:Ke,dirty:xe,unregisterField:Wt,registerField:Se,getFieldProps:fe,getFieldMeta:Gt,getFieldHelpers:E,validateOnBlur:s,validateOnChange:n,validateOnMount:l});return Ge}function Ru(t){var r={};if(t.inner){if(t.inner.length===0)return et(r,t.path,t.message);for(var s=t.inner,n=Array.isArray(s),i=0,s=n?s:s[Symbol.iterator]();;){var a;if(n){if(i>=s.length)break;a=s[i++]}else{if(i=s.next(),i.done)break;a=i.value}var l=a;ue(r,l.path)||(r=et(r,l.path,l.message))}}return r}function Pu(t,r,n,i){n===void 0&&(n=!1);var s=Ur(t);return r[n?"validateSync":"validate"](s,{abortEarly:!1,context:s})}function Ur(t){var r=Array.isArray(t)?[]:{};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=String(n);Array.isArray(t[i])===!0?r[i]=t[i].map(function(s){return Array.isArray(s)===!0||kn(s)?Ur(s):s!==""?s:void 0}):kn(t[i])?r[i]=Ur(t[i]):r[i]=t[i]!==""?t[i]:void 0}return r}function Mu(t,r,n){var i=t.slice();return r.forEach(function(a,l){if(typeof i[l]>"u"){var c=n.clone!==!1,f=c&&n.isMergeableObject(a);i[l]=f?Pr(Array.isArray(a)?[]:{},a,n):a}else n.isMergeableObject(a)?i[l]=Pr(t[l],a,n):t.indexOf(a)===-1&&i.push(a)}),i}function Nu(t){return Array.from(t).filter(function(r){return r.selected}).map(function(r){return r.value})}function Lu(t,r,n){if(typeof t=="boolean")return!!r;var i=[],s=!1,a=-1;if(Array.isArray(t))i=t,a=t.indexOf(n),s=a>=0;else if(!n||n=="true"||n=="false")return!!r;return r&&n&&!s?i.concat(n):s?i.slice(0,a).concat(i.slice(a+1)):i}var zu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?g.useLayoutEffect:g.useEffect;function pe(t){var r=g.useRef(t);return zu(function(){r.current=t}),g.useCallback(function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r.current.apply(void 0,i)},[])}var Bu=g.forwardRef(function(t,r){var n=t.action,i=rs(t,["action"]),s=n??"#",a=$u(),l=a.handleReset,c=a.handleSubmit;return g.createElement("form",X({onSubmit:c,ref:r,onReset:l,action:s},i))});Bu.displayName="Form";function lt(t){this._maxSize=t,this.clear()}lt.prototype.clear=function(){this._size=0,this._values=Object.create(null)};lt.prototype.get=function(t){return this._values[t]};lt.prototype.set=function(t,r){return this._size>=this._maxSize&&this.clear(),t in this._values||this._size++,this._values[t]=r};var Uu=/[^.^\]^[]+|(?=\[\]|\.\.)/g,is=/^\d+$/,Vu=/^\d/,Wu=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,qu=/^\s*(['"]?)(.*?)(\1)\s*$/,hn=512,ai=new lt(hn),li=new lt(hn),oi=new lt(hn),tt={Cache:lt,split:Vr,normalizePath:kr,setter:function(t){var r=kr(t);return li.get(t)||li.set(t,function(i,s){for(var a=0,l=r.length,c=i;a<l-1;){var f=r[a];if(f==="__proto__"||f==="constructor"||f==="prototype")return i;c=c[r[a++]]}c[r[a]]=s})},getter:function(t,r){var n=kr(t);return oi.get(t)||oi.set(t,function(s){for(var a=0,l=n.length;a<l;)if(s!=null||!r)s=s[n[a++]];else return;return s})},join:function(t){return t.reduce(function(r,n){return r+(fn(n)||is.test(n)?"["+n+"]":(r?".":"")+n)},"")},forEach:function(t,r,n){Hu(Array.isArray(t)?t:Vr(t),r,n)}};function kr(t){return ai.get(t)||ai.set(t,Vr(t).map(function(r){return r.replace(qu,"$2")}))}function Vr(t){return t.match(Uu)||[""]}function Hu(t,r,n){var i=t.length,s,a,l,c;for(a=0;a<i;a++)s=t[a],s&&(Zu(s)&&(s='"'+s+'"'),c=fn(s),l=!c&&/^\d+$/.test(s),r.call(n,s,c,l,a,t))}function fn(t){return typeof t=="string"&&t&&["'",'"'].indexOf(t.charAt(0))!==-1}function Ku(t){return t.match(Vu)&&!t.match(is)}function Gu(t){return Wu.test(t)}function Zu(t){return!fn(t)&&(Ku(t)||Gu(t))}const Qu=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['â€™](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['â€™](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['â€™](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['â€™](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,Cr=t=>t.match(Qu)||[],wr=t=>t[0].toUpperCase()+t.slice(1),xn=(t,r)=>Cr(t).join(r).toLowerCase(),ss=t=>Cr(t).reduce((r,n)=>`${r}${r?n[0].toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()}`,""),Yu=t=>wr(ss(t)),Xu=t=>xn(t,"_"),Ju=t=>xn(t,"-"),ed=t=>wr(xn(t," ")),td=t=>Cr(t).map(wr).join(" ");var Dr={words:Cr,upperFirst:wr,camelCase:ss,pascalCase:Yu,snakeCase:Xu,kebabCase:Ju,sentenceCase:ed,titleCase:td},pn={exports:{}};pn.exports=function(t){return as(rd(t),t)};pn.exports.array=as;function as(t,r){var n=t.length,i=new Array(n),s={},a=n,l=nd(r),c=id(t);for(r.forEach(function(h){if(!c.has(h[0])||!c.has(h[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});a--;)s[a]||f(t[a],a,new Set);return i;function f(h,T,v){if(v.has(h)){var j;try{j=", node was:"+JSON.stringify(h)}catch{j=""}throw new Error("Cyclic dependency"+j)}if(!c.has(h))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(h));if(!s[T]){s[T]=!0;var I=l.get(h)||new Set;if(I=Array.from(I),T=I.length){v.add(h);do{var N=I[--T];f(N,c.get(N),v)}while(T);v.delete(h)}i[--n]=h}}}function rd(t){for(var r=new Set,n=0,i=t.length;n<i;n++){var s=t[n];r.add(s[0]),r.add(s[1])}return Array.from(r)}function nd(t){for(var r=new Map,n=0,i=t.length;n<i;n++){var s=t[n];r.has(s[0])||r.set(s[0],new Set),r.has(s[1])||r.set(s[1],new Set),r.get(s[0]).add(s[1])}return r}function id(t){for(var r=new Map,n=0,i=t.length;n<i;n++)r.set(t[n],n);return r}var sd=pn.exports;const ad=yi(sd),ld=Object.prototype.toString,od=Error.prototype.toString,cd=RegExp.prototype.toString,ud=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",dd=/^Symbol\((.*)\)(.*)$/;function hd(t){return t!=+t?"NaN":t===0&&1/t<0?"-0":""+t}function ci(t,r=!1){if(t==null||t===!0||t===!1)return""+t;const n=typeof t;if(n==="number")return hd(t);if(n==="string")return r?`"${t}"`:t;if(n==="function")return"[Function "+(t.name||"anonymous")+"]";if(n==="symbol")return ud.call(t).replace(dd,"Symbol($1)");const i=ld.call(t).slice(8,-1);return i==="Date"?isNaN(t.getTime())?""+t:t.toISOString(t):i==="Error"||t instanceof Error?"["+od.call(t)+"]":i==="RegExp"?cd.call(t):null}function Be(t,r){let n=ci(t,r);return n!==null?n:JSON.stringify(t,function(i,s){let a=ci(this[i],r);return a!==null?a:s},2)}function ls(t){return t==null?[]:[].concat(t)}let os,cs,us,fd=/\$\{\s*(\w+)\s*\}/g;os=Symbol.toStringTag;class ui{constructor(r,n,i,s){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[os]="Error",this.name="ValidationError",this.value=n,this.path=i,this.type=s,this.errors=[],this.inner=[],ls(r).forEach(a=>{if(te.isError(a)){this.errors.push(...a.errors);const l=a.inner.length?a.inner:[a];this.inner.push(...l)}else this.errors.push(a)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}cs=Symbol.hasInstance;us=Symbol.toStringTag;class te extends Error{static formatError(r,n){const i=n.label||n.path||"this";return n=Object.assign({},n,{path:i,originalPath:n.path}),typeof r=="string"?r.replace(fd,(s,a)=>Be(n[a])):typeof r=="function"?r(n):r}static isError(r){return r&&r.name==="ValidationError"}constructor(r,n,i,s,a){const l=new ui(r,n,i,s);if(a)return l;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[us]="Error",this.name=l.name,this.message=l.message,this.type=l.type,this.value=l.value,this.path=l.path,this.errors=l.errors,this.inner=l.inner,Error.captureStackTrace&&Error.captureStackTrace(this,te)}static[cs](r){return ui[Symbol.hasInstance](r)||super[Symbol.hasInstance](r)}}let Ce={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:r,value:n,originalValue:i})=>{const s=i!=null&&i!==n?` (cast from the value \`${Be(i,!0)}\`).`:".";return r!=="mixed"?`${t} must be a \`${r}\` type, but the final value was: \`${Be(n,!0)}\``+s:`${t} must match the configured type. The validated value was: \`${Be(n,!0)}\``+s}},re={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Le={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},Wr={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},xd={isValue:"${path} field must be ${value}"},tr={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},pd={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},md={notType:t=>{const{path:r,value:n,spec:i}=t,s=i.types.length;if(Array.isArray(n)){if(n.length<s)return`${r} tuple value has too few items, expected a length of ${s} but got ${n.length} for value: \`${Be(n,!0)}\``;if(n.length>s)return`${r} tuple value has too many items, expected a length of ${s} but got ${n.length} for value: \`${Be(n,!0)}\``}return te.formatError(Ce.notType,t)}};Object.assign(Object.create(null),{mixed:Ce,string:re,number:Le,date:Wr,object:tr,array:pd,boolean:xd,tuple:md});const mn=t=>t&&t.__isYupSchema__;class hr{static fromOptions(r,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:i,then:s,otherwise:a}=n,l=typeof i=="function"?i:(...c)=>c.every(f=>f===i);return new hr(r,(c,f)=>{var h;let T=l(...c)?s:a;return(h=T==null?void 0:T(f))!=null?h:f})}constructor(r,n){this.fn=void 0,this.refs=r,this.refs=r,this.fn=n}resolve(r,n){let i=this.refs.map(a=>a.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),s=this.fn(i,r,n);if(s===void 0||s===r)return r;if(!mn(s))throw new TypeError("conditions must return a schema object");return s.resolve(n)}}const Yt={context:"$",value:"."};class ot{constructor(r,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof r!="string")throw new TypeError("ref must be a string, got: "+r);if(this.key=r.trim(),r==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Yt.context,this.isValue=this.key[0]===Yt.value,this.isSibling=!this.isContext&&!this.isValue;let i=this.isContext?Yt.context:this.isValue?Yt.value:"";this.path=this.key.slice(i.length),this.getter=this.path&&tt.getter(this.path,!0),this.map=n.map}getValue(r,n,i){let s=this.isContext?i:this.isValue?r:n;return this.getter&&(s=this.getter(s||{})),this.map&&(s=this.map(s)),s}cast(r,n){return this.getValue(r,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(r){return r&&r.__isYupRef}}ot.prototype.__isYupRef=!0;const Re=t=>t==null;function ht(t){function r({value:n,path:i="",options:s,originalValue:a,schema:l},c,f){const{name:h,test:T,params:v,message:j,skipAbsent:I}=t;let{parent:N,context:$,abortEarly:_=l.spec.abortEarly,disableStackTrace:m=l.spec.disableStackTrace}=s;const x={value:n,parent:N,context:$};function L(S={}){const p=ds(Object.assign({value:n,originalValue:a,label:l.spec.label,path:S.path||i,spec:l.spec,disableStackTrace:S.disableStackTrace||m},v,S.params),x),y=new te(te.formatError(S.message||j,p),n,p.path,S.type||h,p.disableStackTrace);return y.params=p,y}const U=_?c:f;let K={path:i,parent:N,type:h,from:s.from,createError:L,resolve(S){return hs(S,x)},options:s,originalValue:a,schema:l};const P=S=>{te.isError(S)?U(S):S?f(null):U(L())},b=S=>{te.isError(S)?U(S):c(S)};if(I&&Re(n))return P(!0);let Q;try{var D;if(Q=T.call(K,n,K),typeof((D=Q)==null?void 0:D.then)=="function"){if(s.sync)throw new Error(`Validation test of type: "${K.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(Q).then(P,b)}}catch(S){b(S);return}P(Q)}return r.OPTIONS=t,r}function ds(t,r){if(!t)return t;for(const n of Object.keys(t))t[n]=hs(t[n],r);return t}function hs(t,r){return ot.isRef(t)?t.getValue(r.value,r.parent,r.context):t}function gd(t,r,n,i=n){let s,a,l;return r?(tt.forEach(r,(c,f,h)=>{let T=f?c.slice(1,c.length-1):c;t=t.resolve({context:i,parent:s,value:n});let v=t.type==="tuple",j=h?parseInt(T,10):0;if(t.innerType||v){if(v&&!h)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${l}" must contain an index to the tuple element, e.g. "${l}[0]"`);if(n&&j>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${c}, in the path: ${r}. because there is no value at that index. `);s=n,n=n&&n[j],t=v?t.spec.types[j]:t.innerType}if(!h){if(!t.fields||!t.fields[T])throw new Error(`The schema does not contain the path: ${r}. (failed at: ${l} which is a type: "${t.type}")`);s=n,n=n&&n[T],t=t.fields[T]}a=T,l=f?"["+c+"]":"."+c}),{schema:t,parent:s,parentPath:a}):{parent:s,parentPath:r,schema:t}}class fr extends Set{describe(){const r=[];for(const n of this.values())r.push(ot.isRef(n)?n.describe():n);return r}resolveAll(r){let n=[];for(const i of this.values())n.push(r(i));return n}clone(){return new fr(this.values())}merge(r,n){const i=this.clone();return r.forEach(s=>i.add(s)),n.forEach(s=>i.delete(s)),i}}function xt(t,r=new Map){if(mn(t)||!t||typeof t!="object")return t;if(r.has(t))return r.get(t);let n;if(t instanceof Date)n=new Date(t.getTime()),r.set(t,n);else if(t instanceof RegExp)n=new RegExp(t),r.set(t,n);else if(Array.isArray(t)){n=new Array(t.length),r.set(t,n);for(let i=0;i<t.length;i++)n[i]=xt(t[i],r)}else if(t instanceof Map){n=new Map,r.set(t,n);for(const[i,s]of t.entries())n.set(i,xt(s,r))}else if(t instanceof Set){n=new Set,r.set(t,n);for(const i of t)n.add(xt(i,r))}else if(t instanceof Object){n={},r.set(t,n);for(const[i,s]of Object.entries(t))n[i]=xt(s,r)}else throw Error(`Unable to clone ${t}`);return n}function yd(t){if(!(t!=null&&t.length))return;const r=[];let n="",i=!1,s=!1;for(let a=0;a<t.length;a++){const l=t[a];if(l==="["&&!s){n&&(r.push(...n.split(".").filter(Boolean)),n=""),i=!0;continue}if(l==="]"&&!s){n&&(/^\d+$/.test(n)?r.push(n):r.push(n.replace(/^"|"$/g,"")),n=""),i=!1;continue}if(l==='"'){s=!s;continue}if(l==="."&&!i&&!s){n&&(r.push(n),n="");continue}n+=l}return n&&r.push(...n.split(".").filter(Boolean)),r}function jd(t,r){const n=r?`${r}.${t.path}`:t.path;return t.errors.map(i=>({message:i,path:yd(n)}))}function fs(t,r){var n;if(!((n=t.inner)!=null&&n.length)&&t.errors.length)return jd(t,r);const i=r?`${r}.${t.path}`:t.path;return t.inner.flatMap(s=>fs(s,i))}class be{constructor(r){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new fr,this._blacklist=new fr,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Ce.notType)}),this.type=r.type,this._typeCheck=r.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},r==null?void 0:r.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(r){if(this._mutate)return r&&Object.assign(this.spec,r),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=xt(Object.assign({},this.spec,r)),n}label(r){let n=this.clone();return n.spec.label=r,n}meta(...r){if(r.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},r[0]),n}withMutation(r){let n=this._mutate;this._mutate=!0;let i=r(this);return this._mutate=n,i}concat(r){if(!r||r===this)return this;if(r.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${r.type}`);let n=this,i=r.clone();const s=Object.assign({},n.spec,i.spec);return i.spec=s,i.internalTests=Object.assign({},n.internalTests,i.internalTests),i._whitelist=n._whitelist.merge(r._whitelist,r._blacklist),i._blacklist=n._blacklist.merge(r._blacklist,r._whitelist),i.tests=n.tests,i.exclusiveTests=n.exclusiveTests,i.withMutation(a=>{r.tests.forEach(l=>{a.test(l.OPTIONS)})}),i.transforms=[...n.transforms,...i.transforms],i}isType(r){return r==null?!!(this.spec.nullable&&r===null||this.spec.optional&&r===void 0):this._typeCheck(r)}resolve(r){let n=this;if(n.conditions.length){let i=n.conditions;n=n.clone(),n.conditions=[],n=i.reduce((s,a)=>a.resolve(s,r),n),n=n.resolve(r)}return n}resolveOptions(r){var n,i,s,a;return Object.assign({},r,{from:r.from||[],strict:(n=r.strict)!=null?n:this.spec.strict,abortEarly:(i=r.abortEarly)!=null?i:this.spec.abortEarly,recursive:(s=r.recursive)!=null?s:this.spec.recursive,disableStackTrace:(a=r.disableStackTrace)!=null?a:this.spec.disableStackTrace})}cast(r,n={}){let i=this.resolve(Object.assign({value:r},n)),s=n.assert==="ignore-optionality",a=i._cast(r,n);if(n.assert!==!1&&!i.isType(a)){if(s&&Re(a))return a;let l=Be(r),c=Be(a);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${i.type}". 

attempted value: ${l} 
`+(c!==l?`result of cast: ${c}`:""))}return a}_cast(r,n){let i=r===void 0?r:this.transforms.reduce((s,a)=>a.call(this,s,r,this),r);return i===void 0&&(i=this.getDefault(n)),i}_validate(r,n={},i,s){let{path:a,originalValue:l=r,strict:c=this.spec.strict}=n,f=r;c||(f=this._cast(f,Object.assign({assert:!1},n)));let h=[];for(let T of Object.values(this.internalTests))T&&h.push(T);this.runTests({path:a,value:f,originalValue:l,options:n,tests:h},i,T=>{if(T.length)return s(T,f);this.runTests({path:a,value:f,originalValue:l,options:n,tests:this.tests},i,s)})}runTests(r,n,i){let s=!1,{tests:a,value:l,originalValue:c,path:f,options:h}=r,T=$=>{s||(s=!0,n($,l))},v=$=>{s||(s=!0,i($,l))},j=a.length,I=[];if(!j)return v([]);let N={value:l,originalValue:c,path:f,options:h,schema:this};for(let $=0;$<a.length;$++){const _=a[$];_(N,T,function(x){x&&(Array.isArray(x)?I.push(...x):I.push(x)),--j<=0&&v(I)})}}asNestedTest({key:r,index:n,parent:i,parentPath:s,originalParent:a,options:l}){const c=r??n;if(c==null)throw TypeError("Must include `key` or `index` for nested validations");const f=typeof c=="number";let h=i[c];const T=Object.assign({},l,{strict:!0,parent:i,value:h,originalValue:a[c],key:void 0,[f?"index":"key"]:c,path:f||c.includes(".")?`${s||""}[${f?c:`"${c}"`}]`:(s?`${s}.`:"")+r});return(v,j,I)=>this.resolve(T)._validate(h,T,j,I)}validate(r,n){var i;let s=this.resolve(Object.assign({},n,{value:r})),a=(i=n==null?void 0:n.disableStackTrace)!=null?i:s.spec.disableStackTrace;return new Promise((l,c)=>s._validate(r,n,(f,h)=>{te.isError(f)&&(f.value=h),c(f)},(f,h)=>{f.length?c(new te(f,h,void 0,void 0,a)):l(h)}))}validateSync(r,n){var i;let s=this.resolve(Object.assign({},n,{value:r})),a,l=(i=n==null?void 0:n.disableStackTrace)!=null?i:s.spec.disableStackTrace;return s._validate(r,Object.assign({},n,{sync:!0}),(c,f)=>{throw te.isError(c)&&(c.value=f),c},(c,f)=>{if(c.length)throw new te(c,r,void 0,void 0,l);a=f}),a}isValid(r,n){return this.validate(r,n).then(()=>!0,i=>{if(te.isError(i))return!1;throw i})}isValidSync(r,n){try{return this.validateSync(r,n),!0}catch(i){if(te.isError(i))return!1;throw i}}_getDefault(r){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,r):xt(n)}getDefault(r){return this.resolve(r||{})._getDefault(r)}default(r){return arguments.length===0?this._getDefault():this.clone({default:r})}strict(r=!0){return this.clone({strict:r})}nullability(r,n){const i=this.clone({nullable:r});return i.internalTests.nullable=ht({message:n,name:"nullable",test(s){return s===null?this.schema.spec.nullable:!0}}),i}optionality(r,n){const i=this.clone({optional:r});return i.internalTests.optionality=ht({message:n,name:"optionality",test(s){return s===void 0?this.schema.spec.optional:!0}}),i}optional(){return this.optionality(!0)}defined(r=Ce.defined){return this.optionality(!1,r)}nullable(){return this.nullability(!0)}nonNullable(r=Ce.notNull){return this.nullability(!1,r)}required(r=Ce.required){return this.clone().withMutation(n=>n.nonNullable(r).defined(r))}notRequired(){return this.clone().withMutation(r=>r.nullable().optional())}transform(r){let n=this.clone();return n.transforms.push(r),n}test(...r){let n;if(r.length===1?typeof r[0]=="function"?n={test:r[0]}:n=r[0]:r.length===2?n={name:r[0],test:r[1]}:n={name:r[0],message:r[1],test:r[2]},n.message===void 0&&(n.message=Ce.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let i=this.clone(),s=ht(n),a=n.exclusive||n.name&&i.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(i.exclusiveTests[n.name]=!!n.exclusive),i.tests=i.tests.filter(l=>!(l.OPTIONS.name===n.name&&(a||l.OPTIONS.test===s.OPTIONS.test))),i.tests.push(s),i}when(r,n){!Array.isArray(r)&&typeof r!="string"&&(n=r,r=".");let i=this.clone(),s=ls(r).map(a=>new ot(a));return s.forEach(a=>{a.isSibling&&i.deps.push(a.key)}),i.conditions.push(typeof n=="function"?new hr(s,n):hr.fromOptions(s,n)),i}typeError(r){let n=this.clone();return n.internalTests.typeError=ht({message:r,name:"typeError",skipAbsent:!0,test(i){return this.schema._typeCheck(i)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(r,n=Ce.oneOf){let i=this.clone();return r.forEach(s=>{i._whitelist.add(s),i._blacklist.delete(s)}),i.internalTests.whiteList=ht({message:n,name:"oneOf",skipAbsent:!0,test(s){let a=this.schema._whitelist,l=a.resolveAll(this.resolve);return l.includes(s)?!0:this.createError({params:{values:Array.from(a).join(", "),resolved:l}})}}),i}notOneOf(r,n=Ce.notOneOf){let i=this.clone();return r.forEach(s=>{i._blacklist.add(s),i._whitelist.delete(s)}),i.internalTests.blacklist=ht({message:n,name:"notOneOf",test(s){let a=this.schema._blacklist,l=a.resolveAll(this.resolve);return l.includes(s)?this.createError({params:{values:Array.from(a).join(", "),resolved:l}}):!0}}),i}strip(r=!0){let n=this.clone();return n.spec.strip=r,n}describe(r){const n=(r?this.resolve(r):this).clone(),{label:i,meta:s,optional:a,nullable:l}=n.spec;return{meta:s,label:i,optional:a,nullable:l,default:n.getDefault(r),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.filter((f,h,T)=>T.findIndex(v=>v.OPTIONS.name===f.OPTIONS.name)===h).map(f=>{const h=f.OPTIONS.params&&r?ds(Object.assign({},f.OPTIONS.params),r):f.OPTIONS.params;return{name:f.OPTIONS.name,params:h}})}}get"~standard"(){const r=this;return{version:1,vendor:"yup",async validate(i){try{return{value:await r.validate(i,{abortEarly:!1})}}catch(s){if(s instanceof te)return{issues:fs(s)};throw s}}}}}be.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])be.prototype[`${t}At`]=function(r,n,i={}){const{parent:s,parentPath:a,schema:l}=gd(this,r,n,i.context);return l[t](s&&s[a],Object.assign({},i,{parent:s,path:r}))};for(const t of["equals","is"])be.prototype[t]=be.prototype.oneOf;for(const t of["not","nope"])be.prototype[t]=be.prototype.notOneOf;const vd=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function bd(t){const r=qr(t);if(!r)return Date.parse?Date.parse(t):Number.NaN;if(r.z===void 0&&r.plusMinus===void 0)return new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond).valueOf();let n=0;return r.z!=="Z"&&r.plusMinus!==void 0&&(n=r.hourOffset*60+r.minuteOffset,r.plusMinus==="+"&&(n=0-n)),Date.UTC(r.year,r.month,r.day,r.hour,r.minute+n,r.second,r.millisecond)}function qr(t){var r,n;const i=vd.exec(t);return i?{year:$e(i[1]),month:$e(i[2],1)-1,day:$e(i[3],1),hour:$e(i[4]),minute:$e(i[5]),second:$e(i[6]),millisecond:i[7]?$e(i[7].substring(0,3)):0,precision:(r=(n=i[7])==null?void 0:n.length)!=null?r:void 0,z:i[8]||void 0,plusMinus:i[9]||void 0,hourOffset:$e(i[10]),minuteOffset:$e(i[11])}:null}function $e(t,r=0){return Number(t)||r}let Sd=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Cd=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,wd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Td="^\\d{4}-\\d{2}-\\d{2}",Id="\\d{2}:\\d{2}:\\d{2}",Ad="(([+-]\\d{2}(:?\\d{2})?)|Z)",_d=new RegExp(`${Td}T${Id}(\\.\\d+)?${Ad}$`),Ed=t=>Re(t)||t===t.trim(),Od={}.toString();function kt(){return new xs}class xs extends be{constructor(){super({type:"string",check(r){return r instanceof String&&(r=r.valueOf()),typeof r=="string"}}),this.withMutation(()=>{this.transform((r,n,i)=>{if(!i.spec.coerce||i.isType(r)||Array.isArray(r))return r;const s=r!=null&&r.toString?r.toString():r;return s===Od?r:s})})}required(r){return super.required(r).withMutation(n=>n.test({message:r||Ce.required,name:"required",skipAbsent:!0,test:i=>!!i.length}))}notRequired(){return super.notRequired().withMutation(r=>(r.tests=r.tests.filter(n=>n.OPTIONS.name!=="required"),r))}length(r,n=re.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:r},skipAbsent:!0,test(i){return i.length===this.resolve(r)}})}min(r,n=re.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:r},skipAbsent:!0,test(i){return i.length>=this.resolve(r)}})}max(r,n=re.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:r},skipAbsent:!0,test(i){return i.length<=this.resolve(r)}})}matches(r,n){let i=!1,s,a;return n&&(typeof n=="object"?{excludeEmptyString:i=!1,message:s,name:a}=n:s=n),this.test({name:a||"matches",message:s||re.matches,params:{regex:r},skipAbsent:!0,test:l=>l===""&&i||l.search(r)!==-1})}email(r=re.email){return this.matches(Sd,{name:"email",message:r,excludeEmptyString:!0})}url(r=re.url){return this.matches(Cd,{name:"url",message:r,excludeEmptyString:!0})}uuid(r=re.uuid){return this.matches(wd,{name:"uuid",message:r,excludeEmptyString:!1})}datetime(r){let n="",i,s;return r&&(typeof r=="object"?{message:n="",allowOffset:i=!1,precision:s=void 0}=r:n=r),this.matches(_d,{name:"datetime",message:n||re.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||re.datetime_offset,params:{allowOffset:i},skipAbsent:!0,test:a=>{if(!a||i)return!0;const l=qr(a);return l?!!l.z:!1}}).test({name:"datetime_precision",message:n||re.datetime_precision,params:{precision:s},skipAbsent:!0,test:a=>{if(!a||s==null)return!0;const l=qr(a);return l?l.precision===s:!1}})}ensure(){return this.default("").transform(r=>r===null?"":r)}trim(r=re.trim){return this.transform(n=>n!=null?n.trim():n).test({message:r,name:"trim",test:Ed})}lowercase(r=re.lowercase){return this.transform(n=>Re(n)?n:n.toLowerCase()).test({message:r,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Re(n)||n===n.toLowerCase()})}uppercase(r=re.uppercase){return this.transform(n=>Re(n)?n:n.toUpperCase()).test({message:r,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Re(n)||n===n.toUpperCase()})}}kt.prototype=xs.prototype;let $d=t=>t!=+t;function ps(){return new ms}class ms extends be{constructor(){super({type:"number",check(r){return r instanceof Number&&(r=r.valueOf()),typeof r=="number"&&!$d(r)}}),this.withMutation(()=>{this.transform((r,n,i)=>{if(!i.spec.coerce)return r;let s=r;if(typeof s=="string"){if(s=s.replace(/\s/g,""),s==="")return NaN;s=+s}return i.isType(s)||s===null?s:parseFloat(s)})})}min(r,n=Le.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:r},skipAbsent:!0,test(i){return i>=this.resolve(r)}})}max(r,n=Le.max){return this.test({message:n,name:"max",exclusive:!0,params:{max:r},skipAbsent:!0,test(i){return i<=this.resolve(r)}})}lessThan(r,n=Le.lessThan){return this.test({message:n,name:"max",exclusive:!0,params:{less:r},skipAbsent:!0,test(i){return i<this.resolve(r)}})}moreThan(r,n=Le.moreThan){return this.test({message:n,name:"min",exclusive:!0,params:{more:r},skipAbsent:!0,test(i){return i>this.resolve(r)}})}positive(r=Le.positive){return this.moreThan(0,r)}negative(r=Le.negative){return this.lessThan(0,r)}integer(r=Le.integer){return this.test({name:"integer",message:r,skipAbsent:!0,test:n=>Number.isInteger(n)})}truncate(){return this.transform(r=>Re(r)?r:r|0)}round(r){var n;let i=["ceil","floor","round","trunc"];if(r=((n=r)==null?void 0:n.toLowerCase())||"round",r==="trunc")return this.truncate();if(i.indexOf(r.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+i.join(", "));return this.transform(s=>Re(s)?s:Math[r](s))}}ps.prototype=ms.prototype;let Fd=new Date(""),kd=t=>Object.prototype.toString.call(t)==="[object Date]";class Tr extends be{constructor(){super({type:"date",check(r){return kd(r)&&!isNaN(r.getTime())}}),this.withMutation(()=>{this.transform((r,n,i)=>!i.spec.coerce||i.isType(r)||r===null?r:(r=bd(r),isNaN(r)?Tr.INVALID_DATE:new Date(r)))})}prepareParam(r,n){let i;if(ot.isRef(r))i=r;else{let s=this.cast(r);if(!this._typeCheck(s))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);i=s}return i}min(r,n=Wr.min){let i=this.prepareParam(r,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:r},skipAbsent:!0,test(s){return s>=this.resolve(i)}})}max(r,n=Wr.max){let i=this.prepareParam(r,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:r},skipAbsent:!0,test(s){return s<=this.resolve(i)}})}}Tr.INVALID_DATE=Fd;Tr.prototype;function Dd(t,r=[]){let n=[],i=new Set,s=new Set(r.map(([l,c])=>`${l}-${c}`));function a(l,c){let f=tt.split(l)[0];i.add(f),s.has(`${c}-${f}`)||n.push([c,f])}for(const l of Object.keys(t)){let c=t[l];i.add(l),ot.isRef(c)&&c.isSibling?a(c.path,l):mn(c)&&"deps"in c&&c.deps.forEach(f=>a(f,l))}return ad.array(Array.from(i),n).reverse()}function di(t,r){let n=1/0;return t.some((i,s)=>{var a;if((a=r.path)!=null&&a.includes(i))return n=s,!0}),n}function gs(t){return(r,n)=>di(t,r)-di(t,n)}const Rd=(t,r,n)=>{if(typeof t!="string")return t;let i=t;try{i=JSON.parse(t)}catch{}return n.isType(i)?i:t};function rr(t){if("fields"in t){const r={};for(const[n,i]of Object.entries(t.fields))r[n]=rr(i);return t.setFields(r)}if(t.type==="array"){const r=t.optional();return r.innerType&&(r.innerType=rr(r.innerType)),r}return t.type==="tuple"?t.optional().clone({types:t.spec.types.map(rr)}):"optional"in t?t.optional():t}const Pd=(t,r)=>{const n=[...tt.normalizePath(r)];if(n.length===1)return n[0]in t;let i=n.pop(),s=tt.getter(tt.join(n),!0)(t);return!!(s&&i in s)};let hi=t=>Object.prototype.toString.call(t)==="[object Object]";function fi(t,r){let n=Object.keys(t.fields);return Object.keys(r).filter(i=>n.indexOf(i)===-1)}const Md=gs([]);function ys(t){return new js(t)}class js extends be{constructor(r){super({type:"object",check(n){return hi(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=Md,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{r&&this.shape(r)})}_cast(r,n={}){var i;let s=super._cast(r,n);if(s===void 0)return this.getDefault(n);if(!this._typeCheck(s))return s;let a=this.fields,l=(i=n.stripUnknown)!=null?i:this.spec.noUnknown,c=[].concat(this._nodes,Object.keys(s).filter(v=>!this._nodes.includes(v))),f={},h=Object.assign({},n,{parent:f,__validating:n.__validating||!1}),T=!1;for(const v of c){let j=a[v],I=v in s;if(j){let N,$=s[v];h.path=(n.path?`${n.path}.`:"")+v,j=j.resolve({value:$,context:n.context,parent:f});let _=j instanceof be?j.spec:void 0,m=_==null?void 0:_.strict;if(_!=null&&_.strip){T=T||v in s;continue}N=!n.__validating||!m?j.cast(s[v],h):s[v],N!==void 0&&(f[v]=N)}else I&&!l&&(f[v]=s[v]);(I!==v in f||f[v]!==s[v])&&(T=!0)}return T?f:s}_validate(r,n={},i,s){let{from:a=[],originalValue:l=r,recursive:c=this.spec.recursive}=n;n.from=[{schema:this,value:l},...a],n.__validating=!0,n.originalValue=l,super._validate(r,n,i,(f,h)=>{if(!c||!hi(h)){s(f,h);return}l=l||h;let T=[];for(let v of this._nodes){let j=this.fields[v];!j||ot.isRef(j)||T.push(j.asNestedTest({options:n,key:v,parent:h,parentPath:n.path,originalParent:l}))}this.runTests({tests:T,value:h,originalValue:l,options:n},i,v=>{s(v.sort(this._sortErrors).concat(f),h)})})}clone(r){const n=super.clone(r);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(r){let n=super.concat(r),i=n.fields;for(let[s,a]of Object.entries(this.fields)){const l=i[s];i[s]=l===void 0?a:l}return n.withMutation(s=>s.setFields(i,[...this._excludedEdges,...r._excludedEdges]))}_getDefault(r){if("default"in this.spec)return super._getDefault(r);if(!this._nodes.length)return;let n={};return this._nodes.forEach(i=>{var s;const a=this.fields[i];let l=r;(s=l)!=null&&s.value&&(l=Object.assign({},l,{parent:l.value,value:l.value[i]})),n[i]=a&&"getDefault"in a?a.getDefault(l):void 0}),n}setFields(r,n){let i=this.clone();return i.fields=r,i._nodes=Dd(r,n),i._sortErrors=gs(Object.keys(r)),n&&(i._excludedEdges=n),i}shape(r,n=[]){return this.clone().withMutation(i=>{let s=i._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),s=[...i._excludedEdges,...n]),i.setFields(Object.assign(i.fields,r),s)})}partial(){const r={};for(const[n,i]of Object.entries(this.fields))r[n]="optional"in i&&i.optional instanceof Function?i.optional():i;return this.setFields(r)}deepPartial(){return rr(this)}pick(r){const n={};for(const i of r)this.fields[i]&&(n[i]=this.fields[i]);return this.setFields(n,this._excludedEdges.filter(([i,s])=>r.includes(i)&&r.includes(s)))}omit(r){const n=[];for(const i of Object.keys(this.fields))r.includes(i)||n.push(i);return this.pick(n)}from(r,n,i){let s=tt.getter(r,!0);return this.transform(a=>{if(!a)return a;let l=a;return Pd(a,r)&&(l=Object.assign({},a),i||delete l[r],l[n]=s(a)),l})}json(){return this.transform(Rd)}exact(r){return this.test({name:"exact",exclusive:!0,message:r||tr.exact,test(n){if(n==null)return!0;const i=fi(this.schema,n);return i.length===0||this.createError({params:{properties:i.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(r=!0,n=tr.noUnknown){typeof r!="boolean"&&(n=r,r=!0);let i=this.test({name:"noUnknown",exclusive:!0,message:n,test(s){if(s==null)return!0;const a=fi(this.schema,s);return!r||a.length===0||this.createError({params:{unknown:a.join(", ")}})}});return i.spec.noUnknown=r,i}unknown(r=!0,n=tr.noUnknown){return this.noUnknown(!r,n)}transformKeys(r){return this.transform(n=>{if(!n)return n;const i={};for(const s of Object.keys(n))i[r(s)]=n[s];return i})}camelCase(){return this.transformKeys(Dr.camelCase)}snakeCase(){return this.transformKeys(Dr.snakeCase)}constantCase(){return this.transformKeys(r=>Dr.snakeCase(r).toUpperCase())}describe(r){const n=(r?this.resolve(r):this).clone(),i=super.describe(r);i.fields={};for(const[a,l]of Object.entries(n.fields)){var s;let c=r;(s=c)!=null&&s.value&&(c=Object.assign({},c,{parent:c.value,value:c.value[a]})),i.fields[a]=l.describe(c)}return i}}ys.prototype=js.prototype;const Nd=ys({patientId:kt().required("Patient is required"),category:kt().required("Category is required"),priority:kt().required("Priority is required"),issueDescription:kt().required("Issue description is required").min(10,"Description must be at least 10 characters"),estimatedDuration:ps().min(1,"Duration must be at least 1 day").max(365,"Duration cannot exceed 365 days")}),xi=()=>{const t=mr(),{id:r}=gr(),n=!!r,[i,s]=g.useState([]),[a,l]=g.useState(!1),[c,f]=g.useState(null),[h,T]=g.useState("drug_therapy_problem"),[v,j]=g.useState(""),{data:I,isLoading:N}=Ai(r||""),{data:$}=Ca(h),{data:_,isLoading:m}=wi(v),x=wa(),L=_i(),U=I==null?void 0:I.data,K=($==null?void 0:$.data)||[],P=pt.useMemo(()=>{var S;try{return(((S=_==null?void 0:_.data)==null?void 0:S.results)||[]).map(y=>({_id:y._id,firstName:y.firstName||"",lastName:y.lastName||"",dateOfBirth:y.dateOfBirth||y.dob||"",mrn:y.mrn||""}))}catch(p){return console.error("Error processing patient search results:",p),[]}},[_]),b=Du({initialValues:{patientId:"",category:"drug_therapy_problem",priority:"medium",issueDescription:"",estimatedDuration:7,strategies:[],relatedDTPIds:[]},validationSchema:Nd,onSubmit:async S=>{try{const p={...S,strategies:i};n&&r?await L.mutateAsync({interventionId:r,updates:p}):await x.mutateAsync(p),t("/pharmacy/clinical-interventions/list")}catch(p){console.error("Form submission error:",p)}}});g.useEffect(()=>{n&&U&&(b.setValues({patientId:U.patientId,category:U.category,priority:U.priority,issueDescription:U.issueDescription,estimatedDuration:U.estimatedDuration||7,strategies:U.strategies||[],relatedDTPIds:U.relatedDTPIds||[]}),s(U.strategies||[]),T(U.category),U.patient&&f(U.patient))},[U,n,b]);const J=S=>{s(p=>[...p,S]),l(!1)},Q=S=>{s(p=>p.filter((y,M)=>M!==S))},D=S=>{const p={type:S.type,description:S.description,rationale:S.rationale,expectedOutcome:S.expectedOutcome,priority:S.priority};J(p)};return n&&N?e.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:e.jsx(Ie,{})}):e.jsxs(d,{children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(o,{variant:"h5",component:"h2",children:n?"Edit Clinical Intervention":"Create New Clinical Intervention"}),e.jsxs(d,{display:"flex",gap:1,children:[e.jsx(B,{variant:"outlined",startIcon:e.jsx(na,{}),onClick:()=>t("/pharmacy/clinical-interventions/list"),children:"Cancel"}),e.jsx(B,{variant:"contained",startIcon:e.jsx(ra,{}),onClick:()=>b.handleSubmit(),disabled:b.isSubmitting||x.isPending||L.isPending,children:b.isSubmitting||x.isPending||L.isPending?"Saving...":n?"Update":"Create"})]})]}),e.jsx("form",{onSubmit:b.handleSubmit,children:e.jsxs(d,{display:"flex",flexDirection:"column",gap:3,children:[e.jsx(d,{children:e.jsx(k,{children:e.jsxs(R,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Basic Information"}),e.jsxs(d,{display:"flex",flexWrap:"wrap",gap:2,children:[e.jsx(d,{sx:{width:{xs:"100%",md:"50%"}},children:e.jsxs(d,{children:[e.jsx(o,{variant:"subtitle2",gutterBottom:!0,children:"Patient *"}),c?e.jsxs(d,{display:"flex",alignItems:"center",gap:1,p:2,border:1,borderColor:"divider",borderRadius:1,children:[e.jsx(Je,{color:"action"}),e.jsxs(d,{flex:1,children:[e.jsxs(o,{variant:"body2",children:[c.firstName," ",c.lastName]}),e.jsxs(o,{variant:"caption",color:"text.secondary",children:[c.mrn&&`MRN: ${c.mrn}`,c.mrn&&c.dateOfBirth&&" â€¢ ",c.dateOfBirth&&`DOB: ${c.dateOfBirth}`]})]}),e.jsx(B,{size:"small",onClick:()=>{f(null),b.setFieldValue("patientId","")},children:"Change"})]}):e.jsx(Ti,{options:P,loading:m,getOptionLabel:S=>{const p=`${S.firstName} ${S.lastName}`.trim(),y=S.mrn?` (MRN: ${S.mrn})`:"",M=S.dateOfBirth?` - DOB: ${S.dateOfBirth}`:"";return`${p}${y}${M}`},onChange:(S,p)=>{f(p),b.setFieldValue("patientId",(p==null?void 0:p._id)||"")},onInputChange:(S,p)=>{j(p)},renderInput:S=>e.jsx(oe,{...S,placeholder:"Search patients by name or MRN...",error:b.touched.patientId&&!!b.errors.patientId,helperText:b.touched.patientId&&b.errors.patientId,InputProps:{...S.InputProps,endAdornment:e.jsxs(e.Fragment,{children:[m?e.jsx(Ie,{color:"inherit",size:20}):null,S.InputProps.endAdornment]})}}),renderOption:(S,p)=>e.jsx(d,{component:"li",...S,children:e.jsxs(d,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:[e.jsxs(o,{variant:"body2",fontWeight:500,children:[p.firstName," ",p.lastName]}),e.jsxs(o,{variant:"caption",color:"text.secondary",children:[p.mrn&&`MRN: ${p.mrn}`,p.mrn&&p.dateOfBirth&&" â€¢ ",p.dateOfBirth&&`DOB: ${p.dateOfBirth}`]})]})}),noOptionsText:v.length<2?"Type at least 2 characters to search patients":m?"Searching patients...":"No patients found",filterOptions:S=>S})]})}),e.jsx(d,{sx:{width:{xs:"100%",md:"50%"}},children:e.jsxs(se,{fullWidth:!0,error:b.touched.category&&!!b.errors.category,children:[e.jsx(ae,{children:"Category *"}),e.jsxs(le,{name:"category",value:b.values.category,label:"Category *",onChange:S=>{b.handleChange(S),T(S.target.value)},children:[e.jsx(w,{value:"drug_therapy_problem",children:"Drug Therapy Problem"}),e.jsx(w,{value:"adverse_drug_reaction",children:"Adverse Drug Reaction"}),e.jsx(w,{value:"medication_nonadherence",children:"Medication Non-adherence"}),e.jsx(w,{value:"drug_interaction",children:"Drug Interaction"}),e.jsx(w,{value:"dosing_issue",children:"Dosing Issue"}),e.jsx(w,{value:"contraindication",children:"Contraindication"}),e.jsx(w,{value:"other",children:"Other"})]})]})}),e.jsx(d,{sx:{width:{xs:"100%",md:"50%"}},children:e.jsxs(se,{fullWidth:!0,error:b.touched.priority&&!!b.errors.priority,children:[e.jsx(ae,{children:"Priority *"}),e.jsxs(le,{name:"priority",value:b.values.priority,label:"Priority *",onChange:b.handleChange,children:[e.jsx(w,{value:"low",children:"Low"}),e.jsx(w,{value:"medium",children:"Medium"}),e.jsx(w,{value:"high",children:"High"}),e.jsx(w,{value:"critical",children:"Critical"})]})]})}),e.jsx(d,{sx:{width:{xs:"100%",md:"50%"}},children:e.jsx(oe,{fullWidth:!0,name:"estimatedDuration",label:"Estimated Duration (days)",type:"number",value:b.values.estimatedDuration,onChange:b.handleChange,error:b.touched.estimatedDuration&&!!b.errors.estimatedDuration,helperText:b.touched.estimatedDuration&&b.errors.estimatedDuration})}),e.jsx(d,{children:e.jsx(oe,{fullWidth:!0,multiline:!0,rows:4,name:"issueDescription",label:"Issue Description *",value:b.values.issueDescription,onChange:b.handleChange,error:b.touched.issueDescription&&!!b.errors.issueDescription,helperText:b.touched.issueDescription&&b.errors.issueDescription,placeholder:"Describe the clinical issue or problem that requires intervention..."})})]})]})})}),e.jsx(d,{children:e.jsx(k,{children:e.jsxs(R,{children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(o,{variant:"h6",children:"Intervention Strategies"}),e.jsx(B,{variant:"outlined",startIcon:e.jsx(Ve,{}),onClick:()=>l(!0),children:"Add Strategy"})]}),K.length>0&&e.jsxs(Fs,{sx:{mb:2},children:[e.jsx(ks,{expandIcon:e.jsx(Dt,{}),children:e.jsxs(o,{variant:"subtitle1",children:["Recommended Strategies (",K.length,")"]})}),e.jsx(Ds,{children:e.jsx(ir,{children:K.map((S,p)=>e.jsxs(sr,{divider:!0,children:[e.jsx(ar,{primary:S.label,secondary:S.description}),e.jsx(Rr,{children:e.jsx(B,{size:"small",onClick:()=>D(S),children:"Add"})})]},p))})})]}),i.length>0?e.jsx(ir,{children:i.map((S,p)=>e.jsxs(sr,{divider:!0,children:[e.jsx(ar,{primary:e.jsxs(d,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(o,{variant:"body1",children:S.description}),e.jsx(Z,{label:S.priority,size:"small",color:S.priority==="primary"?"primary":"default"})]}),secondary:e.jsxs(d,{children:[e.jsxs(o,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Rationale:"})," ",S.rationale]}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Expected Outcome:"})," ",S.expectedOutcome]})]})}),e.jsx(Rr,{children:e.jsx(ge,{edge:"end",color:"error",onClick:()=>Q(p),children:e.jsx(Si,{})})})]},p))}):e.jsx(de,{severity:"info",children:'No strategies added yet. Click "Add Strategy" to add intervention strategies.'})]})})})]})}),e.jsx(Ld,{open:a,onClose:()=>l(!1),onAdd:J})]})},Ld=({open:t,onClose:r,onAdd:n})=>{const[i,s]=g.useState({type:"medication_review",description:"",rationale:"",expectedOutcome:"",priority:"primary"}),a=()=>{i.description&&i.rationale&&i.expectedOutcome&&(n(i),s({type:"medication_review",description:"",rationale:"",expectedOutcome:"",priority:"primary"}))};return e.jsxs(Qr,{open:t,onClose:r,maxWidth:"md",fullWidth:!0,children:[e.jsx(Yr,{children:"Add Intervention Strategy"}),e.jsx(Xr,{children:e.jsxs(d,{display:"flex",flexWrap:"wrap",gap:2,sx:{mt:1},children:[e.jsx(d,{sx:{width:{xs:"100%",md:"50%"}},children:e.jsxs(se,{fullWidth:!0,children:[e.jsx(ae,{children:"Strategy Type"}),e.jsxs(le,{value:i.type,label:"Strategy Type",onChange:l=>s(c=>({...c,type:l.target.value})),children:[e.jsx(w,{value:"medication_review",children:"Medication Review"}),e.jsx(w,{value:"dose_adjustment",children:"Dose Adjustment"}),e.jsx(w,{value:"alternative_therapy",children:"Alternative Therapy"}),e.jsx(w,{value:"discontinuation",children:"Discontinuation"}),e.jsx(w,{value:"additional_monitoring",children:"Additional Monitoring"}),e.jsx(w,{value:"patient_counseling",children:"Patient Counseling"}),e.jsx(w,{value:"physician_consultation",children:"Physician Consultation"}),e.jsx(w,{value:"custom",children:"Custom"})]})]})}),e.jsx(d,{sx:{width:{xs:"100%",md:"50%"}},children:e.jsxs(se,{fullWidth:!0,children:[e.jsx(ae,{children:"Priority"}),e.jsxs(le,{value:i.priority,label:"Priority",onChange:l=>s(c=>({...c,priority:l.target.value})),children:[e.jsx(w,{value:"primary",children:"Primary"}),e.jsx(w,{value:"secondary",children:"Secondary"})]})]})}),e.jsx(d,{children:e.jsx(oe,{fullWidth:!0,label:"Description",value:i.description,onChange:l=>s(c=>({...c,description:l.target.value})),placeholder:"Describe the intervention strategy..."})}),e.jsx(d,{children:e.jsx(oe,{fullWidth:!0,multiline:!0,rows:3,label:"Rationale",value:i.rationale,onChange:l=>s(c=>({...c,rationale:l.target.value})),placeholder:"Explain the reasoning behind this strategy..."})}),e.jsx(d,{children:e.jsx(oe,{fullWidth:!0,multiline:!0,rows:2,label:"Expected Outcome",value:i.expectedOutcome,onChange:l=>s(c=>({...c,expectedOutcome:l.target.value})),placeholder:"Describe the expected outcome of this strategy..."})})]})}),e.jsxs(Jr,{children:[e.jsx(B,{onClick:r,children:"Cancel"}),e.jsx(B,{onClick:a,variant:"contained",disabled:!i.description||!i.rationale||!i.expectedOutcome,children:"Add Strategy"})]})]})},Xt=({children:t,value:r,index:n})=>e.jsx("div",{hidden:r!==n,children:r===n&&e.jsx(d,{sx:{py:3},children:t})}),zd=()=>{var I,N,$;const{id:t}=gr(),r=mr(),[n,i]=g.useState(0),{data:s,isLoading:a,error:l,refetch:c}=Ai(t||""),f=_i(),h=s==null?void 0:s.data,T=async _=>{t&&(await f.mutateAsync({interventionId:t,updates:{status:_}}),c())},v=_=>{switch(_){case"critical":return"error";case"high":return"warning";case"medium":return"info";case"low":return"default";default:return"default"}},j=_=>{switch(_){case"completed":return"success";case"in_progress":return"info";case"implemented":return"primary";case"planning":return"warning";case"identified":return"default";case"cancelled":return"error";default:return"default"}};return a?e.jsx(d,{display:"flex",justifyContent:"center",p:4,children:e.jsx(Ie,{})}):l||!h?e.jsx(de,{severity:"error",sx:{m:3},children:(l==null?void 0:l.message)||"Failed to load intervention details"}):e.jsxs(d,{p:3,children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsxs(d,{children:[e.jsx(o,{variant:"h4",component:"h1",gutterBottom:!0,children:"Clinical Intervention Details"}),e.jsxs(d,{display:"flex",gap:1,children:[e.jsx(Z,{label:h.priority.toUpperCase(),color:v(h.priority)}),e.jsx(Z,{label:h.status.replace(/_/g," ").replace(/\b\w/g,_=>_.toUpperCase()),color:j(h.status)})]})]}),e.jsxs(d,{display:"flex",gap:2,children:[e.jsx(B,{variant:"contained",startIcon:e.jsx(ur,{}),onClick:()=>r(`/interventions/${t}/edit`),children:"Edit"}),e.jsxs(se,{size:"small",sx:{minWidth:120},children:[e.jsx(ae,{children:"Status"}),e.jsxs(le,{value:h.status,label:"Status",onChange:_=>T(_.target.value),children:[e.jsx(w,{value:"identified",children:"Identified"}),e.jsx(w,{value:"planning",children:"Planning"}),e.jsx(w,{value:"in_progress",children:"In Progress"}),e.jsx(w,{value:"implemented",children:"Implemented"}),e.jsx(w,{value:"completed",children:"Completed"}),e.jsx(w,{value:"cancelled",children:"Cancelled"})]})]})]})]}),e.jsx(k,{sx:{mb:3},children:e.jsxs(R,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Patient Information"}),e.jsxs(d,{display:"flex",flexWrap:"wrap",gap:2,children:[e.jsx(d,{sx:{width:{xs:"100%",md:"50%"}},children:e.jsxs(d,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(Je,{color:"action"}),e.jsxs(d,{children:[e.jsx(o,{variant:"body1",fontWeight:"medium",children:h.patient?`${h.patient.firstName} ${h.patient.lastName}`:"Unknown Patient"}),((I=h.patient)==null?void 0:I.dateOfBirth)&&e.jsxs(o,{variant:"body2",color:"text.secondary",children:["DOB:"," ",G(ye(h.patient.dateOfBirth),"MMM dd, yyyy")]})]})]})}),e.jsx(d,{sx:{width:{xs:"100%",md:"50%"}},children:e.jsxs(d,{display:"flex",gap:2,children:[((N=h.patient)==null?void 0:N.phoneNumber)&&e.jsxs(d,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Rs,{fontSize:"small",color:"action"}),e.jsx(o,{variant:"body2",children:h.patient.phoneNumber})]}),(($=h.patient)==null?void 0:$.email)&&e.jsxs(d,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Ps,{fontSize:"small",color:"action"}),e.jsx(o,{variant:"body2",children:h.patient.email})]})]})})]})]})}),e.jsxs(d,{display:"flex",flexWrap:"wrap",gap:2,children:[e.jsx(d,{sx:{width:{xs:"100%",md:"66%"}},children:e.jsxs(Bt,{sx:{mb:3},children:[e.jsxs(en,{value:n,onChange:(_,m)=>i(m),sx:{borderBottom:1,borderColor:"divider"},children:[e.jsx(we,{label:"Overview"}),e.jsx(we,{label:"Strategies"}),e.jsx(we,{label:"Outcomes"}),e.jsx(we,{label:"Timeline"})]}),e.jsx(Xt,{value:n,index:0,children:e.jsx(k,{children:e.jsxs(R,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Issue Description"}),e.jsx(o,{variant:"body1",paragraph:!0,children:h.issueDescription}),e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Intervention Details"}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Category:"," ",h.category.replace(/_/g," ").replace(/\b\w/g,_=>_.toUpperCase())]}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Priority: ",h.priority.toUpperCase()]}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Status:"," ",h.status.replace(/_/g," ").replace(/\b\w/g,_=>_.toUpperCase())]})]})})}),e.jsx(Xt,{value:n,index:1,children:e.jsx(k,{children:e.jsxs(R,{children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(o,{variant:"h6",children:"Strategies"}),e.jsx(B,{variant:"outlined",startIcon:e.jsx(Ve,{}),onClick:()=>console.log("Add Strategy"),children:"Add Strategy"})]}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"No strategies have been added yet."})]})})}),e.jsx(Xt,{value:n,index:2,children:e.jsx(k,{children:e.jsxs(R,{children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(o,{variant:"h6",children:"Outcomes"}),e.jsx(B,{variant:"outlined",startIcon:e.jsx(ee,{}),onClick:()=>console.log("Record Outcome"),children:"Record Outcome"})]}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"No outcomes have been recorded yet."})]})})}),e.jsx(Xt,{value:n,index:3,children:e.jsx(k,{children:e.jsxs(R,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Intervention Timeline"}),e.jsxs(ia,{children:[e.jsxs(Tn,{children:[e.jsx(In,{color:"text.secondary",children:G(ye(h.createdAt),"MMM dd, yyyy HH:mm")}),e.jsxs(An,{children:[e.jsx(_n,{color:"primary",children:e.jsx(Hr,{})}),e.jsx(sa,{})]}),e.jsxs(En,{children:[e.jsx(o,{variant:"h6",component:"span",children:"Intervention Created"}),e.jsx(o,{children:"Issue identified and recorded"})]})]}),h.updatedAt&&h.updatedAt!==h.createdAt&&e.jsxs(Tn,{children:[e.jsx(In,{color:"text.secondary",children:G(ye(h.updatedAt),"MMM dd, yyyy HH:mm")}),e.jsx(An,{children:e.jsx(_n,{color:"info",children:e.jsx(ur,{})})}),e.jsxs(En,{children:[e.jsx(o,{variant:"h6",component:"span",children:"Intervention Updated"}),e.jsx(o,{children:"Last modification made"})]})]})]})]})})})]})}),e.jsx(d,{sx:{width:{xs:"100%",md:"33%"}},children:e.jsx(k,{children:e.jsxs(R,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Quick Actions"}),e.jsxs(d,{display:"flex",flexDirection:"column",gap:1,children:[e.jsx(B,{variant:"outlined",startIcon:e.jsx(Ms,{}),onClick:()=>console.log("Assign Team Member"),fullWidth:!0,children:"Assign Team Member"}),e.jsx(B,{variant:"outlined",startIcon:e.jsx(ee,{}),onClick:()=>console.log("Record Outcome"),fullWidth:!0,children:"Record Outcome"}),e.jsx(B,{variant:"outlined",startIcon:e.jsx(ve,{}),onClick:()=>console.log("Schedule Follow-up"),fullWidth:!0,children:"Schedule Follow-up"})]})]})})})]})]})},pi=()=>{gr();const t=mr(),[r,n]=g.useState(null),[i,s]=g.useState(""),{data:a,isLoading:l}=wi(i),{data:c,isLoading:f,error:h,refetch:T}=Sa((r==null?void 0:r._id)||""),v=g.useMemo(()=>(c==null?void 0:c.data)||[],[c]),j=pt.useMemo(()=>{var m;try{return(((m=a==null?void 0:a.data)==null?void 0:m.results)||[]).map(L=>({_id:L._id,firstName:L.firstName||"",lastName:L.lastName||"",dateOfBirth:L.dateOfBirth||L.dob||"",mrn:L.mrn||""}))}catch(x){return console.error("Error processing patient search results:",x),[]}},[a]),I=g.useMemo(()=>v.length?{total:v.length,active:v.filter(m=>["identified","planning","in_progress","implemented"].includes(m.status)).length,completed:v.filter(m=>m.status==="completed").length,highPriority:v.filter(m=>["high","critical"].includes(m.priority)).length}:{total:0,active:0,completed:0,highPriority:0},[v]),N=m=>{switch(m){case"critical":return"error";case"high":return"warning";case"medium":return"info";case"low":return"default";default:return"default"}},$=m=>{switch(m){case"completed":return"success";case"in_progress":return"info";case"implemented":return"primary";case"planning":return"warning";case"identified":return"default";case"cancelled":return"error";default:return"default"}},_=m=>{switch(m){case"completed":return e.jsx(Te,{});case"in_progress":return e.jsx(ve,{});case"implemented":return e.jsx(Te,{});case"planning":return e.jsx(ve,{});case"identified":return e.jsx(Ue,{});case"cancelled":return e.jsx(Ue,{});default:return e.jsx(ve,{})}};return e.jsxs(d,{children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(o,{variant:"h5",component:"h2",children:"Patient Interventions"}),r&&e.jsx(B,{variant:"contained",startIcon:e.jsx(Ve,{}),onClick:()=>t(`/pharmacy/clinical-interventions/create?patientId=${r._id}`),children:"Create New Intervention"})]}),e.jsx(k,{sx:{mb:3},children:e.jsxs(R,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Select Patient"}),e.jsx(Ti,{options:j,loading:l,getOptionLabel:m=>{const x=`${m.firstName} ${m.lastName}`.trim(),L=m.mrn?` (MRN: ${m.mrn})`:"",U=m.dateOfBirth?` - DOB: ${m.dateOfBirth}`:"";return`${x}${L}${U}`},value:r,onChange:(m,x)=>{n(x),t(x?`/pharmacy/clinical-interventions/patients/${x._id}`:"/pharmacy/clinical-interventions/patients")},onInputChange:(m,x)=>{s(x)},renderInput:m=>e.jsx(oe,{...m,placeholder:"Search patients by name or MRN...",InputProps:{...m.InputProps,startAdornment:e.jsx(bi,{color:"action",sx:{mr:1}}),endAdornment:e.jsxs(e.Fragment,{children:[l?e.jsx(Ie,{color:"inherit",size:20}):null,m.InputProps.endAdornment]})}}),renderOption:(m,x)=>e.jsxs(d,{component:"li",...m,children:[e.jsx(Je,{sx:{mr:2,color:"action.active"}}),e.jsxs(d,{children:[e.jsxs(o,{variant:"body1",children:[x.firstName," ",x.lastName]}),e.jsxs(o,{variant:"caption",color:"text.secondary",children:[x.mrn&&`MRN: ${x.mrn}`,x.mrn&&x.dateOfBirth&&" â€¢ ",x.dateOfBirth&&`DOB: ${x.dateOfBirth}`]})]})]}),noOptionsText:i.length<2?"Type at least 2 characters to search patients":l?"Searching patients...":"No patients found",filterOptions:m=>m})]})}),r&&e.jsxs(e.Fragment,{children:[e.jsxs(z,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(z,{item:!0,xs:12,md:6,children:e.jsx(k,{children:e.jsxs(R,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Patient Information"}),e.jsxs(d,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(Je,{color:"primary",sx:{fontSize:40}}),e.jsxs(d,{children:[e.jsxs(o,{variant:"h6",children:[r.firstName," ",r.lastName]}),r.mrn&&e.jsxs(o,{variant:"body2",color:"text.secondary",children:["MRN: ",r.mrn]}),r.dateOfBirth&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Date of Birth:"," ",G(ye(r.dateOfBirth),"MMM dd, yyyy")]}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Age:"," ",new Date().getFullYear()-new Date(r.dateOfBirth).getFullYear()," ","years"]})]})]})]})]})})}),e.jsx(z,{item:!0,xs:12,md:6,children:e.jsx(k,{children:e.jsxs(R,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Intervention Statistics"}),e.jsxs(z,{container:!0,spacing:2,children:[e.jsx(z,{item:!0,xs:6,children:e.jsxs(d,{textAlign:"center",children:[e.jsx(o,{variant:"h4",color:"primary",children:I.total}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Total Interventions"})]})}),e.jsx(z,{item:!0,xs:6,children:e.jsxs(d,{textAlign:"center",children:[e.jsx(o,{variant:"h4",color:"info.main",children:I.active}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Active"})]})}),e.jsx(z,{item:!0,xs:6,children:e.jsxs(d,{textAlign:"center",children:[e.jsx(o,{variant:"h4",color:"success.main",children:I.completed}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Completed"})]})}),e.jsx(z,{item:!0,xs:6,children:e.jsxs(d,{textAlign:"center",children:[e.jsx(o,{variant:"h4",color:"warning.main",children:I.highPriority}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"High Priority"})]})})]})]})})})]}),e.jsx(k,{children:e.jsxs(R,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Clinical Interventions"}),f?e.jsx(d,{display:"flex",justifyContent:"center",py:4,children:e.jsx(Ie,{})}):h?e.jsxs(de,{severity:"error",action:e.jsx(B,{color:"inherit",size:"small",onClick:()=>T(),children:"Retry"}),children:["Error loading interventions: ",h.message]}):v.length>0?e.jsx(mt,{component:Bt,variant:"outlined",children:e.jsxs(gt,{children:[e.jsx(yt,{children:e.jsxs(ie,{children:[e.jsx(C,{children:"Intervention #"}),e.jsx(C,{children:"Category"}),e.jsx(C,{children:"Priority"}),e.jsx(C,{children:"Status"}),e.jsx(C,{children:"Identified Date"}),e.jsx(C,{children:"Actions"})]})}),e.jsx(jt,{children:v.map(m=>e.jsxs(ie,{hover:!0,children:[e.jsx(C,{children:e.jsx(o,{variant:"body2",fontWeight:"medium",children:m.interventionNumber})}),e.jsx(C,{children:e.jsx(Z,{label:m.category.replace(/_/g," ").replace(/\b\w/g,x=>x.toUpperCase()),size:"small",variant:"outlined"})}),e.jsx(C,{children:e.jsx(Z,{label:m.priority.toUpperCase(),size:"small",color:N(m.priority)})}),e.jsx(C,{children:e.jsx(Z,{icon:_(m.status),label:m.status.replace(/_/g," ").replace(/\b\w/g,x=>x.toUpperCase()),size:"small",color:$(m.status)})}),e.jsxs(C,{children:[e.jsx(o,{variant:"body2",children:G(ye(m.identifiedDate),"MMM dd, yyyy")}),e.jsx(o,{variant:"caption",color:"text.secondary",children:G(ye(m.identifiedDate),"HH:mm")})]}),e.jsx(C,{children:e.jsxs(d,{display:"flex",gap:.5,children:[e.jsx(Pe,{title:"View Details",children:e.jsx(ge,{size:"small",onClick:()=>t(`/pharmacy/clinical-interventions/details/${m._id}`),children:e.jsx(nr,{})})}),e.jsx(Pe,{title:"Edit",children:e.jsx(ge,{size:"small",onClick:()=>t(`/pharmacy/clinical-interventions/edit/${m._id}`),children:e.jsx(ur,{})})})]})})]},m._id))})]})}):e.jsxs(de,{severity:"info",children:["No clinical interventions found for this patient.",e.jsx(B,{variant:"outlined",startIcon:e.jsx(Ve,{}),onClick:()=>t(`/pharmacy/clinical-interventions/create?patientId=${r._id}`),sx:{ml:2},children:"Create First Intervention"})]})]})})]}),!r&&e.jsx(k,{children:e.jsxs(R,{sx:{textAlign:"center",py:6},children:[e.jsx(Je,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Select a Patient"}),e.jsx(o,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Choose a patient from the dropdown above to view their clinical interventions."})]})})]})},Bd=()=>{var P,b,J,Q,D,S,p,y,M,Ne,Se,Wt,St,Ct,wt,He,_e,Tt,ct,Ee,It,ut,At,_t,Et,dt,qt,Ot,Ht,Kt,Gt;const t=xr();Ns();const[r,n]=g.useState(0),[i,s]=g.useState(null),[a,l]=g.useState(!1),[c,f]=g.useState(null),[h,T]=g.useState(!1),[v,j]=g.useState("pdf"),[I,N]=g.useState({dateFrom:aa(Ys(new Date,1)),dateTo:Ls(new Date),category:"all",priority:"all",outcome:"all",pharmacist:"all",costSavingsMin:null,costSavingsMax:null}),[$,_]=g.useState(0),[m,x]=g.useState(10),L=g.useCallback(async()=>{l(!0),f(null);try{const{clinicalInterventionService:E}=await zs(async()=>{const{clinicalInterventionService:Ke}=await import("./clinicalInterventionService-BhSPzGvJ.js");return{clinicalInterventionService:Ke}},[]),fe={dateFrom:I.dateFrom,dateTo:I.dateTo,category:I.category!=="all"?I.category:void 0,priority:I.priority!=="all"?I.priority:void 0,outcome:I.outcome!=="all"?I.outcome:void 0,pharmacist:I.pharmacist!=="all"?I.pharmacist:void 0},xe=await E.generateOutcomeReport(fe);xe.success&&xe.data?s(xe.data):(s({summary:{totalInterventions:0,completedInterventions:0,successfulInterventions:0,successRate:0,totalCostSavings:0,averageResolutionTime:0,patientSatisfactionScore:0},categoryAnalysis:[],trendAnalysis:[],comparativeAnalysis:{currentPeriod:{interventions:0,successRate:0,costSavings:0},previousPeriod:{interventions:0,successRate:0,costSavings:0},percentageChange:{interventions:0,successRate:0,costSavings:0}},detailedOutcomes:[]}),f(xe.message||"No report data available. Create some clinical interventions to see reports."))}catch(E){console.error("Error loading report data:",E),f(E instanceof Error?E.message:"Failed to load report data"),s({summary:{totalInterventions:0,completedInterventions:0,successfulInterventions:0,successRate:0,totalCostSavings:0,averageResolutionTime:0,patientSatisfactionScore:0},categoryAnalysis:[],trendAnalysis:[],comparativeAnalysis:{currentPeriod:{interventions:0,successRate:0,costSavings:0},previousPeriod:{interventions:0,successRate:0,costSavings:0},percentageChange:{interventions:0,successRate:0,costSavings:0}},detailedOutcomes:[]})}finally{l(!1)}},[I]);g.useEffect(()=>{L()},[L]);const U=(E,fe)=>{N(xe=>({...xe,[E]:fe}))},K=async()=>{try{console.log(`Exporting report as ${v}`);const E=`clinical-interventions-report-${G(new Date,"yyyy-MM-dd")}.${v}`,fe=JSON.stringify(i,null,2),xe=new Blob([fe],{type:"application/json"}),Ke=URL.createObjectURL(xe),Ge=document.createElement("a");Ge.href=Ke,Ge.download=E,document.body.appendChild(Ge),Ge.click(),document.body.removeChild(Ge),URL.revokeObjectURL(Ke),T(!1)}catch(E){console.error("Export failed:",E)}};return t.palette.primary.main,t.palette.secondary.main,t.palette.success.main,t.palette.warning.main,t.palette.error.main,t.palette.info.main,a&&!i?e.jsx(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:400},children:e.jsx(Ie,{})}):c?e.jsxs(de,{severity:"error",sx:{m:2},children:["Error loading report: ",c]}):i?e.jsx(oa,{dateAdapter:la,children:e.jsxs(d,{sx:{p:3},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(o,{variant:"h4",component:"h1",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(me,{}),"Outcome Reports & Analytics"]}),e.jsxs(d,{sx:{display:"flex",gap:2},children:[e.jsx(Pe,{title:"Refresh Data",children:e.jsx(ge,{onClick:L,disabled:a,children:e.jsx(lr,{})})}),e.jsx(B,{variant:"outlined",startIcon:e.jsx(or,{}),onClick:()=>T(!0),children:"Export Report"}),e.jsx(B,{variant:"outlined",startIcon:e.jsx(ca,{}),onClick:()=>window.print(),children:"Print"})]})]}),e.jsx(k,{sx:{mb:3},children:e.jsxs(R,{children:[e.jsxs(o,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(tn,{}),"Report Filters"]}),e.jsxs(z,{container:!0,spacing:2,children:[e.jsx(z,{item:!0,xs:12,sm:6,md:3,children:e.jsx(On,{label:"From Date",value:I.dateFrom,onChange:E=>U("dateFrom",E),renderInput:E=>e.jsx(oe,{...E,fullWidth:!0,size:"small"})})}),e.jsx(z,{item:!0,xs:12,sm:6,md:3,children:e.jsx(On,{label:"To Date",value:I.dateTo,onChange:E=>U("dateTo",E),renderInput:E=>e.jsx(oe,{...E,fullWidth:!0,size:"small"})})}),e.jsx(z,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(se,{fullWidth:!0,size:"small",children:[e.jsx(ae,{children:"Category"}),e.jsxs(le,{value:I.category,label:"Category",onChange:E=>U("category",E.target.value),children:[e.jsx(w,{value:"all",children:"All Categories"}),e.jsx(w,{value:"drug_therapy_problem",children:"Drug Therapy Problem"}),e.jsx(w,{value:"adverse_drug_reaction",children:"Adverse Drug Reaction"}),e.jsx(w,{value:"medication_nonadherence",children:"Medication Non-adherence"}),e.jsx(w,{value:"drug_interaction",children:"Drug Interaction"}),e.jsx(w,{value:"dosing_issue",children:"Dosing Issue"}),e.jsx(w,{value:"contraindication",children:"Contraindication"})]})]})}),e.jsx(z,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(se,{fullWidth:!0,size:"small",children:[e.jsx(ae,{children:"Priority"}),e.jsxs(le,{value:I.priority,label:"Priority",onChange:E=>U("priority",E.target.value),children:[e.jsx(w,{value:"all",children:"All Priorities"}),e.jsx(w,{value:"critical",children:"Critical"}),e.jsx(w,{value:"high",children:"High"}),e.jsx(w,{value:"medium",children:"Medium"}),e.jsx(w,{value:"low",children:"Low"})]})]})})]})]})}),e.jsx(d,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs(en,{value:r,onChange:(E,fe)=>n(fe),children:[e.jsx(we,{label:"Summary Overview"}),e.jsx(we,{label:"Category Analysis"}),e.jsx(we,{label:"Trend Analysis"}),e.jsx(we,{label:"Comparative Analysis"}),e.jsx(we,{label:"Detailed Outcomes"})]})}),r===0&&e.jsxs(d,{children:[e.jsxs(z,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(z,{item:!0,xs:12,sm:6,md:4,children:e.jsx(k,{children:e.jsxs(R,{sx:{textAlign:"center"},children:[e.jsx(me,{sx:{fontSize:40,color:"primary.main",mb:1}}),e.jsx(o,{variant:"h4",component:"div",sx:{fontWeight:"bold"},children:((P=i==null?void 0:i.summary)==null?void 0:P.totalInterventions)||0}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Total Interventions"})]})})}),e.jsx(z,{item:!0,xs:12,sm:6,md:4,children:e.jsx(k,{children:e.jsxs(R,{sx:{textAlign:"center"},children:[e.jsx(ee,{sx:{fontSize:40,color:"success.main",mb:1}}),e.jsxs(o,{variant:"h4",component:"div",sx:{fontWeight:"bold"},children:[(((b=i==null?void 0:i.summary)==null?void 0:b.successRate)||0).toFixed(1),"%"]}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Success Rate"})]})})}),e.jsx(z,{item:!0,xs:12,sm:6,md:4,children:e.jsx(k,{children:e.jsxs(R,{sx:{textAlign:"center"},children:[e.jsx(ua,{sx:{fontSize:40,color:"warning.main",mb:1}}),e.jsxs(o,{variant:"h4",component:"div",sx:{fontWeight:"bold"},children:["â‚¦",(((J=i==null?void 0:i.summary)==null?void 0:J.totalCostSavings)||0).toLocaleString()]}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Total Cost Savings"})]})})}),e.jsx(z,{item:!0,xs:12,sm:6,md:4,children:e.jsx(k,{children:e.jsxs(R,{sx:{textAlign:"center"},children:[e.jsx(Bs,{sx:{fontSize:40,color:"info.main",mb:1}}),e.jsx(o,{variant:"h4",component:"div",sx:{fontWeight:"bold"},children:(((Q=i==null?void 0:i.summary)==null?void 0:Q.averageResolutionTime)||0).toFixed(1)}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Avg Resolution Time (days)"})]})})}),e.jsx(z,{item:!0,xs:12,sm:6,md:4,children:e.jsx(k,{children:e.jsxs(R,{sx:{textAlign:"center"},children:[e.jsx(me,{sx:{fontSize:40,color:"secondary.main",mb:1}}),e.jsx(o,{variant:"h4",component:"div",sx:{fontWeight:"bold"},children:((D=i==null?void 0:i.summary)==null?void 0:D.completedInterventions)||0}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Completed Interventions"})]})})}),e.jsx(z,{item:!0,xs:12,sm:6,md:4,children:e.jsx(k,{children:e.jsxs(R,{sx:{textAlign:"center"},children:[e.jsx(ee,{sx:{fontSize:40,color:"success.main",mb:1}}),e.jsx(o,{variant:"h4",component:"div",sx:{fontWeight:"bold"},children:(((S=i==null?void 0:i.summary)==null?void 0:S.patientSatisfactionScore)||0).toFixed(1)}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Patient Satisfaction (5.0)"})]})})})]}),e.jsxs(z,{container:!0,spacing:3,children:[e.jsx(z,{item:!0,xs:12,md:6,children:e.jsx(k,{children:e.jsxs(R,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Success Rate by Category"}),e.jsx(Fe,{width:"100%",height:300,children:e.jsxs(cr,{data:(i==null?void 0:i.categoryAnalysis)||[],children:[e.jsx(Ye,{strokeDasharray:"3 3"}),e.jsx(Xe,{dataKey:"category",angle:-45,textAnchor:"end",height:80}),e.jsx(ze,{domain:[0,100]}),e.jsx(ke,{formatter:E=>[`${E}%`,"Success Rate"]}),e.jsx(Rt,{dataKey:"successRate",fill:t.palette.primary.main})]})})]})})}),e.jsx(z,{item:!0,xs:12,md:6,children:e.jsx(k,{children:e.jsxs(R,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Cost Savings by Category"}),e.jsx(Fe,{width:"100%",height:300,children:e.jsxs(cr,{data:(i==null?void 0:i.categoryAnalysis)||[],children:[e.jsx(Ye,{strokeDasharray:"3 3"}),e.jsx(Xe,{dataKey:"category",angle:-45,textAnchor:"end",height:80}),e.jsx(ze,{}),e.jsx(ke,{formatter:E=>[`â‚¦${E}`,"Avg Cost Savings"]}),e.jsx(Rt,{dataKey:"avgCostSavings",fill:t.palette.success.main})]})})]})})})]})]}),r===1&&e.jsx(d,{children:e.jsx(k,{children:e.jsxs(R,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Category Performance Analysis"}),e.jsx(mt,{children:e.jsxs(gt,{children:[e.jsx(yt,{children:e.jsxs(ie,{children:[e.jsx(C,{children:"Category"}),e.jsx(C,{align:"right",children:"Total"}),e.jsx(C,{align:"right",children:"Successful"}),e.jsx(C,{align:"right",children:"Success Rate"}),e.jsx(C,{align:"right",children:"Avg Cost Savings"}),e.jsx(C,{align:"right",children:"Avg Resolution Time"})]})}),e.jsx(jt,{children:((i==null?void 0:i.categoryAnalysis)||[]).map(E=>e.jsxs(ie,{children:[e.jsx(C,{component:"th",scope:"row",children:E.category}),e.jsx(C,{align:"right",children:E.total}),e.jsx(C,{align:"right",children:E.successful}),e.jsx(C,{align:"right",children:e.jsx(Z,{label:`${E.successRate.toFixed(1)}%`,color:E.successRate>=90?"success":E.successRate>=80?"warning":"error",size:"small"})}),e.jsxs(C,{align:"right",children:["â‚¦",E.avgCostSavings]}),e.jsxs(C,{align:"right",children:[E.avgResolutionTime.toFixed(1)," days"]})]},E.category))})]})})]})})}),r===2&&e.jsx(d,{children:e.jsx(z,{container:!0,spacing:3,children:e.jsx(z,{item:!0,xs:12,children:e.jsx(k,{children:e.jsxs(R,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Monthly Trends"}),e.jsx(Fe,{width:"100%",height:400,children:e.jsxs(ja,{data:(i==null?void 0:i.trendAnalysis)||[],children:[e.jsx(Ye,{strokeDasharray:"3 3"}),e.jsx(Xe,{dataKey:"period"}),e.jsx(ze,{yAxisId:"left"}),e.jsx(ze,{yAxisId:"right",orientation:"right"}),e.jsx(ke,{}),e.jsx(vi,{}),e.jsx(Rt,{yAxisId:"left",dataKey:"interventions",fill:t.palette.primary.main,name:"Interventions"}),e.jsx(Ft,{yAxisId:"right",type:"monotone",dataKey:"successRate",stroke:t.palette.success.main,name:"Success Rate %"}),e.jsx(Xs,{yAxisId:"left",type:"monotone",dataKey:"costSavings",fill:t.palette.warning.main,fillOpacity:.3,name:"Cost Savings ($)"})]})})]})})})})}),r===3&&e.jsx(d,{children:e.jsxs(z,{container:!0,spacing:3,children:[e.jsx(z,{item:!0,xs:12,md:4,children:e.jsx(k,{children:e.jsxs(R,{sx:{textAlign:"center"},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Interventions"}),e.jsx(o,{variant:"h4",sx:{fontWeight:"bold",mb:1},children:((y=(p=i==null?void 0:i.comparativeAnalysis)==null?void 0:p.currentPeriod)==null?void 0:y.interventions)||0}),e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(ee,{sx:{color:(((Ne=(M=i==null?void 0:i.comparativeAnalysis)==null?void 0:M.percentageChange)==null?void 0:Ne.interventions)||0)>=0?"success.main":"error.main",mr:.5}}),e.jsxs(o,{variant:"body2",sx:{color:(((Wt=(Se=i==null?void 0:i.comparativeAnalysis)==null?void 0:Se.percentageChange)==null?void 0:Wt.interventions)||0)>=0?"success.main":"error.main",fontWeight:"medium"},children:[Math.abs(((Ct=(St=i==null?void 0:i.comparativeAnalysis)==null?void 0:St.percentageChange)==null?void 0:Ct.interventions)||0).toFixed(1),"% vs previous period"]})]})]})})}),e.jsx(z,{item:!0,xs:12,md:4,children:e.jsx(k,{children:e.jsxs(R,{sx:{textAlign:"center"},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Success Rate"}),e.jsxs(o,{variant:"h4",sx:{fontWeight:"bold",mb:1},children:[(((He=(wt=i==null?void 0:i.comparativeAnalysis)==null?void 0:wt.currentPeriod)==null?void 0:He.successRate)||0).toFixed(1),"%"]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(ee,{sx:{color:(((Tt=(_e=i==null?void 0:i.comparativeAnalysis)==null?void 0:_e.percentageChange)==null?void 0:Tt.successRate)||0)>=0?"success.main":"error.main",mr:.5}}),e.jsxs(o,{variant:"body2",sx:{color:(((Ee=(ct=i==null?void 0:i.comparativeAnalysis)==null?void 0:ct.percentageChange)==null?void 0:Ee.successRate)||0)>=0?"success.main":"error.main",fontWeight:"medium"},children:[Math.abs(((ut=(It=i==null?void 0:i.comparativeAnalysis)==null?void 0:It.percentageChange)==null?void 0:ut.successRate)||0).toFixed(1),"% vs previous period"]})]})]})})}),e.jsx(z,{item:!0,xs:12,md:4,children:e.jsx(k,{children:e.jsxs(R,{sx:{textAlign:"center"},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Cost Savings"}),e.jsxs(o,{variant:"h4",sx:{fontWeight:"bold",mb:1},children:["$",(((_t=(At=i==null?void 0:i.comparativeAnalysis)==null?void 0:At.currentPeriod)==null?void 0:_t.costSavings)||0).toLocaleString()]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(ee,{sx:{color:(((dt=(Et=i==null?void 0:i.comparativeAnalysis)==null?void 0:Et.percentageChange)==null?void 0:dt.costSavings)||0)>=0?"success.main":"error.main",mr:.5}}),e.jsxs(o,{variant:"body2",sx:{color:(((Ot=(qt=i==null?void 0:i.comparativeAnalysis)==null?void 0:qt.percentageChange)==null?void 0:Ot.costSavings)||0)>=0?"success.main":"error.main",fontWeight:"medium"},children:[Math.abs(((Kt=(Ht=i==null?void 0:i.comparativeAnalysis)==null?void 0:Ht.percentageChange)==null?void 0:Kt.costSavings)||0).toFixed(1),"% vs previous period"]})]})]})})})]})}),r===4&&e.jsx(d,{children:e.jsx(k,{children:e.jsxs(R,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Detailed Intervention Outcomes"}),e.jsx(mt,{children:e.jsxs(gt,{children:[e.jsx(yt,{children:e.jsxs(ie,{children:[e.jsx(C,{children:"Intervention #"}),e.jsx(C,{children:"Patient"}),e.jsx(C,{children:"Category"}),e.jsx(C,{children:"Priority"}),e.jsx(C,{children:"Outcome"}),e.jsx(C,{align:"right",children:"Cost Savings"}),e.jsx(C,{align:"right",children:"Resolution Time"}),e.jsx(C,{children:"Completed Date"})]})}),e.jsx(jt,{children:((i==null?void 0:i.detailedOutcomes)||[]).slice($*m,$*m+m).map(E=>e.jsxs(ie,{children:[e.jsx(C,{children:E.interventionNumber}),e.jsx(C,{children:E.patientName}),e.jsx(C,{children:E.category}),e.jsx(C,{children:e.jsx(Z,{label:E.priority,color:E.priority==="high"?"error":E.priority==="medium"?"warning":"default",size:"small"})}),e.jsx(C,{children:e.jsx(Z,{label:E.patientResponse,color:E.patientResponse==="improved"?"success":E.patientResponse==="no_change"?"warning":"error",size:"small"})}),e.jsxs(C,{align:"right",children:["â‚¦",E.costSavings]}),e.jsxs(C,{align:"right",children:[E.resolutionTime," days"]}),e.jsx(C,{children:G(new Date(E.completedDate),"MMM dd, yyyy")})]},E.interventionId))})]})}),e.jsx(Ci,{rowsPerPageOptions:[5,10,25,50],component:"div",count:((Gt=i==null?void 0:i.detailedOutcomes)==null?void 0:Gt.length)||0,rowsPerPage:m,page:$,onPageChange:(E,fe)=>_(fe),onRowsPerPageChange:E=>{x(parseInt(E.target.value,10)),_(0)}})]})})}),e.jsxs(Qr,{open:h,onClose:()=>T(!1),children:[e.jsx(Yr,{children:"Export Report"}),e.jsxs(Xr,{children:[e.jsx(o,{variant:"body2",sx:{mb:2},children:"Choose the format for exporting the report:"}),e.jsxs(se,{fullWidth:!0,children:[e.jsx(ae,{children:"Export Format"}),e.jsxs(le,{value:v,label:"Export Format",onChange:E=>j(E.target.value),children:[e.jsx(w,{value:"pdf",children:"PDF Report"}),e.jsx(w,{value:"excel",children:"Excel Spreadsheet"}),e.jsx(w,{value:"csv",children:"CSV Data"})]})]})]}),e.jsxs(Jr,{children:[e.jsx(B,{onClick:()=>T(!1),children:"Cancel"}),e.jsx(B,{onClick:K,variant:"contained",children:"Export"})]})]})]})}):e.jsxs(d,{sx:{p:3},children:[e.jsxs(o,{variant:"h4",component:"h1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(me,{}),"Outcome Reports & Analytics"]}),e.jsxs(de,{severity:"info",sx:{mt:2},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"No Report Data Available"}),e.jsx(o,{variant:"body2",children:"No clinical interventions have been completed yet. Once clinical interventions are created and processed, comprehensive reports will be available including:"}),e.jsxs(d,{component:"ul",sx:{mt:1,mb:0},children:[e.jsx("li",{children:"Success rates by category"}),e.jsx("li",{children:"Cost savings analysis"}),e.jsx("li",{children:"Trend analysis over time"}),e.jsx("li",{children:"Comparative performance metrics"}),e.jsx("li",{children:"Detailed outcome tracking"})]})]})]})},vs=({interventionId:t,interventionNumber:r})=>{const[n,i]=g.useState([]),[s,a]=g.useState(!0),[l,c]=g.useState(null),[f,h]=g.useState(new Set),[T,v]=g.useState(1),[j,I]=g.useState(1),[N,$]=g.useState(null),[_,m]=g.useState(""),[x,L]=g.useState(""),[U,K]=g.useState(""),P=20,b=g.useCallback(async()=>{try{a(!0),c(null);const y={page:T,limit:P};_&&(y.startDate=_),x&&(y.endDate=x),U&&(y.riskLevel=U);let M;t?M=await he.getInterventionAuditTrail(t,y):M=await he.getAllAuditTrail(y),M.success&&M.data?(i(M.data.logs),I(Math.ceil((M.data.total||0)/P)),$(M.data.summary||{totalActions:0,uniqueUsers:0,lastActivity:null,riskActivities:0})):(i([]),I(1),$({totalActions:0,uniqueUsers:0,lastActivity:null,riskActivities:0}),c(M.message||"No audit data available"))}catch(y){console.error("Error fetching audit trail:",y);const M=y instanceof Jt?y.message:"Failed to fetch audit trail";c(M),i([]),I(1),$({totalActions:0,uniqueUsers:0,lastActivity:null,riskActivities:0})}finally{a(!1)}},[t,T,_,x,U,P]);g.useEffect(()=>{b()},[b]);const J=async()=>{try{const y={format:"csv",startDate:_||G(new Date(Date.now()-2592e6),"yyyy-MM-dd"),endDate:x||G(new Date,"yyyy-MM-dd"),interventionIds:t?[t]:[],includeDetails:!0},M=await he.exportAuditData(y),Ne=window.URL.createObjectURL(M),Se=document.createElement("a");Se.href=Ne,Se.download=`${t?`intervention_${r||t}_audit`:"clinical_interventions_audit"}_${G(new Date,"yyyy-MM-dd")}.csv`,document.body.appendChild(Se),Se.click(),document.body.removeChild(Se),window.URL.revokeObjectURL(Ne)}catch(y){console.error("Export error:",y),c(y instanceof Jt?y.message:"Failed to export audit data")}},Q=y=>{const M=new Set(f);M.has(y)?M.delete(y):M.add(y),h(M)},D=y=>{switch(y){case"critical":return"error";case"high":return"warning";case"medium":return"info";case"low":default:return"success"}},S=y=>{switch(y){case"critical":return e.jsx(Jt,{});case"high":return e.jsx(Ue,{});case"medium":return e.jsx(Hr,{});case"low":default:return e.jsx(Te,{})}},p=y=>y.replace("INTERVENTION_","").replace(/_/g," ").toLowerCase().replace(/\b\w/g,M=>M.toUpperCase());return s?e.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:200,children:e.jsx(Ie,{})}):e.jsx(d,{children:e.jsx(k,{children:e.jsxs(R,{children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(o,{variant:"h6",children:t?`Audit Trail - ${r||t}`:"Clinical Interventions Audit Trail"}),e.jsx(B,{variant:"outlined",startIcon:e.jsx(Ii,{}),onClick:J,size:"small",children:"Export"})]}),N&&e.jsxs(d,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"repeat(4, 1fr)"},gap:2,mb:3},children:[e.jsx(k,{variant:"outlined",children:e.jsxs(R,{children:[e.jsx(o,{color:"textSecondary",gutterBottom:!0,children:"Total Actions"}),e.jsx(o,{variant:"h4",children:N.totalActions})]})}),e.jsx(k,{variant:"outlined",children:e.jsxs(R,{children:[e.jsx(o,{color:"textSecondary",gutterBottom:!0,children:"Unique Users"}),e.jsx(o,{variant:"h4",children:N.uniqueUsers})]})}),e.jsx(k,{variant:"outlined",children:e.jsxs(R,{children:[e.jsx(o,{color:"textSecondary",gutterBottom:!0,children:"Risk Activities"}),e.jsx(o,{variant:"h4",color:N.riskActivities>0?"error":"success",children:N.riskActivities})]})}),e.jsx(k,{variant:"outlined",children:e.jsxs(R,{children:[e.jsx(o,{color:"textSecondary",gutterBottom:!0,children:"Last Activity"}),e.jsx(o,{variant:"body2",children:N.lastActivity?G(ye(N.lastActivity),"MMM dd, yyyy HH:mm"):"No activity"})]})})]}),e.jsxs(d,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"repeat(4, 1fr)"},gap:2,mb:3},children:[e.jsx(oe,{label:"Start Date",type:"date",value:_,onChange:y=>m(y.target.value),slotProps:{inputLabel:{shrink:!0}},fullWidth:!0,size:"small"}),e.jsx(oe,{label:"End Date",type:"date",value:x,onChange:y=>L(y.target.value),slotProps:{inputLabel:{shrink:!0}},fullWidth:!0,size:"small"}),e.jsxs(se,{fullWidth:!0,size:"small",children:[e.jsx(ae,{children:"Risk Level"}),e.jsxs(le,{value:U,onChange:y=>K(y.target.value),label:"Risk Level",children:[e.jsx(w,{value:"",children:"All"}),e.jsx(w,{value:"low",children:"Low"}),e.jsx(w,{value:"medium",children:"Medium"}),e.jsx(w,{value:"high",children:"High"}),e.jsx(w,{value:"critical",children:"Critical"})]})]}),e.jsx(B,{variant:"outlined",onClick:()=>{m(""),L(""),K(""),v(1)},fullWidth:!0,children:"Clear Filters"})]}),l&&e.jsx(de,{severity:"error",sx:{mb:2},children:l}),e.jsx(mt,{component:Bt,variant:"outlined",children:e.jsxs(gt,{children:[e.jsx(yt,{children:e.jsxs(ie,{children:[e.jsx(C,{children:"Timestamp"}),e.jsx(C,{children:"Action"}),e.jsx(C,{children:"User"}),e.jsx(C,{children:"Risk Level"}),e.jsx(C,{children:"Category"}),e.jsx(C,{children:"Details"})]})}),e.jsx(jt,{children:n.map(y=>e.jsxs(pt.Fragment,{children:[e.jsxs(ie,{hover:!0,children:[e.jsxs(C,{children:[e.jsx(o,{variant:"body2",children:G(ye(y.timestamp),"MMM dd, yyyy")}),e.jsx(o,{variant:"caption",color:"textSecondary",children:G(ye(y.timestamp),"HH:mm:ss")})]}),e.jsxs(C,{children:[e.jsx(o,{variant:"body2",fontWeight:"medium",children:p(y.action)}),y.changedFields&&y.changedFields.length>0&&e.jsxs(o,{variant:"caption",color:"textSecondary",children:["Changed: ",y.changedFields.join(", ")]})]}),e.jsxs(C,{children:[e.jsxs(o,{variant:"body2",children:[y.userId.firstName," ",y.userId.lastName]}),e.jsx(o,{variant:"caption",color:"textSecondary",children:y.userId.email})]}),e.jsx(C,{children:e.jsx(Z,{icon:S(y.riskLevel),label:y.riskLevel.toUpperCase(),color:D(y.riskLevel),size:"small"})}),e.jsx(C,{children:e.jsx(o,{variant:"body2",textTransform:"capitalize",children:y.complianceCategory.replace(/_/g," ")})}),e.jsx(C,{children:e.jsx(Pe,{title:"View Details",children:e.jsx(ge,{size:"small",onClick:()=>Q(y._id),children:f.has(y._id)?e.jsx(er,{}):e.jsx(Dt,{})})})})]}),e.jsx(ie,{children:e.jsx(C,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:e.jsx(ft,{in:f.has(y._id),timeout:"auto",unmountOnExit:!0,children:e.jsxs(d,{margin:1,children:[e.jsx(o,{variant:"subtitle2",gutterBottom:!0,children:"Details"}),e.jsx("pre",{style:{fontSize:"0.75rem",backgroundColor:"#f5f5f5",padding:"8px",borderRadius:"4px",overflow:"auto",maxHeight:"200px"},children:JSON.stringify(y.details,null,2)}),y.oldValues&&y.newValues&&e.jsxs(d,{mt:2,children:[e.jsx(o,{variant:"subtitle2",gutterBottom:!0,children:"Changes"}),e.jsxs(d,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsxs(d,{children:[e.jsx(o,{variant:"caption",color:"textSecondary",children:"Before:"}),e.jsx("pre",{style:{fontSize:"0.75rem",backgroundColor:"#ffebee",padding:"8px",borderRadius:"4px",overflow:"auto",maxHeight:"150px"},children:JSON.stringify(y.oldValues,null,2)})]}),e.jsxs(d,{children:[e.jsx(o,{variant:"caption",color:"textSecondary",children:"After:"}),e.jsx("pre",{style:{fontSize:"0.75rem",backgroundColor:"#e8f5e8",padding:"8px",borderRadius:"4px",overflow:"auto",maxHeight:"150px"},children:JSON.stringify(y.newValues,null,2)})]})]})]})]})})})})]},y._id))})]})}),j>1&&e.jsx(d,{display:"flex",justifyContent:"center",mt:3,children:e.jsx(da,{count:j,page:T,onChange:(y,M)=>v(M),color:"primary"})}),n.length===0&&!s&&e.jsx(d,{textAlign:"center",py:4,children:e.jsxs(de,{severity:"info",children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"No Audit Data Available"}),e.jsx(o,{variant:"body2",children:t?"No audit logs found for this specific intervention.":"No audit logs match the selected criteria. Try adjusting your filters or check back later as audit data is generated through system usage."})]})})]})})})},Ud=()=>{var $,_,m,x,L,U,K,P,b,J,Q;const[t,r]=g.useState(null),[n,i]=g.useState(!1),[s,a]=g.useState(null),[l,c]=g.useState(G(ha(new Date,30),"yyyy-MM-dd")),[f,h]=g.useState(G(new Date,"yyyy-MM-dd"));g.useState(!1),g.useEffect(()=>{T()},[]);const T=async()=>{try{i(!0),a(null);const D=await he.getComplianceReport({startDate:G(l,"yyyy-MM-dd"),endDate:G(f,"yyyy-MM-dd"),includeDetails:!0});D.success&&D.data?r(D.data):(r(null),a(D.message||"No compliance data available. Create some clinical interventions to see compliance reports."))}catch(D){a(D.message||"An error occurred while generating the report")}finally{i(!1)}},v=async()=>{try{const D=await he.exportAuditData({format:"pdf",startDate:l,endDate:f,includeDetails:!0}),S=window.URL.createObjectURL(D),p=document.createElement("a");p.href=S,p.download=`compliance_report_${G(new Date,"yyyy-MM-dd")}.pdf`,document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(S)}catch(D){a(D.message||"Failed to export compliance report")}},j=D=>D>=90?"success":D>=70?"warning":"error",I=D=>{switch(D){case"compliant":return"success";case"warning":return"warning";case"non-compliant":return"error";default:return"default"}},N=D=>{switch(D){case"critical":return"error";case"high":return"warning";case"medium":return"info";case"low":default:return"success"}};return n?e.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:e.jsx(Ie,{})}):e.jsx(d,{children:e.jsx(k,{children:e.jsxs(R,{children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(o,{variant:"h5",component:"h1",children:"Clinical Interventions Compliance Report"}),e.jsx(B,{variant:"outlined",startIcon:e.jsx(Ii,{}),onClick:v,disabled:!t,children:"Export PDF"})]}),e.jsxs(z,{container:!0,spacing:2,mb:3,children:[e.jsx(z,{item:!0,xs:12,sm:4,children:e.jsx(oe,{label:"Start Date",type:"date",value:l,onChange:D=>c(D.target.value),InputLabelProps:{shrink:!0},fullWidth:!0,size:"small"})}),e.jsx(z,{item:!0,xs:12,sm:4,children:e.jsx(oe,{label:"End Date",type:"date",value:f,onChange:D=>h(D.target.value),InputLabelProps:{shrink:!0},fullWidth:!0,size:"small"})}),e.jsx(z,{item:!0,xs:12,sm:4,children:e.jsx(B,{variant:"contained",onClick:T,fullWidth:!0,disabled:n,children:"Generate Report"})})]}),s&&e.jsxs(de,{severity:"info",sx:{mb:3},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"No Compliance Data Available"}),e.jsx(o,{variant:"body2",children:"The compliance reporting functionality is currently being developed. Once clinical interventions are created and audit trails are established, comprehensive compliance reports will be available including:"}),e.jsxs(d,{component:"ul",sx:{mt:1,mb:0},children:[e.jsx("li",{children:"Compliance score tracking"}),e.jsx("li",{children:"Risk activity monitoring"}),e.jsx("li",{children:"Audit trail analysis"}),e.jsx("li",{children:"Regulatory compliance metrics"}),e.jsx("li",{children:"Automated compliance recommendations"})]})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs(z,{container:!0,spacing:3,mb:4,children:[e.jsx(z,{item:!0,xs:12,sm:6,md:3,children:e.jsx(k,{variant:"outlined",children:e.jsxs(R,{children:[e.jsxs(d,{display:"flex",alignItems:"center",mb:1,children:[e.jsx(me,{color:"primary",sx:{mr:1}}),e.jsx(o,{color:"textSecondary",variant:"body2",children:"Total Interventions"})]}),e.jsx(o,{variant:"h4",children:(($=t==null?void 0:t.summary)==null?void 0:$.totalInterventions)||0})]})})}),e.jsx(z,{item:!0,xs:12,sm:6,md:3,children:e.jsx(k,{variant:"outlined",children:e.jsxs(R,{children:[e.jsxs(d,{display:"flex",alignItems:"center",mb:1,children:[e.jsx(ee,{color:"primary",sx:{mr:1}}),e.jsx(o,{color:"textSecondary",variant:"body2",children:"Audited Actions"})]}),e.jsx(o,{variant:"h4",children:((_=t==null?void 0:t.summary)==null?void 0:_.auditedActions)||0})]})})}),e.jsx(z,{item:!0,xs:12,sm:6,md:3,children:e.jsx(k,{variant:"outlined",children:e.jsxs(R,{children:[e.jsxs(d,{display:"flex",alignItems:"center",mb:1,children:[e.jsx(Te,{color:j(((m=t==null?void 0:t.summary)==null?void 0:m.complianceScore)||0),sx:{mr:1}}),e.jsx(o,{color:"textSecondary",variant:"body2",children:"Compliance Score"})]}),e.jsxs(o,{variant:"h4",color:j(((x=t==null?void 0:t.summary)==null?void 0:x.complianceScore)||0),children:[((L=t==null?void 0:t.summary)==null?void 0:L.complianceScore)||0,"%"]}),e.jsx(Us,{variant:"determinate",value:((U=t==null?void 0:t.summary)==null?void 0:U.complianceScore)||0,color:j(t.summary.complianceScore),sx:{mt:1}})]})})}),e.jsx(z,{item:!0,xs:12,sm:6,md:3,children:e.jsx(k,{variant:"outlined",children:e.jsxs(R,{children:[e.jsxs(d,{display:"flex",alignItems:"center",mb:1,children:[e.jsx(ji,{color:(((K=t==null?void 0:t.summary)==null?void 0:K.riskActivities)||0)>0?"error":"success",sx:{mr:1}}),e.jsx(o,{color:"textSecondary",variant:"body2",children:"Risk Activities"})]}),e.jsx(o,{variant:"h4",color:(((P=t==null?void 0:t.summary)==null?void 0:P.riskActivities)||0)>0?"error":"success",children:((b=t==null?void 0:t.summary)==null?void 0:b.riskActivities)||0})]})})})]}),e.jsx(k,{variant:"outlined",sx:{mb:3},children:e.jsxs(R,{children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Intervention Compliance Details"}),e.jsx(mt,{children:e.jsxs(gt,{children:[e.jsx(yt,{children:e.jsxs(ie,{children:[e.jsx(C,{children:"Intervention"}),e.jsx(C,{children:"Audit Count"}),e.jsx(C,{children:"Last Audit"}),e.jsx(C,{children:"Compliance Status"}),e.jsx(C,{children:"Risk Level"})]})}),e.jsx(jt,{children:((t==null?void 0:t.interventionCompliance)||[]).map(D=>e.jsxs(ie,{hover:!0,children:[e.jsx(C,{children:e.jsx(o,{variant:"body2",fontWeight:"medium",children:D.interventionNumber})}),e.jsx(C,{children:e.jsx(o,{variant:"body2",children:D.auditCount})}),e.jsx(C,{children:e.jsx(o,{variant:"body2",children:G(new Date(D.lastAudit),"MMM dd, yyyy HH:mm")})}),e.jsx(C,{children:e.jsx(Z,{label:D.complianceStatus.replace("-"," ").toUpperCase(),color:I(D.complianceStatus),size:"small",icon:D.complianceStatus==="compliant"?e.jsx(Te,{}):D.complianceStatus==="warning"?e.jsx(Ue,{}):e.jsx(Jt,{})})}),e.jsx(C,{children:e.jsx(Z,{label:D.riskLevel.toUpperCase(),color:N(D.riskLevel),size:"small"})})]},D.interventionId))})]})}),(((J=t==null?void 0:t.interventionCompliance)==null?void 0:J.length)||0)===0&&e.jsx(d,{textAlign:"center",py:4,children:e.jsx(o,{color:"textSecondary",children:"No interventions found for the selected date range."})})]})}),(((Q=t==null?void 0:t.recommendations)==null?void 0:Q.length)||0)>0&&e.jsx(k,{variant:"outlined",children:e.jsxs(R,{children:[e.jsxs(d,{display:"flex",alignItems:"center",mb:2,children:[e.jsx($n,{color:"primary",sx:{mr:1}}),e.jsx(o,{variant:"h6",children:"Compliance Recommendations"})]}),e.jsx(ir,{children:((t==null?void 0:t.recommendations)||[]).map((D,S)=>{var p;return e.jsxs(pt.Fragment,{children:[e.jsxs(sr,{children:[e.jsx(Vs,{children:e.jsx($n,{color:"primary"})}),e.jsx(ar,{primary:D,primaryTypographyProps:{variant:"body2"}})]}),S<(((p=t==null?void 0:t.recommendations)==null?void 0:p.length)||0)-1&&e.jsx(gi,{})]},S)})})]})})]})]})})})},kh=()=>{const t=Ws(),r=xr(),n=()=>{const s=t.pathname;return s.includes("/dashboard")?0:s.includes("/create")?1:s.includes("/list")?2:s.includes("/patients")?3:s.includes("/reports")?4:s.includes("/audit")?5:s.includes("/compliance")?6:0},i=[{label:"Dashboard",path:"/pharmacy/clinical-interventions/dashboard",icon:e.jsx(mi,{})},{label:"Create New",path:"/pharmacy/clinical-interventions/create",icon:e.jsx(Ve,{})},{label:"Manage All",path:"/pharmacy/clinical-interventions/list",icon:e.jsx(ga,{})},{label:"By Patient",path:"/pharmacy/clinical-interventions/patients",icon:e.jsx(Je,{})},{label:"Reports",path:"/pharmacy/clinical-interventions/reports",icon:e.jsx(me,{})},{label:"Audit Trail",path:"/pharmacy/clinical-interventions/audit",icon:e.jsx(Gs,{})},{label:"Compliance",path:"/pharmacy/clinical-interventions/compliance",icon:e.jsx(ji,{})}];return e.jsxs(qs,{maxWidth:"xl",sx:{py:3},children:[e.jsxs(Hs,{sx:{mb:2},children:[e.jsx(jn,{component:_r,to:"/dashboard",color:"inherit",children:"Dashboard"}),e.jsx(jn,{component:_r,to:"/pharmacy/clinical-interventions",color:"inherit",children:"Pharmacy"}),e.jsx(o,{color:"text.primary",children:"Clinical Interventions"})]}),e.jsxs(d,{sx:{mb:3},children:[e.jsx(o,{variant:"h4",component:"h1",gutterBottom:!0,children:"Clinical Interventions"}),e.jsx(o,{variant:"body1",color:"text.secondary",children:"Comprehensive clinical intervention management and workflow system"})]}),e.jsx(Bt,{sx:{mb:3},children:e.jsx(en,{value:n(),variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{minHeight:64,textTransform:"none",fontSize:"0.875rem",fontWeight:500}},children:i.map(s=>e.jsx(we,{label:s.label,icon:s.icon,iconPosition:"start",component:_r,to:s.path,sx:{"&.Mui-selected":{color:r.palette.primary.main,fontWeight:600}}},s.path))})}),e.jsxs(Ks,{children:[e.jsx(ce,{path:"/",element:e.jsx(vn,{to:"/pharmacy/clinical-interventions/dashboard",replace:!0})}),e.jsx(ce,{path:"/dashboard",element:e.jsx(va,{})}),e.jsx(ce,{path:"/create",element:e.jsx(xi,{})}),e.jsx(ce,{path:"/list",element:e.jsx(Ia,{})}),e.jsx(ce,{path:"/edit/:id",element:e.jsx(xi,{})}),e.jsx(ce,{path:"/details/:id",element:e.jsx(zd,{})}),e.jsx(ce,{path:"/patients",element:e.jsx(pi,{})}),e.jsx(ce,{path:"/patients/:patientId",element:e.jsx(pi,{})}),e.jsx(ce,{path:"/reports",element:e.jsx(Bd,{})}),e.jsx(ce,{path:"/audit",element:e.jsx(vs,{})}),e.jsx(ce,{path:"/audit/:interventionId",element:e.jsx(Vd,{})}),e.jsx(ce,{path:"/compliance",element:e.jsx(Ud,{})}),e.jsx(ce,{path:"*",element:e.jsx(vn,{to:"/pharmacy/clinical-interventions/dashboard",replace:!0})})]})]})},Vd=()=>{const{interventionId:t}=gr();return e.jsx(vs,{interventionId:t})};export{kh as default};
