import{c9 as w,bm as T,ca as U,cb as z,cc as J,j as e,B as d,S as I,Q as x,u as Q,r as E,a5 as M,a6 as W,ab as V,T as o,L as N,n as D,p as k,a0 as K,O as G,W as Z,b9 as H,D as y,l as L,Z as X,aQ as Y,ar as ee,w as re,h as B,bA as se,I as ae,aR as ne,aS as te,aT as oe,aU as ie,bM as _,bn as le,bo as P}from"./index-B_pWc9hu.js";import{M as ce}from"./ModulePage-CVnkGF7D.js";import{u as de}from"./useDebounce-BtuGOYBb.js";import{S as O}from"./Search-C2mZoRVv.js";import{A as ue}from"./Add-D5-B7xRD.js";import{D as pe}from"./Delete-BIyg2wQJ.js";const he="http://localhost:5000/api/drugs",j="http://localhost:5000/api/public",C=w.create({baseURL:he,withCredentials:!0});w.create({baseURL:j,withCredentials:!1,headers:{Accept:"application/json","Content-Type":"application/json"}});const b={searchDrugs:async s=>{console.log(`API client making request to public drug-search with name: ${s}`);try{console.log(`Using direct API endpoint for drug search: ${j}/drug-search`),console.log("Request config:",{url:`${j}/drug-search`,method:"GET",params:{name:s},headers:{Accept:"application/json","Content-Type":"application/json"}});const r=await w.get(`${j}/drug-search`,{params:{name:s},headers:{Accept:"application/json","Content-Type":"application/json"},timeout:1e4,validateStatus:a=>a>=200&&a<300});if(console.log("API response status:",r.status),console.log("API response headers:",r.headers),console.log("API response data type:",typeof r.data),console.log("API response data:",r.data),typeof r.data=="string"){console.error("Received string response instead of JSON");try{const a=JSON.parse(r.data);return console.log("Successfully parsed string response as JSON:",a),a}catch{throw console.error("Failed to parse response as JSON"),new Error("Invalid response format received from server")}}return r.data}catch(r){const a=r;throw console.error("API error in searchDrugs:",a),console.error("Error details:",{message:a.message,response:a.response?{status:a.response.status,data:a.response.data,headers:a.response.headers}:"No response",request:a.request?"Request was made but no response received":"Request not made"}),a}},getMonograph:async s=>{try{console.log(`Getting drug monograph for id: ${s}`),console.log(`Using direct API endpoint: ${j}/drug-monograph/${s}`);const r=await w.get(`${j}/drug-monograph/${s}`,{headers:{Accept:"application/json","Content-Type":"application/json"},timeout:1e4});return console.log("Monograph API response status:",r.status),console.log("Monograph API response data type:",typeof r.data),r.data.data}catch(r){const a=r;throw console.error("API error in getMonograph:",a),console.error("Error details:",{message:a.message,response:a.response?{status:a.response.status,data:a.response.data}:"No response"}),a}},checkInteractions:async(s,r)=>{try{console.log(`Checking drug interactions for rxcui: ${s} or rxcuis: ${r==null?void 0:r.join(", ")}`),console.log(`Using direct API endpoint: ${j}/drug-interactions`);const a=await w.post(`${j}/drug-interactions`,{rxcui:s,rxcuis:r},{headers:{Accept:"application/json","Content-Type":"application/json"},timeout:1e4});return console.log("Interactions API response status:",a.status),console.log("Interactions API response data type:",typeof a.data),a.data.data}catch(a){const t=a;throw console.error("API error in checkInteractions:",t),console.error("Error details:",{message:t.message,response:t.response?{status:t.response.status,data:t.response.data}:"No response"}),t}},getIndications:async s=>{try{console.log(`Getting drug indications for id: ${s}`),console.log(`Using direct API endpoint: ${j}/drug-indications/${s}`);const r=await w.get(`${j}/drug-indications/${s}`,{headers:{Accept:"application/json","Content-Type":"application/json"},timeout:1e4});return console.log("Indications API response status:",r.status),console.log("Indications API response data type:",typeof r.data),r.data.data}catch(r){const a=r;throw console.error("API error in getIndications:",a),console.error("Error details:",{message:a.message,response:a.response?{status:a.response.status,data:a.response.data}:"No response"}),a}},getAdverseEffects:async(s,r=10)=>{try{return console.log(`Getting adverse effects for drug id: ${s}`),(await w.get(`${j}/drug-adverse-effects/${s}`,{params:{limit:r},headers:{Accept:"application/json","Content-Type":"application/json"},timeout:15e3})).data.data}catch(a){const t=a;throw console.error("API error in getAdverseEffects:",t),console.error("Error details:",{message:t.message,response:t.response?{status:t.response.status,data:t.response.data}:"No response"}),t}},getFormularyInfo:async s=>{try{return(await C.get(`/formulary/${s}`)).data}catch(r){throw console.error("Error fetching formulary info:",r),r}},saveTherapyPlan:async s=>{try{return(await C.post("/therapy-plans",s)).data}catch(r){throw console.error("Error saving therapy plan:",r),r}},getTherapyPlans:async()=>{try{return(await C.get("/therapy-plans")).data}catch(s){throw console.error("Error fetching therapy plans:",s),s}},getTherapyPlan:async s=>{try{return(await C.get(`/therapy-plans/${s}`)).data}catch(r){const a=r;throw console.error("Error fetching therapy plan:",a),a}},createTherapyPlan:async s=>{try{return(await C.post("/therapy-plans",s)).data}catch(r){const a=r;throw console.error("Error creating therapy plan:",a),a}},updateTherapyPlan:async(s,r)=>{try{return(await C.put(`/therapy-plans/${s}`,r)).data}catch(a){throw console.error("Error updating therapy plan:",a),a}},deleteTherapyPlan:async s=>{try{await C.delete(`/therapy-plans/${s}`);return}catch(r){const a=r;throw console.error("Error deleting therapy plan:",a),a}}},m={all:["drugs"],search:s=>[...m.all,"search",s],monograph:s=>[...m.all,"monograph",s],interactions:(s,r)=>[...m.all,"interactions",s,r],indications:s=>[...m.all,"indications",s],adverseEffects:(s,r)=>[...m.all,"adverseEffects",s,r],formulary:s=>[...m.all,"formulary",s],therapyPlans:["drugs","therapyPlans"],therapyPlan:s=>[...m.therapyPlans,s]},ge=(s,r=!0)=>T({queryKey:m.search(s),queryFn:async()=>{console.log(`Making API call to search drugs with name: ${s}`);try{const a=await b.searchDrugs(s);return console.log("Drug search API result:",a),a}catch(a){throw console.error("Drug search API error:",a),a}},enabled:r&&s.length>0,staleTime:1e3*60*5}),me=(s,r=!0)=>T({queryKey:m.monograph(s),queryFn:()=>b.getMonograph(s),enabled:r&&!!s,staleTime:1e3*60*60}),fe=(s,r)=>T({queryKey:m.interactions(s,r),queryFn:()=>b.checkInteractions(s,r),enabled:!!s||!!r&&r.length>0,staleTime:1e3*60*10}),xe=s=>T({queryKey:m.indications(s),queryFn:()=>b.getIndications(s),enabled:!!s,staleTime:1e3*60*5,retry:1}),ye=(s,r)=>T({queryKey:m.adverseEffects(s,r),queryFn:()=>b.getAdverseEffects(s,r),enabled:!!s,staleTime:1e3*60*30}),je=(s,r=!0)=>T({queryKey:m.formulary(s),queryFn:()=>b.getFormularyInfo(s),enabled:r&&!!s,staleTime:1e3*60*60}),be=()=>T({queryKey:m.therapyPlans,queryFn:b.getTherapyPlans,staleTime:1e3*60*5}),ve=()=>{const s=U();return z({mutationFn:b.createTherapyPlan,onSuccess:()=>{s.invalidateQueries({queryKey:m.therapyPlans})}})},Ie=()=>{const s=U();return z({mutationFn:b.deleteTherapyPlan,onSuccess:()=>{s.invalidateQueries({queryKey:m.therapyPlans})}})},R=J()(s=>({searchQuery:"",searchResults:null,isSearching:!1,selectedDrug:null,drugMonograph:null,drugInteractions:null,adverseEffects:null,formularyInfo:null,therapyPlans:[],selectedTherapyPlan:null,isLoadingMonograph:!1,isLoadingInteractions:!1,isLoadingAdverseEffects:!1,isLoadingFormulary:!1,isLoadingTherapyPlans:!1,searchError:null,monographError:null,interactionError:null,adverseEffectsError:null,formularyError:null,setSearchQuery:r=>s({searchQuery:r}),setSearchResults:r=>s({searchResults:r}),setIsSearching:r=>s({isSearching:r}),setSelectedDrug:r=>s({selectedDrug:r}),setDrugMonograph:r=>s({drugMonograph:r}),setDrugInteractions:r=>s({drugInteractions:r}),setAdverseEffects:r=>s({adverseEffects:r}),setFormularyInfo:r=>s({formularyInfo:r}),setTherapyPlans:r=>s({therapyPlans:r}),setSelectedTherapyPlan:r=>s({selectedTherapyPlan:r}),setIsLoadingMonograph:r=>s({isLoadingMonograph:r}),setIsLoadingInteractions:r=>s({isLoadingInteractions:r}),setIsLoadingAdverseEffects:r=>s({isLoadingAdverseEffects:r}),setIsLoadingFormulary:r=>s({isLoadingFormulary:r}),setIsLoadingTherapyPlans:r=>s({isLoadingTherapyPlans:r}),setSearchError:r=>s({searchError:r}),setMonographError:r=>s({monographError:r}),setInteractionError:r=>s({interactionError:r}),setAdverseEffectsError:r=>s({adverseEffectsError:r}),setFormularyError:r=>s({formularyError:r}),resetDrugData:()=>s({selectedDrug:null,drugMonograph:null,drugInteractions:null,adverseEffects:null,formularyInfo:null,searchResults:null}),resetAll:()=>s({searchQuery:"",searchResults:null,isSearching:!1,selectedDrug:null,drugMonograph:null,drugInteractions:null,adverseEffects:null,formularyInfo:null,therapyPlans:[],selectedTherapyPlan:null,isLoadingMonograph:!1,isLoadingInteractions:!1,isLoadingAdverseEffects:!1,isLoadingFormulary:!1,isLoadingTherapyPlans:!1,searchError:null,monographError:null,interactionError:null,adverseEffectsError:null,formularyError:null})})),S=({type:s="details"})=>s==="search"?e.jsxs(d,{className:"w-full",children:[e.jsx(I,{variant:"rounded",height:56,className:"mb-4"}),e.jsx(x,{elevation:2,className:"p-2",children:[1,2,3,4,5].map(r=>e.jsx(I,{variant:"rounded",height:60,className:"mb-2"},r))})]}):s==="list"?e.jsx(x,{elevation:2,className:"p-4",children:[1,2,3,4,5].map(r=>e.jsx(I,{variant:"rounded",height:80,className:"mb-3"},r))}):e.jsxs(x,{elevation:2,className:"p-4",children:[e.jsx(I,{variant:"rounded",height:40,className:"mb-4"}),e.jsx(I,{variant:"rounded",height:20,width:"60%",className:"mb-6"}),e.jsx(I,{variant:"rounded",height:200,className:"mb-4"}),e.jsx(I,{variant:"rounded",height:150,className:"mb-4"}),e.jsx(I,{variant:"rounded",height:100})]}),Ee=({onDrugSelect:s})=>{const r=Q(),[a,t]=E.useState(""),u=de(a,300),{data:n,isLoading:l,error:i,refetch:h}=ge(u,u.length>2),{setSelectedDrug:g,setSearchError:p}=R();E.useEffect(()=>{i?(console.error("Drug search error:",i),p(i.message||"Failed to search drugs")):p(null),console.log("Search term:",u),console.log("Search results:",n),console.log("Search results type:",typeof n),n&&typeof n=="object"&&(console.log("Search results keys:",Object.keys(n)),"success"in n&&console.log("Success value:",n.success),"data"in n&&n.data&&(console.log("Data property exists:",typeof n.data),console.log("Data keys:",Object.keys(n.data)),n.data.drugGroup&&(console.log("DrugGroup exists:",typeof n.data.drugGroup),console.log("DrugGroup keys:",Object.keys(n.data.drugGroup)),n.data.drugGroup.conceptGroup&&console.log("ConceptGroup exists:",Array.isArray(n.data.drugGroup.conceptGroup)?`Array with ${n.data.drugGroup.conceptGroup.length} items`:typeof n.data.drugGroup.conceptGroup)))),console.log("Is loading:",l)},[i,n,l,u,p]);const f=E.useMemo(()=>{var F,$;if(!(($=(F=n==null?void 0:n.data)==null?void 0:F.drugGroup)!=null&&$.conceptGroup))return[];const c=[];return n.data.drugGroup.conceptGroup.forEach(q=>{q.conceptProperties&&c.push(...q.conceptProperties)}),c},[n]),v=c=>{g({rxCui:c.rxcui,name:c.name}),s&&s()},A=()=>{u.length>2&&h()};return l&&u.length>2?e.jsx(S,{type:"search"}):e.jsxs(d,{className:"drug-search",children:[e.jsx(M,{fullWidth:!0,variant:"outlined",placeholder:"Search for medications by name...",value:a,onChange:c=>t(c.target.value),InputProps:{startAdornment:e.jsx(W,{position:"start",children:e.jsx(O,{color:"primary"})}),endAdornment:l&&e.jsx(W,{position:"end",children:e.jsx(V,{size:20,color:"primary"})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:"8px","&:hover fieldset":{borderColor:r.palette.mode==="dark"?"#87CEEB":"#0047AB"},"&.Mui-focused fieldset":{borderColor:r.palette.mode==="dark"?"#87CEEB":"#0047AB",borderWidth:2}}}}),i&&e.jsxs(d,{sx:{mb:3,p:1,borderRadius:"8px",bgcolor:r.palette.mode==="dark"?"#4c1d1d":"#fff0f0",border:"1px solid",borderColor:r.palette.mode==="dark"?"#dc2626":"#ffcccc",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(o,{color:"error",children:["Error: ",i.message||"Failed to search drugs"]}),e.jsx(o,{component:"button",onClick:A,sx:{cursor:"pointer",color:r.palette.mode==="dark"?"#87CEEB":"#0047AB",fontWeight:500,fontSize:"0.875rem",textDecoration:"underline",border:"none",background:"none","&:hover":{color:r.palette.mode==="dark"?"#5bb0d4":"#002D69"}},children:"Retry"})]}),u.length>2&&f.length>0&&e.jsx(x,{elevation:2,sx:{borderRadius:"8px",overflow:"hidden",border:"1px solid #e0e0e0"},children:e.jsx(N,{sx:{maxHeight:"350px",overflow:"auto"},children:f.map(c=>e.jsxs(D,{onClick:()=>v(c),sx:{borderBottom:"1px solid #f0f0f0","&:last-child":{border:"none"},"&:hover":{bgcolor:r.palette.mode==="dark"?"#374151":"#f5f9ff",cursor:"pointer"}},children:[e.jsx(k,{primary:e.jsx(o,{component:"span",fontWeight:500,children:c.name}),secondary:c.synonym?`Also known as: ${c.synonym}`:""}),c.tty&&e.jsx(d,{component:"span",sx:{ml:2,px:1.5,py:.5,borderRadius:"16px",fontSize:"0.75rem",fontWeight:500,color:r.palette.mode==="dark"?"#87CEEB":"#0047AB",bgcolor:r.palette.mode==="dark"?"#374151":"#f0f7ff",border:"1px solid",borderColor:r.palette.mode==="dark"?"#4b5563":"#d0e4ff"},children:c.tty})]},c.rxcui))})}),u.length>2&&f.length===0&&!l&&e.jsxs(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:4,bgcolor:r.palette.mode==="dark"?"#0f172a":"#f9fbff",borderRadius:"8px"},children:[e.jsx(O,{sx:{fontSize:"2rem",color:r.palette.mode==="dark"?"#6b7280":"#9e9e9e",mb:1}}),e.jsxs(o,{color:"text.secondary",align:"center",children:['No medications found matching "',u,'"']}),e.jsx(o,{variant:"body2",color:"text.secondary",align:"center",sx:{mt:1},children:"Try using a different spelling or search term"})]})]})},Ae=({drugId:s})=>{var i,h,g;const{data:r,isLoading:a,error:t}=me(s),{selectedDrug:u}=R();if(a)return e.jsx(S,{type:"details"});if(t)return e.jsx(d,{my:4,children:e.jsxs(o,{color:"error",children:["Error loading drug details: ",t.message]})});if(!r)return e.jsx(d,{my:4,children:e.jsx(o,{children:"No details available for this drug"})});const n=((i=r.SPL)==null?void 0:i.title)||(u==null?void 0:u.name)||"Drug Information",l=(h=r.SPL)==null?void 0:h.published_date;return e.jsxs(x,{elevation:2,className:"p-4",children:[e.jsx(o,{variant:"h5",className:"mb-2",children:n}),l&&e.jsxs(o,{variant:"body2",className:"mb-4 text-gray-600",children:["Published: ",new Date(l).toLocaleDateString()]}),e.jsx(K,{className:"my-4"}),(g=r.SPL)!=null&&g.content&&r.SPL.content.length>0?e.jsx(d,{children:r.SPL.content.map((p,f)=>e.jsxs(d,{className:"mb-4",children:[p.title&&e.jsx(o,{variant:"h6",className:"mb-2",children:p.title}),p.paragraph&&e.jsx(o,{variant:"body1",className:"mb-2",children:p.paragraph}),p.list&&e.jsx("ul",{className:"list-disc pl-6",children:p.list.map((v,A)=>e.jsx("li",{className:"mb-1",children:e.jsx(o,{variant:"body2",children:v})},A))})]},f))}):e.jsx(o,{children:"No detailed information available"})]})},Pe=({severity:s})=>{switch(s.toUpperCase()){case"HIGH":return e.jsx(H,{color:"error"});case"MODERATE":return e.jsx(Z,{color:"warning"});case"LOW":return e.jsx(G,{color:"info"});default:return e.jsx(G,{})}},Ce=({rxcui:s,rxcuis:r,drugName:a})=>{const{data:t,isLoading:u,error:n}=fe(s,r);if(u)return e.jsx(S,{type:"list"});if(n)return e.jsx(d,{my:4,children:e.jsxs(y,{severity:"error",children:["Error loading drug interactions: ",n.message]})});if(!t||!t.interactionTypeGroup)return e.jsx(d,{my:4,children:e.jsx(o,{children:"No interaction data available"})});const l=[];return t.interactionTypeGroup.forEach(i=>{i.interactionType.forEach(h=>{h.interactionPair.forEach(g=>{var p,f;l.push({drug1:h.minConceptItem.name,drug2:((f=(p=g.interactionConcept[1])==null?void 0:p.minConceptItem)==null?void 0:f.name)||"Unknown",severity:g.severity,description:g.description})})})}),e.jsxs(x,{elevation:2,className:"p-4",children:[e.jsxs(o,{variant:"h6",className:"mb-4",children:["Drug Interactions ",a?`for ${a}`:""]}),l.length===0?e.jsx(y,{severity:"success",children:"No significant drug interactions found"}):e.jsx(d,{children:l.map((i,h)=>e.jsxs(x,{className:"p-3 mb-3 border-l-4 border-blue-500",children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",className:"mb-2",children:[e.jsxs(o,{variant:"subtitle1",children:[i.drug1," + ",i.drug2]}),e.jsx(L,{label:i.severity,color:i.severity==="HIGH"?"error":i.severity==="MODERATE"?"warning":"info",icon:e.jsx(Pe,{severity:i.severity})})]}),e.jsx(o,{variant:"body2",children:i.description})]},h))})]})},we=({drugId:s,drugName:r})=>{const{data:a,isLoading:t,error:u}=xe(s),n=()=>!(a!=null&&a.results)||a.results.length===0?e.jsxs(e.Fragment,{children:[e.jsx(y,{severity:"info",sx:{mt:2},children:"No indications information found for this drug."}),e.jsxs(o,{variant:"body2",sx:{mt:2,color:"text.secondary"},children:["We searched through multiple drug databases but couldn't find official indication information for ",r,". This could happen if:"]}),e.jsxs("ul",{style:{color:"#666",marginTop:"8px"},children:[e.jsx("li",{children:"The drug name has an alternate spelling or format"}),e.jsx("li",{children:"The drug may be known by another name in the FDA database"}),e.jsx("li",{children:"There may be a temporary connection issue with the FDA database"})]}),e.jsx(o,{variant:"body2",sx:{mt:2,fontStyle:"italic"},children:"Always consult with a healthcare professional before starting or changing medication. Indications may vary based on formulation, dosage, and individual patient factors."})]}):a.results.map((l,i)=>{var h,g,p,f,v;return!l.indications_and_usage||l.indications_and_usage.length===0?null:e.jsxs(x,{sx:{p:3,mb:3,borderRadius:"8px"},children:[e.jsx(o,{variant:"subtitle1",fontWeight:600,sx:{mb:2,color:"#0047AB"},children:((g=(h=l.openfda)==null?void 0:h.brand_name)==null?void 0:g[0])||((f=(p=l.openfda)==null?void 0:p.generic_name)==null?void 0:f[0])||r}),e.jsx(N,{sx:{bgcolor:"#f9fbff",borderRadius:"8px",p:2},children:l.indications_and_usage.map((A,c)=>e.jsxs(Y.Fragment,{children:[e.jsxs(D,{alignItems:"flex-start",sx:{py:1},children:[e.jsx(ee,{sx:{minWidth:36},children:e.jsx(re,{color:"primary"})}),e.jsx(k,{primary:A,sx:{"& .MuiListItemText-primary":{fontWeight:400,fontSize:"0.95rem"}}})]}),c<l.indications_and_usage.length-1&&e.jsx(K,{component:"li",sx:{ml:9}})]},c))}),((v=l.openfda)==null?void 0:v.manufacturer_name)&&e.jsxs(o,{variant:"caption",sx:{display:"block",mt:2,fontStyle:"italic",color:"text.secondary"},children:["Manufacturer: ",l.openfda.manufacturer_name.join(", ")]})]},i)}).filter(Boolean);return t?e.jsx(S,{type:"list"}):u?e.jsx(y,{severity:"error",sx:{mt:2},icon:e.jsx(H,{}),children:u.message||"Error loading drug indications"}):e.jsxs(d,{sx:{p:2},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(X,{sx:{mr:1,color:"#0047AB"}}),e.jsxs(o,{variant:"h6",sx:{fontWeight:600,color:"#0047AB"},children:["Indications for ",r]})]}),e.jsx(o,{variant:"body2",sx:{mb:3,color:"text.secondary"},children:"FDA-approved uses and therapeutic indications for this medication:"}),n(),e.jsx(y,{severity:"info",sx:{mt:3,borderRadius:"8px"},children:e.jsx(o,{variant:"body2",children:"Always consult with a healthcare professional before starting or changing medication. Indications may vary based on formulation, dosage, and individual patient factors."})})]})},Te=({drugId:s,drugName:r})=>{const{data:a,isLoading:t,error:u}=ye(s,20);if(t)return e.jsx(S,{type:"list"});if(u)return e.jsx(d,{my:4,children:e.jsxs(y,{severity:"error",children:["Error loading adverse effects: ",u.message]})});if(!a||!a.results)return e.jsx(d,{my:4,children:e.jsx(o,{children:"No adverse effects data available"})});const n={};a.results.forEach(i=>{i.patient&&i.patient.reaction&&i.patient.reaction.forEach(h=>{const g=h.reactionmeddrapt;n[g]||(n[g]={count:0,seriousness:[]}),n[g].count+=1;const p=[];i.seriousnessdeath==="1"&&p.push("Death"),i.seriousnesslifethreatening==="1"&&p.push("Life Threatening"),i.seriousnesshospitalization==="1"&&p.push("Hospitalization"),n[g].seriousness=[...new Set([...n[g].seriousness,...p])]})});const l=Object.entries(n).map(([i,h])=>({reaction:i,count:h.count,seriousness:h.seriousness})).sort((i,h)=>h.count-i.count);return e.jsxs(x,{elevation:2,className:"p-4",children:[e.jsxs(o,{variant:"h6",className:"mb-4",children:["Adverse Effects ",r?`for ${r}`:""]}),l.length===0?e.jsx(y,{severity:"info",children:"No adverse effects reported"}):e.jsx(N,{children:l.map(({reaction:i,count:h,seriousness:g},p)=>e.jsx(D,{className:"border-b last:border-b-0",children:e.jsx(k,{primary:e.jsxs(d,{display:"flex",alignItems:"center",children:[e.jsx(o,{variant:"body1",className:"font-medium",children:i}),e.jsx(L,{label:h,size:"small",className:"ml-2",color:g.length>0?"error":"default"})]}),secondary:g.length>0?e.jsxs(o,{variant:"body2",color:"error",children:["Seriousness: ",g.join(", ")]}):null})},p))})]})},Se=({drugId:s,drugName:r})=>{const{data:a,isLoading:t,error:u}=je(s);if(t)return e.jsx(S,{type:"list"});if(u)return e.jsx(d,{my:4,children:e.jsxs(y,{severity:"error",children:["Error loading formulary information: ",u.message]})});if(!a||!a.relatedGroup)return e.jsx(d,{my:4,children:e.jsx(o,{children:"No formulary information available"})});const n=[];return a.relatedGroup.conceptGroup&&a.relatedGroup.conceptGroup.forEach(l=>{l.tty==="SCD"&&l.conceptProperties&&n.push(...l.conceptProperties)}),e.jsxs(x,{elevation:2,className:"p-4",children:[e.jsxs(o,{variant:"h6",className:"mb-4",children:["Formulary & Therapeutic Equivalents ",r?`for ${r}`:""]}),n.length===0?e.jsx(y,{severity:"info",children:"No therapeutic equivalents found"}):e.jsxs(d,{children:[e.jsx(o,{variant:"subtitle1",className:"mb-2",children:"Therapeutic Equivalents:"}),e.jsx(N,{children:n.map((l,i)=>e.jsxs(D,{className:"border-b last:border-b-0",children:[e.jsx(k,{primary:l.name,secondary:l.synonym?`Also known as: ${l.synonym}`:""}),e.jsx(L,{label:l.tty,size:"small"})]},i))})]})]})},Ne=()=>{const[s,r]=E.useState(!1),[a,t]=E.useState(""),[u,n]=E.useState(""),{selectedDrug:l}=R(),{data:i=[]}=be(),{mutate:h}=ve(),{mutate:g}=Ie(),p=()=>r(!0),f=()=>{r(!1),t(""),n("")},v=()=>{if(!a.trim())return;h({planName:a,drugs:l?[l]:[],guidelines:u},{onSuccess:()=>{f()}})},A=c=>{g(c)};return e.jsxs(x,{elevation:2,className:"p-4",children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",className:"mb-4",children:[e.jsx(o,{variant:"h6",children:"Therapy Plans"}),e.jsx(B,{variant:"contained",startIcon:e.jsx(ue,{}),onClick:p,children:"New Plan"})]}),i.length===0?e.jsx(y,{severity:"info",children:"No therapy plans created yet. Create your first plan to save drug information."}):e.jsx(N,{children:i.map(c=>e.jsxs(D,{className:"border-b last:border-b-0",children:[e.jsx(k,{primary:c.planName,secondary:e.jsxs(d,{children:[e.jsxs(o,{variant:"body2",children:[c.drugs.length," drug(s) included"]}),c.guidelines&&e.jsxs(o,{variant:"body2",className:"mt-1",children:["Guidelines: ",c.guidelines]})]})}),e.jsx(se,{children:e.jsx(ae,{edge:"end","aria-label":"delete",onClick:()=>c._id&&A(c._id),children:e.jsx(pe,{})})})]},c._id))}),e.jsxs(ne,{open:s,onClose:f,maxWidth:"sm",fullWidth:!0,children:[e.jsx(te,{children:"Create New Therapy Plan"}),e.jsxs(oe,{children:[e.jsx(M,{autoFocus:!0,margin:"dense",label:"Plan Name",fullWidth:!0,value:a,onChange:c=>t(c.target.value),className:"mb-4"}),e.jsx(M,{margin:"dense",label:"Clinical Guidelines (Optional)",fullWidth:!0,multiline:!0,rows:3,value:u,onChange:c=>n(c.target.value)}),l&&e.jsxs(d,{className:"mt-4",children:[e.jsx(o,{variant:"subtitle1",className:"mb-2",children:"Selected Drug:"}),e.jsx(L,{label:l.name})]})]}),e.jsxs(ie,{children:[e.jsx(B,{onClick:f,children:"Cancel"}),e.jsx(B,{onClick:v,variant:"contained",disabled:!a.trim(),children:"Create Plan"})]})]})]})},Ge=()=>{const s=Q(),[r,a]=E.useState(0),{selectedDrug:t,searchError:u,setSearchError:n}=R();E.useEffect(()=>(n(null),()=>{n(null)}),[n]);const l={title:"Drug Information Center",purpose:"Access comprehensive drug monographs, clinical guidelines, and formulary information for informed decision-making.",workflow:{description:"Comprehensive drug information resource providing evidence-based data to support clinical decision-making and patient counseling.",steps:["Search for specific drug information","View detailed drug monographs","Check clinical guidelines and protocols","Review formulary status and alternatives","Add relevant information to therapy plans"]},keyFeatures:["Comprehensive drug database","Clinical monographs and references","Formulary management system","Drug interaction database","Dosing guidelines and calculators","Patient counseling information","Adverse effect profiles","Therapeutic equivalence data"],status:"active",estimatedRelease:"Available now"},i=(g,p)=>{a(p)},h=()=>{a(1)};return e.jsx(ce,{moduleInfo:l,icon:_,gradient:"linear-gradient(135deg, #0047AB 0%, #87CEEB 100%)",hideModuleInfo:!0,children:e.jsx(d,{className:"drug-information-center",sx:{width:"100%"},children:e.jsxs(x,{elevation:3,sx:{p:3,borderRadius:"12px",background:s.palette.mode==="dark"?"linear-gradient(to bottom, #1e293b, #0f172a)":"linear-gradient(to bottom, #f9f9f9, #ffffff)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)"},children:[e.jsx(o,{variant:"h5",sx:{mb:3,fontWeight:600,color:s.palette.mode==="dark"?"#87CEEB":"#0047AB",borderBottom:"2px solid",borderBottomColor:s.palette.mode==="dark"?"#374151":"#e0e0e0",paddingBottom:2},children:"Drug Information Center"}),e.jsx(d,{sx:{mb:4},children:e.jsx(Ee,{onDrugSelect:h})}),u&&e.jsx(y,{severity:"error",sx:{mb:4,borderRadius:"8px"},children:u}),t?e.jsxs(e.Fragment,{children:[e.jsx(d,{sx:{borderBottom:1,borderColor:"divider",mt:3,backgroundColor:s.palette.mode==="dark"?"#374151":"#f5f9ff",borderRadius:"8px 8px 0 0",px:1},children:e.jsxs(le,{value:r,onChange:i,variant:"scrollable",scrollButtons:"auto",sx:{"& .MuiTab-root":{fontWeight:500,py:2,minHeight:"48px"},"& .Mui-selected":{color:s.palette.mode==="dark"?"#87CEEB":"#0047AB",fontWeight:600},"& .MuiTabs-indicator":{backgroundColor:s.palette.mode==="dark"?"#87CEEB":"#0047AB",height:3}},children:[e.jsx(P,{label:"Overview"}),e.jsx(P,{label:"Monograph"}),e.jsx(P,{label:"Indications"}),e.jsx(P,{label:"Interactions"}),e.jsx(P,{label:"Adverse Effects"}),e.jsx(P,{label:"Formulary"}),e.jsx(P,{label:"Therapy Plan"})]})}),e.jsxs(d,{sx:{mt:3,p:2,bgcolor:s.palette.mode==="dark"?"#1e293b":"#fff",borderRadius:"0 0 8px 8px",boxShadow:"inset 0 2px 5px rgba(0,0,0,0.05)"},children:[r===0&&e.jsxs(d,{sx:{p:2,borderRadius:"8px",bgcolor:s.palette.mode==="dark"?"#0f172a":"#f9fbff"},children:[e.jsx(o,{variant:"h6",sx:{mb:3,fontWeight:600,color:s.palette.mode==="dark"?"#87CEEB":"#0047AB"},children:t.name}),e.jsxs(d,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsxs(x,{sx:{p:2,bgcolor:s.palette.mode==="dark"?"#374151":"#f0f7ff",borderRadius:"8px",flex:"1 1 45%",minWidth:"250px"},children:[e.jsx(o,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Drug Identifier (RxCUI)"}),e.jsx(o,{variant:"body1",fontWeight:500,children:t.rxCui})]}),e.jsxs(x,{sx:{p:2,bgcolor:s.palette.mode==="dark"?"#374151":"#f0f7ff",borderRadius:"8px",flex:"1 1 45%",minWidth:"250px"},children:[e.jsx(o,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Available Information"}),e.jsx(o,{variant:"body1",children:"Monograph, Interactions, Side Effects, Alternatives"})]})]}),e.jsx(y,{severity:"info",icon:e.jsx(G,{}),sx:{borderRadius:"8px",fontSize:"1rem"},children:"Select the tabs above to view detailed drug information and clinical data"})]}),r===1&&e.jsx(Ae,{drugId:t.rxCui}),r===2&&e.jsx(we,{drugId:t.rxCui,drugName:t.name}),r===3&&e.jsx(Ce,{rxcui:t.rxCui,drugName:t.name}),r===4&&e.jsx(Te,{drugId:t.rxCui,drugName:t.name}),r===5&&e.jsx(Se,{drugId:t.rxCui,drugName:t.name}),r===6&&e.jsx(Ne,{})]})]}):e.jsxs(d,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"300px",bgcolor:s.palette.mode==="dark"?"#0f172a":"#f9fbff",borderRadius:"8px",p:4},children:[e.jsx(_,{sx:{fontSize:"4rem",color:s.palette.mode==="dark"?"#87CEEB":"#0047AB",opacity:.6,mb:2}}),e.jsx(o,{variant:"h6",align:"center",color:"text.secondary",sx:{maxWidth:"500px",mb:2},children:"Search for a drug above to view detailed clinical information, interactions, and formulary data"}),e.jsx(o,{variant:"body2",align:"center",color:"text.secondary",sx:{maxWidth:"600px"},children:"Access comprehensive monographs, check drug interactions, review adverse effects, find therapeutic alternatives, and create therapy plans all in one place."})]})]})})})};export{Ge as default};
