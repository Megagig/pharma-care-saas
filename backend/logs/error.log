{"endpoint":"/api/mtr","level":"error","message":"Non-MTR Error occurred Access denied: Resource belongs to different pharmacy","method":"POST","name":"PatientManagementError","service":"pharma-care-api","stack":"PatientManagementError: Access denied: Resource belongs to different pharmacy\n    at createTenantViolationError (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/utils/responseHelpers.ts:151:3)\n    at checkTenantAccess (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/utils/responseHelpers.ts:279:37)\n    at /home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/controllers/mtrController.ts:158:26\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":403,"timestamp":"2025-08-31 13:56:37","userId":"68ac07aa9c89eac4039ec4f1"}
{"auditData":{"action":"CREATE_MTR_SESSION","complianceCategory":"clinical_documentation","details":{"queryParams":{},"requestBody":{"confidentialityAgreed":false,"patientConsent":false,"patientId":"68b0b5bdb26019cd8ea86b98","priority":"routine","reviewType":"initial"},"statusCode":403,"success":false},"duration":355,"errorMessage":{"message":"Access denied: Resource belongs to different pharmacy","timestamp":"2025-08-31T12:56:37.615Z","type":"InternalServerError"},"resourceId":"68ac07aa9c89eac4039ec4f1","resourceType":"MedicationTherapyReview"},"context":{"ipAddress":"::1","requestMethod":"POST","requestUrl":"/api/mtr","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","userId":"68ac07aa9c89eac4039ec4f1","userRole":"super_admin"},"error":"MTRAuditLog validation failed: errorMessage: Cast to string failed for value \"{\n  type: 'InternalServerError',\n  message: 'Access denied: Resource belongs to different pharmacy',\n  timestamp: '2025-08-31T12:56:37.615Z'\n}\" (type Object) at path \"errorMessage\", workplaceId: Path `workplaceId` is required.","level":"error","message":"Failed to create audit log","service":"mtr-audit","timestamp":"2025-08-31 13:56:37"}
{"endpoint":"/api/mtr","level":"error","message":"Non-MTR Error occurred Access denied: Resource belongs to different pharmacy","method":"POST","name":"PatientManagementError","service":"pharma-care-api","stack":"PatientManagementError: Access denied: Resource belongs to different pharmacy\n    at createTenantViolationError (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/utils/responseHelpers.ts:151:3)\n    at checkTenantAccess (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/utils/responseHelpers.ts:279:37)\n    at /home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/controllers/mtrController.ts:158:26\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":403,"timestamp":"2025-08-31 14:10:17","userId":"68ac07aa9c89eac4039ec4f1"}
{"auditData":{"action":"CREATE_MTR_SESSION","complianceCategory":"clinical_documentation","details":{"queryParams":{},"requestBody":{"confidentialityAgreed":false,"patientConsent":false,"patientId":"68b0b5bdb26019cd8ea86b98","priority":"routine","reviewType":"initial"},"statusCode":403,"success":false},"duration":344,"errorMessage":{"message":"Access denied: Resource belongs to different pharmacy","timestamp":"2025-08-31T13:10:17.285Z","type":"InternalServerError"},"resourceId":"68ac07aa9c89eac4039ec4f1","resourceType":"MedicationTherapyReview"},"context":{"ipAddress":"::1","requestMethod":"POST","requestUrl":"/api/mtr","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","userId":"68ac07aa9c89eac4039ec4f1","userRole":"super_admin"},"error":"MTRAuditLog validation failed: errorMessage: Cast to string failed for value \"{\n  type: 'InternalServerError',\n  message: 'Access denied: Resource belongs to different pharmacy',\n  timestamp: '2025-08-31T13:10:17.285Z'\n}\" (type Object) at path \"errorMessage\", workplaceId: Path `workplaceId` is required.","level":"error","message":"Failed to create audit log","service":"mtr-audit","timestamp":"2025-08-31 14:10:17"}
{"endpoint":"/api/mtr","level":"error","message":"Non-MTR Error occurred Access denied: Resource belongs to different pharmacy","method":"POST","name":"PatientManagementError","service":"pharma-care-api","stack":"PatientManagementError: Access denied: Resource belongs to different pharmacy\n    at createTenantViolationError (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/utils/responseHelpers.ts:151:3)\n    at checkTenantAccess (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/utils/responseHelpers.ts:279:37)\n    at /home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/controllers/mtrController.ts:158:26\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":403,"timestamp":"2025-08-31 14:54:05","userId":"68ac07aa9c89eac4039ec4f1"}
{"auditData":{"action":"CREATE_MTR_SESSION","complianceCategory":"clinical_documentation","details":{"queryParams":{},"requestBody":{"confidentialityAgreed":false,"patientConsent":false,"patientId":"68b0b5bdb26019cd8ea86b98","priority":"routine","reviewType":"initial"},"statusCode":403,"success":false},"duration":322,"errorMessage":{"message":"Access denied: Resource belongs to different pharmacy","timestamp":"2025-08-31T13:54:05.196Z","type":"InternalServerError"},"resourceId":"68ac07aa9c89eac4039ec4f1","resourceType":"MedicationTherapyReview"},"context":{"ipAddress":"::1","requestMethod":"POST","requestUrl":"/api/mtr","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","userId":"68ac07aa9c89eac4039ec4f1","userRole":"super_admin"},"error":"MTRAuditLog validation failed: errorMessage: Cast to string failed for value \"{\n  type: 'InternalServerError',\n  message: 'Access denied: Resource belongs to different pharmacy',\n  timestamp: '2025-08-31T13:54:05.196Z'\n}\" (type Object) at path \"errorMessage\", workplaceId: Path `workplaceId` is required.","level":"error","message":"Failed to create audit log","service":"mtr-audit","timestamp":"2025-08-31 14:54:05"}
{"endpoint":"/api/mtr","level":"error","message":"Non-MTR Error occurred Access denied: Resource belongs to different pharmacy","method":"POST","name":"PatientManagementError","service":"pharma-care-api","stack":"PatientManagementError: Access denied: Resource belongs to different pharmacy\n    at createTenantViolationError (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/utils/responseHelpers.ts:151:3)\n    at checkTenantAccess (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/utils/responseHelpers.ts:279:37)\n    at /home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/controllers/mtrController.ts:158:26\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":403,"timestamp":"2025-08-31 14:54:05","userId":"68ac07aa9c89eac4039ec4f1"}
{"auditData":{"action":"CREATE_MTR_SESSION","complianceCategory":"clinical_documentation","details":{"queryParams":{},"requestBody":{"confidentialityAgreed":false,"patientConsent":false,"patientId":"68b0b5bdb26019cd8ea86b98","priority":"routine","reviewType":"initial"},"statusCode":403,"success":false},"duration":369,"errorMessage":{"message":"Access denied: Resource belongs to different pharmacy","timestamp":"2025-08-31T13:54:05.263Z","type":"InternalServerError"},"resourceId":"68ac07aa9c89eac4039ec4f1","resourceType":"MedicationTherapyReview"},"context":{"ipAddress":"::1","requestMethod":"POST","requestUrl":"/api/mtr","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","userId":"68ac07aa9c89eac4039ec4f1","userRole":"super_admin"},"error":"MTRAuditLog validation failed: errorMessage: Cast to string failed for value \"{\n  type: 'InternalServerError',\n  message: 'Access denied: Resource belongs to different pharmacy',\n  timestamp: '2025-08-31T13:54:05.263Z'\n}\" (type Object) at path \"errorMessage\", workplaceId: Path `workplaceId` is required.","level":"error","message":"Failed to create audit log","service":"mtr-audit","timestamp":"2025-08-31 14:54:05"}
{"endpoint":"/api/mtr","level":"error","message":"Non-MTR Error occurred Access denied: Resource belongs to different pharmacy","method":"POST","name":"PatientManagementError","service":"pharma-care-api","stack":"PatientManagementError: Access denied: Resource belongs to different pharmacy\n    at createTenantViolationError (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/utils/responseHelpers.ts:151:3)\n    at checkTenantAccess (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/utils/responseHelpers.ts:279:37)\n    at /home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/controllers/mtrController.ts:158:26\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":403,"timestamp":"2025-08-31 14:54:20","userId":"68ac07aa9c89eac4039ec4f1"}
{"auditData":{"action":"CREATE_MTR_SESSION","complianceCategory":"clinical_documentation","details":{"queryParams":{},"requestBody":{"confidentialityAgreed":false,"patientConsent":false,"patientId":"68b0b5bdb26019cd8ea86b98","priority":"routine","reviewType":"initial"},"statusCode":403,"success":false},"duration":153,"errorMessage":{"message":"Access denied: Resource belongs to different pharmacy","timestamp":"2025-08-31T13:54:20.515Z","type":"InternalServerError"},"resourceId":"68ac07aa9c89eac4039ec4f1","resourceType":"MedicationTherapyReview"},"context":{"ipAddress":"::1","requestMethod":"POST","requestUrl":"/api/mtr","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","userId":"68ac07aa9c89eac4039ec4f1","userRole":"super_admin"},"error":"MTRAuditLog validation failed: errorMessage: Cast to string failed for value \"{\n  type: 'InternalServerError',\n  message: 'Access denied: Resource belongs to different pharmacy',\n  timestamp: '2025-08-31T13:54:20.515Z'\n}\" (type Object) at path \"errorMessage\", workplaceId: Path `workplaceId` is required.","level":"error","message":"Failed to create audit log","service":"mtr-audit","timestamp":"2025-08-31 14:54:20"}
{"code":11000,"index":0,"keyPattern":{"name":1},"keyValue":{"name":"Pro"},"level":"error","message":"Failed to upsert plan Pro: E11000 duplicate key error collection: PharmaCare.subscriptionplans index: name_1 dup key: { name: \"Pro\" }","service":"pharma-care-api","stack":"MongoServerError: E11000 duplicate key error collection: PharmaCare.subscriptionplans index: name_1 dup key: { name: \"Pro\" }\n    at /home/megagig/PROJECTS/MERN/pharma-care-saas/backend/node_modules/mongodb/src/operations/update.ts:154:44\n    at /home/megagig/PROJECTS/MERN/pharma-care-saas/backend/node_modules/mongodb/src/operations/command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-08-31 18:56:51"}
{"code":11000,"index":0,"keyPattern":{"name":1},"keyValue":{"name":"Pro"},"level":"error","message":"Failed to seed plans: E11000 duplicate key error collection: PharmaCare.subscriptionplans index: name_1 dup key: { name: \"Pro\" }","service":"pharma-care-api","stack":"MongoServerError: E11000 duplicate key error collection: PharmaCare.subscriptionplans index: name_1 dup key: { name: \"Pro\" }\n    at /home/megagig/PROJECTS/MERN/pharma-care-saas/backend/node_modules/mongodb/src/operations/update.ts:154:44\n    at /home/megagig/PROJECTS/MERN/pharma-care-saas/backend/node_modules/mongodb/src/operations/command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-08-31 18:58:38"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'Pharmacist')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'Pharmacist')\n    at PermissionService.checkWorkplaceRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:302:54)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:94:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:154:28)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'Technician')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'Technician')\n    at PermissionService.checkWorkplaceRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:302:54)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:94:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:166:28)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'Owner')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'Owner')\n    at PermissionService.checkWorkplaceRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:302:54)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:94:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:197:28)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'Owner')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'Owner')\n    at PermissionService.checkWorkplaceRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:302:54)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:94:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:245:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'Owner')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'Owner')\n    at PermissionService.checkWorkplaceRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:302:54)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:94:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:245:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'Owner')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'Owner')\n    at PermissionService.checkWorkplaceRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:302:54)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:94:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:245:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'Owner')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'Owner')\n    at PermissionService.checkWorkplaceRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:302:54)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:94:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:245:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'Owner')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'Owner')\n    at PermissionService.checkWorkplaceRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:302:54)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:94:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:245:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'pharmacist')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'pharmacist')\n    at PermissionService.checkSystemRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:266:44)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:88:42)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:245:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'pharmacist')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'pharmacist')\n    at PermissionService.checkSystemRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:266:44)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:88:42)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:245:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'Technician')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'Technician')\n    at PermissionService.checkWorkplaceRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:302:54)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:94:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:259:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'Technician')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'Technician')\n    at PermissionService.checkWorkplaceRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:302:54)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:94:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:259:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'Technician')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'Technician')\n    at PermissionService.checkWorkplaceRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:302:54)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:94:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:259:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'Technician')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'Technician')\n    at PermissionService.checkWorkplaceRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:302:54)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:94:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:259:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'Technician')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'Technician')\n    at PermissionService.checkWorkplaceRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:302:54)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:94:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:259:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'pharmacist')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'pharmacist')\n    at PermissionService.checkSystemRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:266:44)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:88:42)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:259:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'pharmacist')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'pharmacist')\n    at PermissionService.checkSystemRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:266:44)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:88:42)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:259:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'Owner')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'Owner')\n    at PermissionService.checkWorkplaceRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:302:54)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:94:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:276:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'Owner')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'Owner')\n    at PermissionService.checkWorkplaceRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:302:54)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:94:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:276:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'Owner')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'Owner')\n    at PermissionService.checkWorkplaceRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:302:54)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:94:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:276:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'pharmacist')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'pharmacist')\n    at PermissionService.checkSystemRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:266:44)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:88:42)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:276:33)","timestamp":"2025-09-01 11:50:26"}
{"level":"error","message":"Error checking permission: Cannot read properties of undefined (reading 'pharmacist')","service":"pharma-care-api","stack":"TypeError: Cannot read properties of undefined (reading 'pharmacist')\n    at PermissionService.checkSystemRoles (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:266:44)\n    at PermissionService.checkPermission (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:88:42)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at PermissionService.resolveUserPermissions (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/services/PermissionService.ts:121:28)\n    at Object.<anonymous> (/home/megagig/PROJECTS/MERN/pharma-care-saas/backend/src/__tests__/services/PermissionService.test.ts:276:33)","timestamp":"2025-09-01 11:50:26"}
