# =============================================================================
# Patient Engagement & Follow-up Management - Production Environment Variables
# =============================================================================

# Core Module Settings
NODE_ENV=production
PATIENT_ENGAGEMENT_MODULE_VERSION=1.0.0
PATIENT_ENGAGEMENT_DEBUG_MODE=false

# =============================================================================
# FEATURE FLAGS (Initially disabled for gradual rollout)
# =============================================================================

# Core Features
PATIENT_ENGAGEMENT_ENABLED=false
APPOINTMENT_SCHEDULING_ENABLED=false
FOLLOW_UP_MANAGEMENT_ENABLED=false
REMINDER_SYSTEM_ENABLED=false
PATIENT_PORTAL_ENABLED=false
ANALYTICS_REPORTING_ENABLED=false

# Advanced Features (Disabled initially)
RECURRING_APPOINTMENTS_ENABLED=false
MULTI_CHANNEL_REMINDERS_ENABLED=false
AUTOMATED_FOLLOW_UPS_ENABLED=false
PATIENT_SELF_BOOKING_ENABLED=false
REAL_TIME_NOTIFICATIONS_ENABLED=false

# =============================================================================
# APPOINTMENT SYSTEM CONFIGURATION
# =============================================================================

# Appointment Settings
APPOINTMENT_DEFAULT_DURATION=30
APPOINTMENT_MAX_DURATION=120
APPOINTMENT_MIN_DURATION=5
APPOINTMENT_BUFFER_TIME=5
APPOINTMENT_MAX_ADVANCE_BOOKING_DAYS=90
APPOINTMENT_CANCELLATION_DEADLINE_HOURS=24

# Scheduling Configuration
SCHEDULE_WORKING_HOURS_START=08:00
SCHEDULE_WORKING_HOURS_END=18:00
SCHEDULE_WORKING_DAYS=1,2,3,4,5
SCHEDULE_TIMEZONE=Africa/Lagos
SCHEDULE_SLOT_INTERVAL=15
SCHEDULE_MAX_CONCURRENT_APPOINTMENTS=5

# Capacity Management
CAPACITY_UTILIZATION_WARNING_THRESHOLD=80
CAPACITY_UTILIZATION_CRITICAL_THRESHOLD=95
CAPACITY_OVERBOOKING_ALLOWED=false
CAPACITY_EMERGENCY_SLOTS_RESERVED=2

# =============================================================================
# REMINDER SYSTEM CONFIGURATION
# =============================================================================

# Reminder Timing (in minutes before appointment)
REMINDER_24H_ENABLED=true
REMINDER_24H_TIMING=1440
REMINDER_2H_ENABLED=true
REMINDER_2H_TIMING=120
REMINDER_15MIN_ENABLED=true
REMINDER_15MIN_TIMING=15

# Reminder Channels
REMINDER_EMAIL_ENABLED=true
REMINDER_SMS_ENABLED=true
REMINDER_PUSH_ENABLED=true
REMINDER_WHATSAPP_ENABLED=false

# Reminder Delivery
REMINDER_MAX_RETRY_ATTEMPTS=3
REMINDER_RETRY_DELAY_MINUTES=30
REMINDER_BATCH_SIZE=100
REMINDER_PROCESSING_INTERVAL=60000

# Medication Reminders
MEDICATION_REFILL_REMINDER_DAYS=7
MEDICATION_ADHERENCE_CHECK_INTERVAL_DAYS=30
MEDICATION_REMINDER_ENABLED=true

# =============================================================================
# FOLLOW-UP SYSTEM CONFIGURATION
# =============================================================================

# Follow-up Task Settings
FOLLOWUP_DEFAULT_PRIORITY=medium
FOLLOWUP_ESCALATION_THRESHOLD_HOURS=48
FOLLOWUP_OVERDUE_THRESHOLD_HOURS=24
FOLLOWUP_MAX_CONCURRENT_TASKS=50

# Automated Follow-up Triggers
FOLLOWUP_HIGH_RISK_MEDICATION_DAYS=7
FOLLOWUP_LAB_RESULT_ABNORMAL_DAYS=3
FOLLOWUP_HOSPITAL_DISCHARGE_HOURS=48
FOLLOWUP_MEDICATION_CHANGE_DAYS=14
FOLLOWUP_CHRONIC_STABLE_MONTHS=3
FOLLOWUP_CHRONIC_UNSTABLE_MONTHS=1

# Follow-up Monitoring
FOLLOWUP_MONITOR_INTERVAL=3600000
FOLLOWUP_ESCALATION_ENABLED=true
FOLLOWUP_MANAGER_ALERTS_ENABLED=true

# =============================================================================
# PATIENT PORTAL CONFIGURATION
# =============================================================================

# Portal Settings
PATIENT_PORTAL_ENABLED=false
PATIENT_PORTAL_REGISTRATION_ENABLED=false
PATIENT_PORTAL_BOOKING_ENABLED=false
PATIENT_PORTAL_RESCHEDULING_ENABLED=false
PATIENT_PORTAL_CANCELLATION_ENABLED=false

# Portal Security
PATIENT_PORTAL_SESSION_TIMEOUT=3600000
PATIENT_PORTAL_MAX_LOGIN_ATTEMPTS=5
PATIENT_PORTAL_LOCKOUT_DURATION=900000
PATIENT_PORTAL_PASSWORD_MIN_LENGTH=8

# Portal Features
PATIENT_PORTAL_APPOINTMENT_HISTORY=true
PATIENT_PORTAL_MEDICATION_REMINDERS=true
PATIENT_PORTAL_NOTIFICATION_PREFERENCES=true
PATIENT_PORTAL_PROFILE_MANAGEMENT=true

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# Database Performance
DB_CONNECTION_POOL_SIZE=20
DB_CONNECTION_TIMEOUT=10000
DB_QUERY_TIMEOUT=15000
DB_RETRY_ATTEMPTS=3
DB_RETRY_DELAY=1000

# Cache Configuration
CACHE_ENABLED=true
CACHE_TTL_APPOINTMENTS=300
CACHE_TTL_FOLLOWUPS=600
CACHE_TTL_REMINDERS=1800
CACHE_TTL_SCHEDULES=3600
CACHE_MAX_MEMORY=512mb

# Background Jobs
JOB_QUEUE_CONCURRENCY=10
JOB_MAX_ATTEMPTS=3
JOB_RETRY_DELAY=60000
JOB_CLEANUP_INTERVAL=86400000
JOB_STALLED_INTERVAL=30000

# API Performance
API_RATE_LIMIT_REQUESTS=1000
API_RATE_LIMIT_WINDOW=3600000
API_TIMEOUT=30000
API_MAX_PAYLOAD_SIZE=10mb

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Authentication
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d
SESSION_TIMEOUT=3600000
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=900000

# Data Protection
DATA_ENCRYPTION_ENABLED=true
DATA_ANONYMIZATION_ENABLED=true
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555

# RBAC Configuration
RBAC_ENABLED=true
RBAC_CACHE_TTL=300
RBAC_STRICT_MODE=true
RBAC_AUDIT_ENABLED=true

# Input Validation
INPUT_VALIDATION_STRICT=true
XSS_PROTECTION_ENABLED=true
SQL_INJECTION_PROTECTION=true
CSRF_PROTECTION_ENABLED=true

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/PharmacyCopilot/patient-engagement
LOG_MAX_SIZE=100mb
LOG_MAX_FILES=10
LOG_ROTATION_ENABLED=true

# Metrics and Monitoring
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics
METRICS_COLLECTION_INTERVAL=15000

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT=/health
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000

# Performance Monitoring
PERFORMANCE_MONITORING_ENABLED=true
PERFORMANCE_THRESHOLD_WARNING=500
PERFORMANCE_THRESHOLD_CRITICAL=1000
MEMORY_USAGE_WARNING_THRESHOLD=80
MEMORY_USAGE_CRITICAL_THRESHOLD=90

# =============================================================================
# NOTIFICATION SERVICES
# =============================================================================

# Email Configuration
EMAIL_SERVICE_ENABLED=true
EMAIL_PROVIDER=resend
EMAIL_FROM_ADDRESS=appointments@pharma-care.com
EMAIL_FROM_NAME=PharmacyCopilot
EMAIL_TEMPLATE_PATH=/app/templates/email
EMAIL_MAX_ATTACHMENTS=5
EMAIL_MAX_ATTACHMENT_SIZE=10485760

# SMS Configuration
SMS_SERVICE_ENABLED=true
SMS_PROVIDER=twilio
SMS_FROM_NUMBER=+1234567890
SMS_MAX_LENGTH=160
SMS_DELIVERY_REPORTS=true

# Push Notifications
PUSH_NOTIFICATIONS_ENABLED=true
PUSH_PROVIDER=firebase
PUSH_BATCH_SIZE=1000
PUSH_TTL=86400

# WhatsApp Configuration
WHATSAPP_ENABLED=false
WHATSAPP_PROVIDER=twilio
WHATSAPP_FROM_NUMBER=+1234567890
WHATSAPP_TEMPLATE_NAMESPACE=pharma_care

# =============================================================================
# INTEGRATION CONFIGURATION
# =============================================================================

# External API Integration
EXTERNAL_API_TIMEOUT=10000
EXTERNAL_API_RETRY_ATTEMPTS=3
EXTERNAL_API_RETRY_DELAY=1000

# Webhook Configuration
WEBHOOK_ENABLED=true
WEBHOOK_TIMEOUT=5000
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_SIGNATURE_VERIFICATION=true

# Third-party Services
CALENDAR_INTEGRATION_ENABLED=false
EHR_INTEGRATION_ENABLED=false
PHARMACY_SYSTEM_INTEGRATION=false

# =============================================================================
# BACKUP AND RECOVERY
# =============================================================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION=true

# Recovery Configuration
RECOVERY_ENABLED=true
RECOVERY_TIMEOUT=300000
RECOVERY_MAX_ATTEMPTS=3
DISASTER_RECOVERY_ENABLED=true

# =============================================================================
# COMPLIANCE AND AUDIT
# =============================================================================

# Compliance Settings
HIPAA_COMPLIANCE=true
GDPR_COMPLIANCE=true
SOX_COMPLIANCE=true
PCI_COMPLIANCE=false

# Audit Configuration
AUDIT_ALL_ACTIONS=true
AUDIT_SENSITIVE_DATA=true
AUDIT_LOGIN_ATTEMPTS=true
AUDIT_DATA_ACCESS=true
AUDIT_CONFIGURATION_CHANGES=true

# Data Retention
DATA_RETENTION_POLICY_ENABLED=true
APPOINTMENT_DATA_RETENTION_YEARS=7
FOLLOWUP_DATA_RETENTION_YEARS=7
REMINDER_DATA_RETENTION_YEARS=2
AUDIT_LOG_RETENTION_YEARS=7

# =============================================================================
# ENVIRONMENT SPECIFIC OVERRIDES
# =============================================================================

# Database Configuration
DATABASE_URL=${MONGODB_URI}
DATABASE_NAME=PharmacyCopilot
DATABASE_SSL=true
DATABASE_AUTH_SOURCE=admin

# Redis Configuration
REDIS_URL=${REDIS_URL}
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0
REDIS_SSL=true

# External Service Keys (Set in deployment environment)
TWILIO_ACCOUNT_SID=${TWILIO_ACCOUNT_SID}
TWILIO_AUTH_TOKEN=${TWILIO_AUTH_TOKEN}
RESEND_API_KEY=${RESEND_API_KEY}
FIREBASE_PROJECT_ID=${FIREBASE_PROJECT_ID}
FIREBASE_PRIVATE_KEY=${FIREBASE_PRIVATE_KEY}
FIREBASE_CLIENT_EMAIL=${FIREBASE_CLIENT_EMAIL}

# Security Keys
JWT_SECRET=${JWT_SECRET}
ENCRYPTION_KEY=${ENCRYPTION_KEY}
WEBHOOK_SECRET=${WEBHOOK_SECRET}

# Monitoring and Alerting
SENTRY_DSN=${SENTRY_DSN}
DATADOG_API_KEY=${DATADOG_API_KEY}
SLACK_WEBHOOK_URL=${SLACK_WEBHOOK_URL}

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Deployment Settings
DEPLOYMENT_ENVIRONMENT=production
DEPLOYMENT_VERSION=1.0.0
DEPLOYMENT_TIMESTAMP=${DEPLOYMENT_TIMESTAMP}
DEPLOYMENT_COMMIT_SHA=${GIT_COMMIT_SHA}

# Feature Rollout
ROLLOUT_PERCENTAGE=0
ROLLOUT_WORKSPACES=${ROLLOUT_WORKSPACES}
ROLLOUT_STRATEGY=gradual

# Maintenance Mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="System maintenance in progress"
MAINTENANCE_ALLOWED_IPS=${MAINTENANCE_ALLOWED_IPS}

# =============================================================================
# DEVELOPMENT/TESTING (Production should be false)
# =============================================================================

# Development Settings
DEBUG_MODE=false
VERBOSE_LOGGING=false
MOCK_DATA_ENABLED=false
TEST_MODE=false
SEED_DATA=false

# Testing Configuration
E2E_TESTING_ENABLED=false
LOAD_TESTING_ENABLED=false
PERFORMANCE_TESTING_ENABLED=false

# =============================================================================
# RESOURCE LIMITS
# =============================================================================

# Memory Limits
NODE_OPTIONS=--max-old-space-size=2048
MEMORY_LIMIT=2048
MEMORY_WARNING_THRESHOLD=1536
MEMORY_CRITICAL_THRESHOLD=1843

# CPU Limits
CPU_LIMIT=2
CPU_WARNING_THRESHOLD=70
CPU_CRITICAL_THRESHOLD=85

# Network Limits
MAX_CONNECTIONS=1000
CONNECTION_TIMEOUT=30000
KEEP_ALIVE_TIMEOUT=5000

# File System Limits
MAX_FILE_SIZE=50mb
MAX_UPLOAD_SIZE=10mb
TEMP_FILE_CLEANUP_INTERVAL=3600000